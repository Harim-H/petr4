<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta name="generator" content="Madoko, version 1.2.3" />
  <meta name="viewport" content="initial-scale=1.0" />
  <meta name="author" content="The Petr4 Team" />
  <title>Petr4 Semantics</title>
  <style type="text/css"  class="link">
  /*# sourceURL=madoko.css */
  
  .madoko .toc>.tocblock .tocblock .tocblock {
    margin-left: 2.25em;
  }
  .madoko .toc>.tocblock .tocblock {
    margin-left: 1.5em;
  }
  .madoko .toc-contents>.tocblock>.tocitem {
    font-weight: bold;
  }
  .madoko .toc {
    margin-top: 1em;
  }
  .madoko p.para-continue {
    margin-bottom: 0pt;
  }
  .madoko .para-block+p {
    margin-top: 0pt;
  }
  .madoko ul.para-block, .madoko ol.para-block {
    margin-top: 0pt;
    margin-bottom: 0pt;
  }
  .madoko ul.para-end, .madoko ol.para-end {
    margin-bottom: 1em;
  }
  .madoko dl {
    margin-left: 0em;
  }
  .madoko blockquote {
    font-style: italic;
  }
  .madoko a.localref {
    text-decoration: none;
  }
  .madoko a.localref:hover {
    text-decoration: underline;
  }
  .madoko .footnotes {
    font-size: smaller;
    margin-top: 2em;
  }
  .madoko .footnotes hr {
    width: 50%;
    text-align: left;
  }
  .madoko .footnote {
    margin-left: 1em;
  }
  .madoko .footnote-before {
    margin-left: -1em;
    width: 1em;
    display: inline-block;
  }
  .madoko .align-center, .madoko .align-center>p {
    text-align: center !important;
  }
  .madoko .align-center pre {
    text-align: left;
  }
  .madoko .align-center>* {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  .madoko .align-left, .madoko .align-left>p {
    text-align: left !important;
  }
  .madoko .align-left>* {
    margin-left: 0pt !important;
    margin-right: auto !important;
  }
  .madoko .align-right, .madoko .align-right>p {
    text-align: right !important;
  }
  .madoko .align-right>* {
    margin-left: auto !important;
    margin-right: 0pt !important;
  }
  .madoko .align-center>table,
  .madoko .align-left>table,
  .madoko .align-right>table {
    text-align: left !important;
  }
  .madoko .equation-before {
    float: right;
  }
  .madoko .bibitem {
    font-size: smaller;
  }
  .madoko .bibsearch {
    font-size: x-small;
    text-decoration:none;
    color: black;
    font-family: "Segoe UI Symbol", Symbola, serif;
  }
  .madoko .block, .madoko .figure, .madoko .bibitem, .madoko .equation, .madoko div.math {
    margin-top: 1ex;
    margin-bottom: 1ex;
  }
  .madoko .figure {
    padding: 0.5em;
    margin-left: 0pt;
    margin-right: 0pt;
  }
  .madoko .hidden {
    display: none;
  }
  .madoko .invisible {
    visibility: hidden;
  }
  .madoko.preview .invisible {
    visibility: visible;
    opacity: 0.5;
  }
  .madoko code.code, .madoko span.code {
    white-space: pre-wrap;
  }
  .madoko hr, hr.madoko {
    border: none;
    border-bottom: black solid 1px;
    margin-bottom: 0.5ex;
  }
  .madoko .framed>*:first-child {
    margin-top: 0pt;
  }
  .madoko .framed>*:last-child {
    margin-bottom: 0pt;
  }
  .madoko ul.list-style-type-dash {
      list-style-type: none !important;
  }
  .madoko ul.list-style-type-dash > li:before {
      content: "\2013";
      position: absolute;
      margin-left: -1em;
  }
  .madoko table.madoko {
    border-collapse: collapse;
  }
  .madoko td, .madoko th {
    padding: 0ex 0.5ex;
    margin: 0pt;
    vertical-align: top;
  }
  .madoko .cell-border-left {
    border-left: 1px solid black;
  }
  .madoko .cell-border-right {
    border-right: 1px solid black;
  }
  .madoko thead>tr:first-child>.cell-line,
  .madoko tbody:first-child>tr:first-child>.cell-line {
    border-top: 1px solid black;
    border-bottom: none;
  }
  .madoko .cell-line, .madoko .cell-double-line {
    border-bottom: 1px solid black;
    border-top: none;
  }
  .madoko .cell-double-line {
    border-top: 1px solid black;
    padding-top: 1.5px !important;
  }
  .madoko .input-mathpre .MathJax_Display {
    text-align: left !important;
  }
  .madoko div.input-mathpre {
    text-align: left;
    margin-top: 1.5ex;
    margin-bottom: 1ex;
  }
  .madoko .math-rendering {
    text-align: left;
    white-space: pre;
    color: gray;
  }
  .madoko .mathdisplay {
    text-align: center;
  }
  .madoko span.math-rendering {
    display:inline-block;
    width:8em;
    overflow-x:auto;
    font-size:70%;
  }
  .madoko span.math-rendering::-webkit-scrollbar {
    width:4px;
  }
  .madoko .pretty table {
    border-collapse: collapse;
  }
  .madoko .pretty td {
    padding: 0em;
  }
  .madoko .pretty td.empty {
    min-width: 1.5ex;
  }
  .madoko .pretty td.expander {
    width: 100em;
  }
  body.madoko, .madoko .serif {
    font-family: Cambria,"Times New Roman","Liberation Serif","Times",serif;
  }
  .madoko .sans-serif {
    font-family: "Calibri", "Optima", sans-serif;
  }
  .madoko .symbol {
    font-family: "Segoe UI Symbol", Symbola, serif;
  }
  body.madoko {
    -webkit-text-size-adjust: 100%;       
    text-rendering: optimizeLegibility;
  }
  body.madoko {
    max-width: 88ex; 
    margin: 1em auto;
    padding: 0em 2em;
  }
  body.preview.madoko {
    padding: 0em 1em;
  }
  .madoko p {
    text-align: justify;
  }
  .madoko h1, .madoko h2, .madoko h3, .madoko h4 {
    margin-top: 1.22em;
    margin-bottom: 1ex;
  }
  .madoko h1+p, .madoko h2+p, .madoko h3+p, .madoko h4+p, .madoko h5+p  {
    margin-top: 1ex;
  }
  .madoko h5, .madoko h6 {
    margin-top: 1ex;
    font-size: 1em;
  }
  .madoko h5 {
    margin-bottom: 0.5ex;
  }
  .madoko h5 + p {
    margin-top: 0.5ex;
  }
  .madoko h6 {
    margin-bottom: 0pt;
  }
  .madoko h6 + p {
    margin-top: 0pt;
  }
  .madoko pre, .madoko code, .madoko kbd, .madoko samp, .madoko tt,
  .madoko .monospace, .madoko .token-indent, .madoko .reveal pre, .madoko .reveal code, .madoko .email {
    font-family: Consolas,"Andale Mono WT","Andale Mono",Lucida Console,Monaco,monospace,monospace;
    font-size: 0.85em;
  }
  .madoko pre code, .madoko .token-indent {
    font-size: 0.95em;
  }
  .madoko pre code {
    font-family: inherit !important;
  }
  .madoko ol.linenums li {
    background-color: white;
    list-style-type: decimal;
  }
  .madoko .remote {
    background-color: #F0FFF0;
  }
  .madoko .remote + * {
    margin-top: 0pt;
  }
  @media print {
    body.madoko {
      font-size: 10pt;
    }
    @page {
      margin: 1in 1.5in;
    }
  }
  @media only screen and (max-device-width:1024px) {
    body.madoko {
      padding: 0em 0.5em;
    }
    .madoko li {
      text-align: left;
    }
  }
  
    </style>
  
  </head>
<body class="madoko">

<div class="body madoko" style="font-family:utopia-std, serif;line-adjust:0">
<div class="titleblock align-center para-block" data-line="184" style="text-align:center;line-adjust:0">
<div class="titleheader align-center" data-line="184" style="text-align:center;line-adjust:0">
<div class="title para-block" data-line="184" style="font-size:xx-large;margin-bottom:0.5ex;font-family:helvetica, sans-serif;font-weight:bold;line-adjust:0"><span data-line="184"></span>Petr4 Semantics</div>
<div class="titlenote para-block" data-line="187" style="font-family:helvetica, sans-serif;font-weight:bold;line-adjust:0"><span data-line="187"></span>version 0.0.1</div></div>
<div class="authors align-center" data-line="192" style="text-align:center;width:80%;font-family:helvetica, sans-serif;font-weight:bold;line-adjust:0"><table class="authorrow columns block" data-line="192" style="margin-top:2ex;width:100%;line-adjust:0">
<tbody><tr><td class="author column" data-line="192" style="text-align:center;line-adjust:0">
<div class="authorname" data-line="192" style="font-size:large;line-adjust:0"><span data-line="192"></span>The Petr4 Team</div></td></tr></tbody></table></div>
<div class="titlefooter align-center" data-line="201" style="text-align:center;margin-top:0.5ex;font-family:helvetica, sans-serif;font-weight:bold;line-adjust:0"><span data-line="201"></span>2022-02-18</div></div>
<div class="abstract" data-line="186" style="margin-left:3em;margin-right:3em;font-size:small">
<p class="p noindent" data-line="187"><span data-line="187"></span><strong class="strong-star2">Abstract.</strong><span data-line="187"></span> The goal of the Petr4 project is to define a formal semantics for the
P4 Programming Language.</p></div><span data-line="191"></span>
<nav class="toc toc-contents"><h2 id="sec-contents" class="clearnum h1 heading-contents" data-heading-depth="1" style="display:block;font-family:helvetica, sans-serif;font-weight:bold">Contents</h2>
<div class="tocblock tocblock1">
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="sec-introduction" data-toc-depth="1" data-toc-line="[1]{.heading-label}.&#8194;Introduction" style="toctarget:sec-introduction"><a href="#sec-introduction" class="localref"><span class="heading-label">1</span>.&#8194;Introduction</a></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="sec-syntax" data-toc-depth="1" data-toc-line="[2]{.heading-label}.&#8194;Syntax" style="toctarget:sec-syntax"><a href="#sec-syntax" class="localref"><span class="heading-label">2</span>.&#8194;Syntax</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-expression-syntax" data-toc-depth="2" data-toc-line="[2.1]{.heading-label}.&#8194;Expression Syntax" style="toctarget:sec-expression-syntax"><a href="#sec-expression-syntax" class="localref"><span class="heading-label">2.1</span>.&#8194;Expression Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-statement-and-block-syntax" data-toc-depth="2" data-toc-line="[2.2]{.heading-label}.&#8194;Statement and Block Syntax" style="toctarget:sec-statement-and-block-syntax"><a href="#sec-statement-and-block-syntax" class="localref"><span class="heading-label">2.2</span>.&#8194;Statement and Block Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-declaration-syntax" data-toc-depth="2" data-toc-line="[2.3]{.heading-label}.&#8194;Declaration Syntax" style="toctarget:sec-declaration-syntax"><a href="#sec-declaration-syntax" class="localref"><span class="heading-label">2.3</span>.&#8194;Declaration Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-program-syntax" data-toc-depth="2" data-toc-line="[2.4]{.heading-label}.&#8194;Program Syntax" style="toctarget:sec-program-syntax"><a href="#sec-program-syntax" class="localref"><span class="heading-label">2.4</span>.&#8194;Program Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-type-syntax" data-toc-depth="2" data-toc-line="[2.5]{.heading-label}.&#8194;Type Syntax" style="toctarget:sec-type-syntax"><a href="#sec-type-syntax" class="localref"><span class="heading-label">2.5</span>.&#8194;Type Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-value-syntax" data-toc-depth="2" data-toc-line="[2.6]{.heading-label}.&#8194;Value Syntax" style="toctarget:sec-value-syntax"><a href="#sec-value-syntax" class="localref"><span class="heading-label">2.6</span>.&#8194;Value Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-lvalue-syntax" data-toc-depth="2" data-toc-line="[2.7]{.heading-label}.&#8194;LValue Syntax" style="toctarget:sec-lvalue-syntax"><a href="#sec-lvalue-syntax" class="localref"><span class="heading-label">2.7</span>.&#8194;LValue Syntax</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-signal-syntax" data-toc-depth="2" data-toc-line="[2.8]{.heading-label}.&#8194;Signal Syntax" style="toctarget:sec-signal-syntax"><a href="#sec-signal-syntax" class="localref"><span class="heading-label">2.8</span>.&#8194;Signal Syntax</a></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="sec-static" data-toc-depth="1" data-toc-line="[3]{.heading-label}.&#8194;Static Semantics" style="toctarget:sec-static"><a href="#sec-static" class="localref"><span class="heading-label">3</span>.&#8194;Static Semantics</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-typing-contexts" data-toc-depth="2" data-toc-line="[3.1]{.heading-label}.&#8194;Typing contexts" style="toctarget:sec-typing-contexts"><a href="#sec-typing-contexts" class="localref"><span class="heading-label">3.1</span>.&#8194;Typing contexts</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-helper-judgments" data-toc-depth="2" data-toc-line="[3.2]{.heading-label}.&#8194;Helper Judgments" style="toctarget:sec-helper-judgments"><a href="#sec-helper-judgments" class="localref"><span class="heading-label">3.2</span>.&#8194;Helper Judgments</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-numeric-types" data-toc-depth="3" data-toc-line="[3.2.1]{.heading-label}.&#8194;Numeric types" style="toctarget:sec-numeric-types"><a href="#sec-numeric-types" class="localref"><span class="heading-label">3.2.1</span>.&#8194;Numeric types</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lvalue-judgment" data-toc-depth="3" data-toc-line="[3.2.2]{.heading-label}.&#8194;LValue Judgment" style="toctarget:sec-lvalue-judgment"><a href="#sec-lvalue-judgment" class="localref"><span class="heading-label">3.2.2</span>.&#8194;LValue Judgment</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-expression-typing" data-toc-depth="2" data-toc-line="[3.3]{.heading-label}.&#8194;Expression Typing" style="toctarget:sec-expression-typing"><a href="#sec-expression-typing" class="localref"><span class="heading-label">3.3</span>.&#8194;Expression Typing</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-constants" data-toc-depth="3" data-toc-line="[3.3.1]{.heading-label}.&#8194;Type Constants" style="toctarget:sec-type-constants"><a href="#sec-type-constants" class="localref"><span class="heading-label">3.3.1</span>.&#8194;Type Constants</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-variables" data-toc-depth="3" data-toc-line="[3.3.2]{.heading-label}.&#8194;Type Variables" style="toctarget:sec-type-variables"><a href="#sec-type-variables" class="localref"><span class="heading-label">3.3.2</span>.&#8194;Type Variables</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-accesses" data-toc-depth="3" data-toc-line="[3.3.3]{.heading-label}.&#8194;Type Accesses" style="toctarget:sec-type-accesses"><a href="#sec-type-accesses" class="localref"><span class="heading-label">3.3.3</span>.&#8194;Type Accesses</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-unary-operations" data-toc-depth="3" data-toc-line="[3.3.4]{.heading-label}.&#8194;Type Unary Operations" style="toctarget:sec-type-unary-operations"><a href="#sec-type-unary-operations" class="localref"><span class="heading-label">3.3.4</span>.&#8194;Type Unary Operations</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-binary-operations" data-toc-depth="3" data-toc-line="[3.3.5]{.heading-label}.&#8194;Type Binary Operations" style="toctarget:sec-type-binary-operations"><a href="#sec-type-binary-operations" class="localref"><span class="heading-label">3.3.5</span>.&#8194;Type Binary Operations</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-casts" data-toc-depth="3" data-toc-line="[3.3.6]{.heading-label}.&#8194;Type Casts" style="toctarget:sec-type-casts"><a href="#sec-type-casts" class="localref"><span class="heading-label">3.3.6</span>.&#8194;Type Casts</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-member-expressions" data-toc-depth="3" data-toc-line="[3.3.7]{.heading-label}.&#8194;Type Member expressions" style="toctarget:sec-type-member-expressions"><a href="#sec-type-member-expressions" class="localref"><span class="heading-label">3.3.7</span>.&#8194;Type Member expressions</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-ternary-expression" data-toc-depth="3" data-toc-line="[3.3.8]{.heading-label}.&#8194;Type Ternary Expression" style="toctarget:sec-type-ternary-expression"><a href="#sec-type-ternary-expression" class="localref"><span class="heading-label">3.3.8</span>.&#8194;Type Ternary Expression</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-direction-agreement" data-toc-depth="3" data-toc-line="[3.3.9]{.heading-label}.&#8194;Direction agreement" style="toctarget:sec-direction-agreement"><a href="#sec-direction-agreement" class="localref"><span class="heading-label">3.3.9</span>.&#8194;Direction agreement</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-function-calls" data-toc-depth="3" data-toc-line="[3.3.10]{.heading-label}.&#8194;Type Function Calls" style="toctarget:sec-type-function-calls"><a href="#sec-type-function-calls" class="localref"><span class="heading-label">3.3.10</span>.&#8194;Type Function Calls</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-nameless-instantiation" data-toc-depth="3" data-toc-line="[3.3.11]{.heading-label}.&#8194;Type Nameless Instantiation" style="toctarget:sec-type-nameless-instantiation"><a href="#sec-type-nameless-instantiation" class="localref"><span class="heading-label">3.3.11</span>.&#8194;Type Nameless Instantiation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-type-set-operations" data-toc-depth="3" data-toc-line="[3.3.12]{.heading-label}.&#8194;Type Set Operations" style="toctarget:sec-type-set-operations"><a href="#sec-type-set-operations" class="localref"><span class="heading-label">3.3.12</span>.&#8194;Type Set Operations</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-evaluation-environment-typing" data-toc-depth="2" data-toc-line="[3.4]{.heading-label}.&#8194;Evaluation environment typing" style="toctarget:sec-evaluation-environment-typing"><a href="#sec-evaluation-environment-typing" class="localref"><span class="heading-label">3.4</span>.&#8194;Evaluation environment typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-lvalue-typing" data-toc-depth="2" data-toc-line="[3.5]{.heading-label}.&#8194;LValue typing" style="toctarget:sec-lvalue-typing"><a href="#sec-lvalue-typing" class="localref"><span class="heading-label">3.5</span>.&#8194;LValue typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-value-typing" data-toc-depth="2" data-toc-line="[3.6]{.heading-label}.&#8194;Value Typing" style="toctarget:sec-value-typing"><a href="#sec-value-typing" class="localref"><span class="heading-label">3.6</span>.&#8194;Value Typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-store-typing" data-toc-depth="2" data-toc-line="[3.7]{.heading-label}.&#8194;Store typing" style="toctarget:sec-store-typing"><a href="#sec-store-typing" class="localref"><span class="heading-label">3.7</span>.&#8194;Store typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-statement-typing" data-toc-depth="2" data-toc-line="[3.8]{.heading-label}.&#8194;Statement Typing" style="toctarget:sec-statement-typing"><a href="#sec-statement-typing" class="localref"><span class="heading-label">3.8</span>.&#8194;Statement Typing</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-merging-statement-types" data-toc-depth="3" data-toc-line="[3.8.1]{.heading-label}.&#8194;Merging statement types" style="toctarget:sec-merging-statement-types"><a href="#sec-merging-statement-types" class="localref"><span class="heading-label">3.8.1</span>.&#8194;Merging statement types</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-statement-typing-judgment" data-toc-depth="3" data-toc-line="[3.8.2]{.heading-label}.&#8194;Statement typing judgment" style="toctarget:sec-statement-typing-judgment"><a href="#sec-statement-typing-judgment" class="localref"><span class="heading-label">3.8.2</span>.&#8194;Statement typing judgment</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-parser-state-typing" data-toc-depth="2" data-toc-line="[3.9]{.heading-label}.&#8194;Parser state typing" style="toctarget:sec-parser-state-typing"><a href="#sec-parser-state-typing" class="localref"><span class="heading-label">3.9</span>.&#8194;Parser state typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-parameter-typing" data-toc-depth="2" data-toc-line="[3.10]{.heading-label}.&#8194;Parameter typing" style="toctarget:sec-parameter-typing"><a href="#sec-parameter-typing" class="localref"><span class="heading-label">3.10</span>.&#8194;Parameter typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-table-property-typing" data-toc-depth="2" data-toc-line="[3.11]{.heading-label}.&#8194;Table property typing" style="toctarget:sec-table-property-typing"><a href="#sec-table-property-typing" class="localref"><span class="heading-label">3.11</span>.&#8194;Table property typing</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-table-const-entry-typing" data-toc-depth="3" data-toc-line="[3.11.1]{.heading-label}.&#8194;Table const entry typing" style="toctarget:sec-table-const-entry-typing"><a href="#sec-table-const-entry-typing" class="localref"><span class="heading-label">3.11.1</span>.&#8194;Table const entry typing</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-table-property-typing-judgment" data-toc-depth="3" data-toc-line="[3.11.2]{.heading-label}.&#8194;Table property typing judgment" style="toctarget:sec-table-property-typing-judgment"><a href="#sec-table-property-typing-judgment" class="localref"><span class="heading-label">3.11.2</span>.&#8194;Table property typing judgment</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-declaration-typing" data-toc-depth="2" data-toc-line="[3.12]{.heading-label}.&#8194;Declaration Typing" style="toctarget:sec-declaration-typing"><a href="#sec-declaration-typing" class="localref"><span class="heading-label">3.12</span>.&#8194;Declaration Typing</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-typing-of-programs" data-toc-depth="2" data-toc-line="[3.13]{.heading-label}.&#8194;Typing of Programs" style="toctarget:sec-typing-of-programs"><a href="#sec-typing-of-programs" class="localref"><span class="heading-label">3.13</span>.&#8194;Typing of Programs</a></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="sec-dynamic" data-toc-depth="1" data-toc-line="[4]{.heading-label}.&#8194;Dynamic Semantics" style="toctarget:sec-dynamic"><a href="#sec-dynamic" class="localref"><span class="heading-label">4</span>.&#8194;Dynamic Semantics</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-evaluation-environment-and-state" data-toc-depth="2" data-toc-line="[4.1]{.heading-label}.&#8194;Evaluation Environment and State" style="toctarget:sec-evaluation-environment-and-state"><a href="#sec-evaluation-environment-and-state" class="localref"><span class="heading-label">4.1</span>.&#8194;Evaluation Environment and State</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-control-flow" data-toc-depth="2" data-toc-line="[4.2]{.heading-label}.&#8194;Control flow" style="toctarget:sec-control-flow"><a href="#sec-control-flow" class="localref"><span class="heading-label">4.2</span>.&#8194;Control flow</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-evaluation-helper-rules" data-toc-depth="2" data-toc-line="[4.3]{.heading-label}.&#8194;Evaluation Helper Rules" style="toctarget:sec-evaluation-helper-rules"><a href="#sec-evaluation-helper-rules" class="localref"><span class="heading-label">4.3</span>.&#8194;Evaluation Helper Rules</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-memory-allocation-and-dereferencing" data-toc-depth="3" data-toc-line="[4.3.1]{.heading-label}.&#8194;Memory Allocation and Dereferencing" style="toctarget:sec-memory-allocation-and-dereferencing"><a href="#sec-memory-allocation-and-dereferencing" class="localref"><span class="heading-label">4.3.1</span>.&#8194;Memory Allocation and Dereferencing</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-sequence-evaluation" data-toc-depth="3" data-toc-line="[4.3.2]{.heading-label}.&#8194;Sequence Evaluation" style="toctarget:sec-sequence-evaluation"><a href="#sec-sequence-evaluation" class="localref"><span class="heading-label">4.3.2</span>.&#8194;Sequence Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-numeric-value-evaluation" data-toc-depth="3" data-toc-line="[4.3.3]{.heading-label}.&#8194;Numeric Value Evaluation" style="toctarget:sec-numeric-value-evaluation"><a href="#sec-numeric-value-evaluation" class="localref"><span class="heading-label">4.3.3</span>.&#8194;Numeric Value Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-bitslice-evaluation" data-toc-depth="3" data-toc-line="[4.3.4]{.heading-label}.&#8194;Bitslice Evaluation" style="toctarget:sec-bitslice-evaluation"><a href="#sec-bitslice-evaluation" class="localref"><span class="heading-label">4.3.4</span>.&#8194;Bitslice Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-copy-incopy-out" data-toc-depth="3" data-toc-line="[4.3.5]{.heading-label}.&#8194;Copy-In/Copy-Out" style="toctarget:sec-copy-incopy-out"><a href="#sec-copy-incopy-out" class="localref"><span class="heading-label">4.3.5</span>.&#8194;Copy-In/Copy-Out</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-match-switch-case" data-toc-depth="3" data-toc-line="[4.3.6]{.heading-label}.&#8194;Match Switch Case" style="toctarget:sec-match-switch-case"><a href="#sec-match-switch-case" class="localref"><span class="heading-label">4.3.6</span>.&#8194;Match Switch Case</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-match-sets" data-toc-depth="3" data-toc-line="[4.3.7]{.heading-label}.&#8194;Match Sets" style="toctarget:sec-match-sets"><a href="#sec-match-sets" class="localref"><span class="heading-label">4.3.7</span>.&#8194;Match Sets</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-parser-state-machine" data-toc-depth="3" data-toc-line="[4.3.8]{.heading-label}.&#8194;Parser State machine" style="toctarget:sec-parser-state-machine"><a href="#sec-parser-state-machine" class="localref"><span class="heading-label">4.3.8</span>.&#8194;Parser State machine</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-default-action" data-toc-depth="3" data-toc-line="[4.3.9]{.heading-label}.&#8194;Default Action" style="toctarget:sec-default-action"><a href="#sec-default-action" class="localref"><span class="heading-label">4.3.9</span>.&#8194;Default Action</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lpm-entries" data-toc-depth="3" data-toc-line="[4.3.10]{.heading-label}.&#8194;LPM Entries" style="toctarget:sec-lpm-entries"><a href="#sec-lpm-entries" class="localref"><span class="heading-label">4.3.10</span>.&#8194;LPM Entries</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-initial-value-of-type" data-toc-depth="3" data-toc-line="[4.3.11]{.heading-label}.&#8194;Initial Value of Type" style="toctarget:sec-initial-value-of-type"><a href="#sec-initial-value-of-type" class="localref"><span class="heading-label">4.3.11</span>.&#8194;Initial Value of Type</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-name-of-type" data-toc-depth="3" data-toc-line="[4.3.12]{.heading-label}.&#8194;Name of Type" style="toctarget:sec-name-of-type"><a href="#sec-name-of-type" class="localref"><span class="heading-label">4.3.12</span>.&#8194;Name of Type</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-lvalue-operations" data-toc-depth="2" data-toc-line="[4.4]{.heading-label}.&#8194;LValue operations" style="toctarget:sec-lvalue-operations"><a href="#sec-lvalue-operations" class="localref"><span class="heading-label">4.4</span>.&#8194;LValue operations</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-expression-evaluation" data-toc-depth="2" data-toc-line="[4.5]{.heading-label}.&#8194;Expression Evaluation" style="toctarget:sec-expression-evaluation"><a href="#sec-expression-evaluation" class="localref"><span class="heading-label">4.5</span>.&#8194;Expression Evaluation</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-evaluation-of-constants" data-toc-depth="3" data-toc-line="[4.5.1]{.heading-label}.&#8194;Evaluation of Constants" style="toctarget:sec-evaluation-of-constants"><a href="#sec-evaluation-of-constants" class="localref"><span class="heading-label">4.5.1</span>.&#8194;Evaluation of Constants</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-evaluation-of-variables" data-toc-depth="3" data-toc-line="[4.5.2]{.heading-label}.&#8194;Evaluation of Variables" style="toctarget:sec-evaluation-of-variables"><a href="#sec-evaluation-of-variables" class="localref"><span class="heading-label">4.5.2</span>.&#8194;Evaluation of Variables</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-evaluation-of-accessess" data-toc-depth="3" data-toc-line="[4.5.3]{.heading-label}.&#8194;Evaluation of Accessess" style="toctarget:sec-evaluation-of-accessess"><a href="#sec-evaluation-of-accessess" class="localref"><span class="heading-label">4.5.3</span>.&#8194;Evaluation of Accessess</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-unary-operation-evaluation" data-toc-depth="3" data-toc-line="[4.5.4]{.heading-label}.&#8194;Unary Operation Evaluation" style="toctarget:sec-unary-operation-evaluation"><a href="#sec-unary-operation-evaluation" class="localref"><span class="heading-label">4.5.4</span>.&#8194;Unary Operation Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-binary-operation-evaluation" data-toc-depth="3" data-toc-line="[4.5.5]{.heading-label}.&#8194;Binary Operation Evaluation" style="toctarget:sec-binary-operation-evaluation"><a href="#sec-binary-operation-evaluation" class="localref"><span class="heading-label">4.5.5</span>.&#8194;Binary Operation Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-evaluation-of-casts" data-toc-depth="3" data-toc-line="[4.5.6]{.heading-label}.&#8194;Evaluation of Casts" style="toctarget:sec-evaluation-of-casts"><a href="#sec-evaluation-of-casts" class="localref"><span class="heading-label">4.5.6</span>.&#8194;Evaluation of Casts</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-member-expression-evaluation" data-toc-depth="3" data-toc-line="[4.5.7]{.heading-label}.&#8194;Member Expression Evaluation" style="toctarget:sec-member-expression-evaluation"><a href="#sec-member-expression-evaluation" class="localref"><span class="heading-label">4.5.7</span>.&#8194;Member Expression Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-ternary-expression-evaluation" data-toc-depth="3" data-toc-line="[4.5.8]{.heading-label}.&#8194;Ternary Expression Evaluation" style="toctarget:sec-ternary-expression-evaluation"><a href="#sec-ternary-expression-evaluation" class="localref"><span class="heading-label">4.5.8</span>.&#8194;Ternary Expression Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-function-call-evaluation" data-toc-depth="3" data-toc-line="[4.5.9]{.heading-label}.&#8194;Function Call Evaluation" style="toctarget:sec-function-call-evaluation"><a href="#sec-function-call-evaluation" class="localref"><span class="heading-label">4.5.9</span>.&#8194;Function Call Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-nameless-instantiation-evaluation" data-toc-depth="3" data-toc-line="[4.5.10]{.heading-label}.&#8194;Nameless Instantiation Evaluation" style="toctarget:sec-nameless-instantiation-evaluation"><a href="#sec-nameless-instantiation-evaluation" class="localref"><span class="heading-label">4.5.10</span>.&#8194;Nameless Instantiation Evaluation</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-set-operation-evaluation" data-toc-depth="3" data-toc-line="[4.5.11]{.heading-label}.&#8194;Set Operation Evaluation" style="toctarget:sec-set-operation-evaluation"><a href="#sec-set-operation-evaluation" class="localref"><span class="heading-label">4.5.11</span>.&#8194;Set Operation Evaluation</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-statements-and-block-evaluation" data-toc-depth="2" data-toc-line="[4.6]{.heading-label}.&#8194;Statements and Block Evaluation" style="toctarget:sec-statements-and-block-evaluation"><a href="#sec-statements-and-block-evaluation" class="localref"><span class="heading-label">4.6</span>.&#8194;Statements and Block Evaluation</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-declaration-evaluation" data-toc-depth="2" data-toc-line="[4.7]{.heading-label}.&#8194;Declaration Evaluation" style="toctarget:sec-declaration-evaluation"><a href="#sec-declaration-evaluation" class="localref"><span class="heading-label">4.7</span>.&#8194;Declaration Evaluation</a></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-program-evaluation" data-toc-depth="2" data-toc-line="[4.8]{.heading-label}.&#8194;Program Evaluation" style="toctarget:sec-program-evaluation"><a href="#sec-program-evaluation" class="localref"><span class="heading-label">4.8</span>.&#8194;Program Evaluation</a></div></div>
<div class="tocitem tocitem1" data-toc-target-elem="h1" data-toc-target="sec-type-soundness" data-toc-depth="1" data-toc-line="[5]{.heading-label}.&#8194;Type Soundness" style="toctarget:sec-type-soundness"><a href="#sec-type-soundness" class="localref"><span class="heading-label">5</span>.&#8194;Type Soundness</a></div>
<div class="tocblock tocblock2">
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-environment-typing" data-toc-depth="2" data-toc-line="[5.1]{.heading-label}.&#8194;Environment Typing" style="toctarget:sec-environment-typing"><a href="#sec-environment-typing" class="localref"><span class="heading-label">5.1</span>.&#8194;Environment Typing</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--entailment-is-contravariant-with-respect-to-state" data-toc-depth="3" data-toc-line="[5.1.1]{.heading-label}.&#8194;Lemma: Entailment is Contravariant with respect to State" style="toctarget:sec-lemma--entailment-is-contravariant-with-respect-to-state"><a href="#sec-lemma--entailment-is-contravariant-with-respect-to-state" class="localref"><span class="heading-label">5.1.1</span>.&#8194;Lemma: Entailment is Contravariant with respect to State</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--mathkwlv_of_expr-sustains-entailment" data-toc-depth="3" data-toc-line="[5.1.2]{.heading-label}.&#8194;Lemma: $\\mathkw{lv\\_of\\_expr}$ Sustains Entailment" style="toctarget:sec-lemma--mathkwlv_of_expr-sustains-entailment"><a href="#sec-lemma--mathkwlv_of_expr-sustains-entailment" class="localref"><span class="heading-label">5.1.2</span>.&#8194;Lemma: <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{lv\_of\_expr}$</span></span> Sustains Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-the-necromancer-psi--constructing-gamma-from-xi_closure" data-toc-depth="3" data-toc-line="[5.1.3]{.heading-label}.&#8194;The Necromancer $\\Psi$: Constructing $\\Gamma$ from $\\xi_{closure}$" style="toctarget:sec-the-necromancer-psi--constructing-gamma-from-xi_closure"><a href="#sec-the-necromancer-psi--constructing-gamma-from-xi_closure" class="localref"><span class="heading-label">5.1.3</span>.&#8194;The Necromancer <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Psi$</span></span>: Constructing <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span> from <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi_{closure}$</span></span></a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--copyin-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.4]{.heading-label}.&#8194;Lemma: Copyin Preserves Entailment" style="toctarget:sec-lemma--copyin-preserves-entailment"><a href="#sec-lemma--copyin-preserves-entailment" class="localref"><span class="heading-label">5.1.4</span>.&#8194;Lemma: Copyin Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--copyout-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.5]{.heading-label}.&#8194;Lemma: Copyout Preserves Entailment" style="toctarget:sec-lemma--copyout-preserves-entailment"><a href="#sec-lemma--copyout-preserves-entailment" class="localref"><span class="heading-label">5.1.5</span>.&#8194;Lemma: Copyout Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--push-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.6]{.heading-label}.&#8194;Lemma: Push Preserves Entailment" style="toctarget:sec-lemma--push-preserves-entailment"><a href="#sec-lemma--push-preserves-entailment" class="localref"><span class="heading-label">5.1.6</span>.&#8194;Lemma: Push Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--pop-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.7]{.heading-label}.&#8194;Lemma: Pop Preserves Entailment" style="toctarget:sec-lemma--pop-preserves-entailment"><a href="#sec-lemma--pop-preserves-entailment" class="localref"><span class="heading-label">5.1.7</span>.&#8194;Lemma: Pop Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma-mathkwassign_lv-sustains-entailment" data-toc-depth="3" data-toc-line="[5.1.8]{.heading-label}.&#8194;Lemma $\\mathkw{assign\\_lv}$ Sustains Entailment" style="toctarget:sec-lemma-mathkwassign_lv-sustains-entailment"><a href="#sec-lemma-mathkwassign_lv-sustains-entailment" class="localref"><span class="heading-label">5.1.8</span>.&#8194;Lemma <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{assign\_lv}$</span></span> Sustains Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemmas--state-is-monotonic" data-toc-depth="3" data-toc-line="[5.1.9]{.heading-label}.&#8194;Lemmas: State is Monotonic" style="toctarget:sec-lemmas--state-is-monotonic"><a href="#sec-lemmas--state-is-monotonic" class="localref"><span class="heading-label">5.1.9</span>.&#8194;Lemmas: State is Monotonic</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--extending-delta-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.10]{.heading-label}.&#8194;Lemma: Extending $\\Delta$ Preserves Entailment" style="toctarget:sec-lemma--extending-delta-preserves-entailment"><a href="#sec-lemma--extending-delta-preserves-entailment" class="localref"><span class="heading-label">5.1.10</span>.&#8194;Lemma: Extending <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta$</span></span> Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--extending-sigma-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.11]{.heading-label}.&#8194;Lemma: Extending $\\Sigma$ Preserves Entailment" style="toctarget:sec-lemma--extending-sigma-preserves-entailment"><a href="#sec-lemma--extending-sigma-preserves-entailment" class="localref"><span class="heading-label">5.1.11</span>.&#8194;Lemma: Extending <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma$</span></span> Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma-extending-sigma-preserves-per-scope-entailment" data-toc-depth="3" data-toc-line="[5.1.12]{.heading-label}.&#8194;Lemma Extending $\\Sigma$ Preserves Per-Scope Entailment" style="toctarget:sec-lemma-extending-sigma-preserves-per-scope-entailment"><a href="#sec-lemma-extending-sigma-preserves-per-scope-entailment" class="localref"><span class="heading-label">5.1.12</span>.&#8194;Lemma Extending <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma$</span></span> Preserves Per-Scope Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-sketchy-lemma-extending-p-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.13]{.heading-label}.&#8194;Sketchy? Lemma Extending $P$ Preserves Entailment" style="toctarget:sec-sketchy-lemma-extending-p-preserves-entailment"><a href="#sec-sketchy-lemma-extending-p-preserves-entailment" class="localref"><span class="heading-label">5.1.13</span>.&#8194;Sketchy? Lemma Extending <span class="math-rendering" title="Rendering math..."><span class="math-inline">$P$</span></span> Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma-extending-g-xi-sigma-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.14]{.heading-label}.&#8194;Lemma Extending $G, \\, \\xi, \\, \\sigma$ Preserves Entailment" style="toctarget:sec-lemma-extending-g-xi-sigma-preserves-entailment"><a href="#sec-lemma-extending-g-xi-sigma-preserves-entailment" class="localref"><span class="heading-label">5.1.14</span>.&#8194;Lemma Extending <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma{}, \, \xi, \, \sigma$</span></span> Preserves Entailment</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--mathkwinit_val-is-sound" data-toc-depth="3" data-toc-line="[5.1.15]{.heading-label}.&#8194;Lemma: $\\mathkw{init\\_val}$ is Sound" style="toctarget:sec-lemma--mathkwinit_val-is-sound"><a href="#sec-lemma--mathkwinit_val-is-sound" class="localref"><span class="heading-label">5.1.15</span>.&#8194;Lemma: <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{init\_val}$</span></span> is Sound</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-lemma--extending-gamma-with-previously-unbound-name-preserves-entailment" data-toc-depth="3" data-toc-line="[5.1.16]{.heading-label}.&#8194;Lemma: Extending $\\Gamma$ with Previously Unbound Name Preserves Entailment" style="toctarget:sec-lemma--extending-gamma-with-previously-unbound-name-preserves-entailment"><a href="#sec-lemma--extending-gamma-with-previously-unbound-name-preserves-entailment" class="localref"><span class="heading-label">5.1.16</span>.&#8194;Lemma: Extending <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span> with Previously Unbound Name Preserves Entailment</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-type-soundness-of-expressions" data-toc-depth="2" data-toc-line="[5.2]{.heading-label}.&#8194;Type Soundness of Expressions" style="toctarget:sec-type-soundness-of-expressions"><a href="#sec-type-soundness-of-expressions" class="localref"><span class="heading-label">5.2</span>.&#8194;Type Soundness of Expressions</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-expression-type-preservation-theorem-statement" data-toc-depth="3" data-toc-line="[5.2.1]{.heading-label}.&#8194;Expression Type Preservation Theorem Statement" style="toctarget:sec-expression-type-preservation-theorem-statement"><a href="#sec-expression-type-preservation-theorem-statement" class="localref"><span class="heading-label">5.2.1</span>.&#8194;Expression Type Preservation Theorem Statement</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-expression-type-preservation-proof" data-toc-depth="3" data-toc-line="[5.2.2]{.heading-label}.&#8194;Expression Type Preservation Proof" style="toctarget:sec-expression-type-preservation-proof"><a href="#sec-expression-type-preservation-proof" class="localref"><span class="heading-label">5.2.2</span>.&#8194;Expression Type Preservation Proof</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-type-soundness-of-statements" data-toc-depth="2" data-toc-line="[5.3]{.heading-label}.&#8194;Type Soundness of Statements" style="toctarget:sec-type-soundness-of-statements"><a href="#sec-type-soundness-of-statements" class="localref"><span class="heading-label">5.3</span>.&#8194;Type Soundness of Statements</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-context-signal-typing" data-toc-depth="3" data-toc-line="[5.3.1]{.heading-label}.&#8194;Context-signal typing" style="toctarget:sec-context-signal-typing"><a href="#sec-context-signal-typing" class="localref"><span class="heading-label">5.3.1</span>.&#8194;Context-signal typing</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-statement-type-preservation-theorem-statement" data-toc-depth="3" data-toc-line="[5.3.2]{.heading-label}.&#8194;Statement Type Preservation Theorem Statement" style="toctarget:sec-statement-type-preservation-theorem-statement"><a href="#sec-statement-type-preservation-theorem-statement" class="localref"><span class="heading-label">5.3.2</span>.&#8194;Statement Type Preservation Theorem Statement</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-statement-type-preservation-proof" data-toc-depth="3" data-toc-line="[5.3.3]{.heading-label}.&#8194;Statement Type Preservation Proof" style="toctarget:sec-statement-type-preservation-proof"><a href="#sec-statement-type-preservation-proof" class="localref"><span class="heading-label">5.3.3</span>.&#8194;Statement Type Preservation Proof</a></div></div>
<div class="tocitem tocitem2" data-toc-target-elem="h2" data-toc-target="sec-type-soundness-of-declarations" data-toc-depth="2" data-toc-line="[5.4]{.heading-label}.&#8194;Type Soundness of Declarations" style="toctarget:sec-type-soundness-of-declarations"><a href="#sec-type-soundness-of-declarations" class="localref"><span class="heading-label">5.4</span>.&#8194;Type Soundness of Declarations</a></div>
<div class="tocblock tocblock3">
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-declaration-type-preservation-theorem-statement" data-toc-depth="3" data-toc-line="[5.4.1]{.heading-label}.&#8194;Declaration Type Preservation Theorem Statement" style="toctarget:sec-declaration-type-preservation-theorem-statement"><a href="#sec-declaration-type-preservation-theorem-statement" class="localref"><span class="heading-label">5.4.1</span>.&#8194;Declaration Type Preservation Theorem Statement</a></div>
<div class="tocitem tocitem3" data-toc-target-elem="h3" data-toc-target="sec-declaration-type-preservation-proof" data-toc-depth="3" data-toc-line="[5.4.2]{.heading-label}.&#8194;Declaration Type Preservation Proof" style="toctarget:sec-declaration-type-preservation-proof"><a href="#sec-declaration-type-preservation-proof" class="localref"><span class="heading-label">5.4.2</span>.&#8194;Declaration Type Preservation Proof</a></div></div></div></div></nav><h2 id="sec-introduction" class="h1" data-line="193" data-heading-depth="1" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="193"></span><span class="heading-before"><span class="heading-label">1</span>.&#8194;</span><span data-line="193"></span>Introduction</h2><h2 id="sec-syntax" class="h1" data-line="194" data-heading-depth="1" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="194"></span><span class="heading-before"><span class="heading-label">2</span>.&#8194;</span><span data-line="194"></span>Syntax</h2><h3 id="sec-expression-syntax" class="h2" data-line="196" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="196"></span><span class="heading-before"><span class="heading-label">2.1</span>.&#8194;</span><span data-line="196"></span>Expression Syntax</h3>
<div class="p4mathgrammar" data-line="198" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="199">
<div class="mathpre para-block input-mathpre" data-line="200"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{e}~::=~\mathkw{true}\\
\mdmathindent{4}|~\mathkw{false}\\
\mdmathindent{4}|~\mathid{a}~\/\/~&amp;\text{ arbitrary width integer literal}\\
\mdmathindent{4}|~\mathid{nwa}~\/\/~&amp;\text{ unsigned integer literal of size n}\\
\mdmathindent{4}|~\mathid{nsa}~\/\/~&amp;\text{ signed integer literal of size n}\\
\mdmathindent{4}|~\mathid{u}~\/\/~&amp;\text{ strings}\\
\mdmathindent{4}|~\mathid{x}~\/\/~&amp;\text{ name}\\
\mdmathindent{4}|~.\mathid{x}~\/\/~&amp;\text{ top level name}\\
\mdmathindent{4}|~\mathid{e}_{1}[\mathid{e}_{2}]~\/\/~&amp;\text{ array access}\\
\mdmathindent{4}|~\mathid{e}_{1}[\mathid{e}_{2}:\mathid{e}_{3}]~\/\/~&amp;\text{ bitslice}\\
\mdmathindent{4}|~\{~\overline{\mathid{e}}~\}~\/\/~&amp;\text{ list}\\
\mdmathindent{4}|~\{~\overline{\mathid{name}=\mathid{e}}~\}~\/\/~&amp;\text{ records}\\
\mdmathindent{4}|~\mathid{uop}~\mathid{e}\\
\mdmathindent{4}|~\mathid{e}_{1}~\mathid{binop}~\mathid{e}_{2}\\
\mdmathindent{4}|~(\tau{})~\mathid{e}~\/\/~&amp;\text{ explicit cast}\\
\mdmathindent{4}|~\mathid{X}.\mathid{name}~\/\/~&amp;\text{ type member}\\
\mdmathindent{4}|~\mathkw{error}.\mathid{name}~\/\/~&amp;\text{ errors}\\
\mdmathindent{4}|~\mathid{e}.\mathid{name}~\/\/~&amp;\text{ expression member}\\
\mdmathindent{4}|~\mathid{e}_{1}~?~\mathid{e}_{2}~:~\mathid{e}_{3}~\/\/~&amp;\text{ ternary operator}\\
\mdmathindent{4}|~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})~\/\/~&amp;\text{ function call}\\
\mdmathindent{4}|~\tau{}(\overline{\mathid{e}})~\/\/~&amp;\text{ nameless instantiation}\\
\mdmathindent{4}|~\mathid{e}_{1}~\texttt{\&amp;\&amp;\&amp;}~\mathid{e}_{2}~\/\/~&amp;\text{ mask}\\
\mdmathindent{4}|~\mathid{e}_{1}~..~\mathid{e}_{2}~\/\/~&amp;\text{ range}
\end{mdmathpre}%mdk
\]</span></span></div></div></div>
<div class="p4grammar" data-line="224" style="border:solid;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border-width:0.5pt">
<div class="p4grammarblock" data-line="225">
<pre class="para-block pre-fenced pre-fenced4 language-p4 lang-p4 p4 colorized" data-line="226" data-line-first="227" style="display:block;font-family:monospace;font-size:10pt"><code data-line="227"><span style="color:darkgreen">// unary operators</span>
uop ::= ! <span style="color:darkgreen">// not</span>
      | - <span style="color:darkgreen">// unary minus</span>
      | ~ <span style="color:darkgreen">// bitwise complement/not</span>

<span style="color:darkgreen">// binary operators</span>
binop ::= +
        | |+|
        | -
        | |-|
        | *
        | /
        | %
        | &lt;&lt;
        | &gt;&gt;
        | &lt;
        | &gt;
        | &lt;=
        | &gt;=
        | ==
        | !=
        | &amp;
        | ^
        | |
        | ++
        | &amp;&amp;
        | ||</code></pre></div></div><h3 id="sec-statement-and-block-syntax" class="h2" data-line="254" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="254"></span><span class="heading-before"><span class="heading-label">2.2</span>.&#8194;</span><span data-line="254"></span>Statement and Block Syntax</h3>
<div class="p4mathgrammar" data-line="255" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="256">
<div class="mathpre para-block input-mathpre" data-line="257"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{s}~::=~\mathid{e}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})~~~~~\/\/~&amp;\text{ method calls (positional)}\\
\mdmathindent{4}|~\mathid{e}~:=~\mathid{e}~~~~~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ assignment}\\
\mdmathindent{4}|~\tau{}.\mathkw{apply}(\overline{\mathid{e}})~~~~~~~~~~~~~\/\/~&amp;\text{ direct type invocation}\\
\mdmathindent{4}|~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2~~~~~~~~~~~~~\/\/~&amp;\text{ conditional statement}\\
\mdmathindent{4}|~\mathid{blk}~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ block statement}\\
\mdmathindent{4}|~\mathkw{exit}~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ exit statement (only in controls)}\\
\mdmathindent{4}|~\mathkw{;}~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ empty statement}\\
\mdmathindent{4}|~\mathkw{return}~~~~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ return (void)}\\
\mdmathindent{4}|~\mathkw{return}~\mathid{e}~~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ return (with value)}\\
\mdmathindent{4}|~\mathkw{switch}~(\mathid{e})~\{~\overline{\mathid{case}}~\}~\/\/~&amp;\text{ switch statement}\\
\mdmathindent{4}|~\mathid{decl}~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\/\/~&amp;\text{ declaration statement}\\
\\
\mathid{case}~::=~\mathid{case}\_\mathid{lbl}:~\mathid{blk}~~\/\/~&amp;\text{ label with block}\\
\mdmathindent{7}|~\mathid{case}\_\mathid{lbl}:~{}~~~\/\/~&amp;\text{ fallthrough}\\
\\
\mathid{case}\_\mathid{lbl}~::=~\mathid{x}~~~~~~~~~~~~~~~~\/\/~&amp;\text{ name (of action)}\\
\mdmathindent{12}|~\texttt{default}~\/\/~&amp;\text{ catch-all label}\\
\\
\mathid{blk}~::=~\{~\mathid{s}_1;~...~\mathid{s}_\mathid{n};~\}~\/\/~&amp;\text{ blocks}
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h3 id="sec-declaration-syntax" class="h2" data-line="277" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="277"></span><span class="heading-before"><span class="heading-label">2.3</span>.&#8194;</span><span data-line="277"></span>Declaration Syntax</h3>
<div class="p4mathgrammar" data-line="278" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="279">
<div class="mathpre para-block input-mathpre" data-line="280"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{decl}~::=~\mathkw{const}~\tau{}~\mathid{x}\coloneqq{}\mathid{e}\\
\mdmathindent{7}|~\tau{}~\mathid{x}(\overline{\mathid{e}})\\
\mdmathindent{7}|~\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}\\
\mdmathindent{7}|~\mathkw{control}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\mathkw{apply}~\mathid{blk}~\}\\
\mdmathindent{7}|~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}\\
\mdmathindent{7}|~\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\mdmathindent{7}|~\tau{}~\mathid{x}\\
\mdmathindent{7}|~\tau{}~\mathid{x}~:=~\mathid{e}\\
\mdmathindent{7}|~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}\\
\mdmathindent{7}|~\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}\\
\mdmathindent{7}|~\mathkw{table}~\mathid{x}~\{~\overline{\mathid{prop}}~\}\\
\mdmathindent{7}|~\mathkw{header}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}\\
\mdmathindent{7}|~\mathkw{header\ union}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}\\
\mdmathindent{7}|~\mathkw{struct}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}\\
\mdmathindent{7}|~\mathkw{error}~\{~\overline{\mathid{x}}~\}\\
\mdmathindent{7}|~\mathkw{match\_kind}~\{~\overline{\mathid{x}}~\}\\
\mdmathindent{7}|~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{x}}~\}\\
\mdmathindent{7}|~\mathkw{enum}~\tau{}~\mathid{X}~\{~\overline{\mathid{x}=\mathid{e}}~\}\\
\mdmathindent{7}|~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}\\
\mdmathindent{7}|~\mathkw{typedef}~\tau{}~\mathid{X}\\
\mdmathindent{7}|~\mathkw{type}~\tau{}~\mathid{X}\\
\mdmathindent{7}|~\mathkw{control}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\mdmathindent{7}|~\mathkw{parser}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\mdmathindent{7}|~\mathkw{package}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}})\\
\\
\mathid{state}~::=~\mathkw{state}~\mathid{x}~\{~\overline{\mathid{s}};~\mathkw{transition}~\mathid{state}\_\mathid{expr}~\}\\
\\
\mathid{state}\_\mathid{expr}~::=~\mathid{x}\\
\mdmathindent{14}|~\mathkw{select}~(\overline{\mathid{e}})~\{~\overline{\mathid{matches}:\mathid{x}}~\}\\
\\
\mathid{matches}~=~\overline{\mathid{match}}\\
\\
\mathid{match}~::=~\mathkw{\_}\\
\mdmathindent{8}|~\mathid{e}\\
\\
\mathid{ctor}~::=~\mathid{X}(\overline{\mathid{x}:\tau{}})\\
\\
\mathid{method}~::=~\mathkw{abstract}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\mdmathindent{9}|~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\\
\mathid{prop}~::=~\mathkw{key}~=~\{~\overline{\mathid{e}:\mathid{x}}~\}\\
\mdmathindent{7}|~\mathkw{actions}~=~\{~\overline{\mathid{action}\_\mathid{ref}}~\}\\
\mdmathindent{7}|~\mathkw{const}~\mathkw{entries}~=~\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\}\\
\mdmathindent{7}|~\mathid{x}~=~\mathid{e}\\
\mdmathindent{7}|~\mathkw{const}~\mathid{x}~=~\mathid{e}\\
\\
\mathid{action}\_\mathid{ref}~::=~\mathid{x}(\overline{\mathid{e}})
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h3 id="sec-program-syntax" class="h2" data-line="328" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="328"></span><span class="heading-before"><span class="heading-label">2.4</span>.&#8194;</span><span data-line="328"></span>Program Syntax</h3>
<p class="p noindent" data-line="329"><span data-line="329"></span>A program is a sequence of declarations.
</p>
<div class="p4mathgrammar" data-line="330" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="331">
<div class="mathpre para-block input-mathpre" data-line="332"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{P}~::=~\mathid{decl},~\mathid{P}\\
\mdmathindent{4}|~()
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h3 id="sec-type-syntax" class="h2" data-line="335" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="335"></span><span class="heading-before"><span class="heading-label">2.5</span>.&#8194;</span><span data-line="335"></span>Type Syntax</h3>
<div class="p4mathgrammar" data-line="337" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="338">
<div class="mathpre para-block input-mathpre" data-line="339"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\tau{}~::=~\mathkw{bool}\\
\mdmathindent{4}|~\mathkw{string}\\
\mdmathindent{4}|~\mathkw{int}\\
\mdmathindent{4}|~\mathkw{int}\langle{}\mathid{w}\rangle{}\\
\mdmathindent{4}|~\mathkw{bit}\langle{}\mathid{w}\rangle{}\\
\mdmathindent{4}|~\mathkw{varbit}\langle{}\mathid{w}\rangle{}\\
\mdmathindent{4}|~\tau{}[\mathid{a}]\\
\mdmathindent{4}|~\mathkw{tuple}\langle{}\overline{\tau{}}\rangle{}\\
\mdmathindent{4}|~\{~\overline{\tau{}}~\}\\
\mdmathindent{4}|~\{~\overline{\mathid{f}:\tau{}}~\}~~\/\/~&amp;\text{ record type}\\
\mdmathindent{4}|~\mathkw{set}\langle{}\tau{}\rangle{}\\
\mdmathindent{4}|~\mathkw{error}\\
\mdmathindent{4}|~\mathkw{match\_kind}\\
\mdmathindent{4}|~\mathid{X}~~\/\/~&amp;\text{ type name}\\
\mdmathindent{4}|~.\mathid{X}~\/\/~&amp;\text{ top level type reference}\\
\mdmathindent{4}|~\mathkw{newtype}~\tau{}~\mathid{X}\\
\mdmathindent{4}|~\mathkw{void}\\
\mdmathindent{4}|~\mathkw{header}~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mdmathindent{4}|~\mathkw{header\ union}~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mdmathindent{4}|~\mathkw{struct}~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mdmathindent{4}|~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{x}}~\}\\
\mdmathindent{4}|~\mathkw{enum}~\tau{}~\mathid{X}~\{~\overline{\mathid{x}=\mathid{v}}~\}\\
\mdmathindent{4}|~\tau{}\langle{}\overline{\tau{}}\rangle{}~\/\/~&amp;\text{ specialized type}\\
\mdmathindent{4}|~\mathkw{package}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\mdmathindent{4}|~\mathkw{control}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\mdmathindent{4}|~\mathkw{parser}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}})\\
\mdmathindent{4}|~\mathkw{extern}~\mathid{X}~\{~\overline{\mathid{method}}~\}\\
\mdmathindent{4}|~\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}):\tau\\
\mdmathindent{4}|~\mathkw{action}(\overline{\mathid{x}:\tau{},\mathid{d}_0},~\overline{\mathid{x}:\tau{}}):\mathkw{void}\\
\mdmathindent{4}|~\mathkw{constructor}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}}):\tau{}\\
\mdmathindent{4}|~\mathkw{table}~\tau{}\\
\\
\mathid{d}_{0}~::=~\mathkw{in}\\
\mdmathindent{5}|~\mathkw{out}\\
\mdmathindent{5}|~\mathkw{inout}\\
\\
\mathid{d}~::=~\mathid{d}_{0}~|~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div></div></div>
<p class="p noindent" data-line="377"><span data-line="377"></span>Results <span data-line="377"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$res$</span></span><span data-line="377"></span> are types for statements. 
</p>
<div class="p4mathgrammar" data-line="378" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="379">
<div class="mathpre para-block input-mathpre" data-line="380"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{res}\in{}\mathkw{Result}::=\mathkw{returns}~\tau{}~\/\/~&amp;\text{ returns}\\
\mdmathindent{14}|~\mathkw{rejects}~~~~~\/\/~&amp;\text{ rejects}\\
\mdmathindent{14}|~\mathkw{unit}~~~~~~~~\/\/~&amp;\text{ does not return or reject}
\end{mdmathpre}%mdk
\]</span></span></div></div></div>
<p class="p noindent" data-line="384"><span data-line="384"></span>Contexts indicate where a statement is being typechecked.
</p>
<div class="p4mathgrammar" data-line="385" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="386">
<div class="mathpre para-block input-mathpre" data-line="387"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{ctx}~::=~\mathkw{InFunction}~\tau{}\\
\mdmathindent{6}|~\mathkw{InControl}\\
\mdmathindent{6}|~\mathkw{InParser}\\
\mdmathindent{6}|~\mathkw{InAction}
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h3 id="sec-value-syntax" class="h2" data-line="392" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="392"></span><span class="heading-before"><span class="heading-label">2.6</span>.&#8194;</span><span data-line="392"></span>Value Syntax</h3>
<p class="p noindent" data-line="394"><span data-line="394"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$a \in \mathbb{Z}$</span></span><span data-line="394"></span>
</p>
<p class="p indent" data-line="396"><span data-line="396"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n \in \mathbb{N}$</span></span><span data-line="396"></span>
</p>
<p class="p indent" data-line="398"><span data-line="398"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathbb{Z}_n ::= m \% 2^n | m \in \mathbb{Z}$</span></span><span data-line="398"></span>
</p>
<p class="p indent" data-line="400"><span data-line="400"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$m_u^n \in \mathbb{Z}_n$</span></span><span data-line="400"></span>
</p>
<p class="p indent" data-line="402"><span data-line="402"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$m_s^n \in \mathbb{Z}_{n-1} \cup \{ -x | x \in \mathbb{Z}_n\}$</span></span><span data-line="402"></span>
</p>
<p class="p indent" data-line="404"><span data-line="404"></span>Locations in memory:  <span data-line="404"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\ell$</span></span><span data-line="404"></span>
</p>
<p class="p indent" data-line="406"><span data-line="406"></span>Values
</p>
<div class="p4mathgrammar" data-line="407" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="408">
<div class="mathpre para-block input-mathpre" data-line="409"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{v}_\mathid{o}~::=~\mathid{b}~\/\/~&amp;\text{ booleans}\\
\mdmathindent{4}|~\mathid{a}~\/\/~&amp;\text{ arbitrary-width integers}\\
\mdmathindent{4}|~\mathid{m}_\mathid{u}^\mathid{n}~\/\/~&amp;\text{ unsigned integers, n not zero}\\
\mdmathindent{4}|~\mathid{m}_\mathid{s}^\mathid{n}~\/\/~&amp;\text{ signed integers, n not zero}\\
\mdmathindent{4}|~(\mathid{n}&#39;,~\mathid{m}_\mathid{u}^{\mathid{n}})~\/\/~&amp;\text{ variable-size bitstrings, n less than n&#39;}\\
\mdmathindent{4}|~\mathid{u}~\/\/~&amp;\text{ strings}\\
\mdmathindent{4}|~(\overline{\mathid{v}})~\/\/~&amp;\text{ tuples}\\
\mdmathindent{4}|~\{~\overline{\mathid{name}=\mathid{v}}~\}~\/\/~&amp;\text{ records}\\
\mdmathindent{4}|~\mathid{set}\\
\mdmathindent{4}|~\mathkw{error}.\mathid{name}\\
\mdmathindent{4}|~\mathkw{matchkind}~\mathid{name}\\
\mdmathindent{4}|~\xi_{\mathid{closure}}\otimes{}\mathid{v}_{\mathid{anon}}~\/\/~&amp;\text{ closures}\\
\mdmathindent{4}|~\mathkw{builtin}~\mathid{name}~\mathid{lv}\\
\mdmathindent{4}|~\mathkw{struct}~\{~\overline{(\mathid{name},~\mathid{v})}~\}\\
\mdmathindent{4}|~\mathkw{header}~\mathid{b}~\{~\overline{(\mathid{name},~\mathid{v})}~\}\\
\mdmathindent{4}|~\mathkw{header\ union}~\{~\overline{(\mathid{name},~\mathid{v})}~\}\\
\mdmathindent{4}|~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~\/\/~&amp;\text{ stacks}\\
\mdmathindent{4}|~\mathid{name}_1.\mathid{name}_2~\/\/~&amp;\text{ enumfield}\\
\mdmathindent{4}|~(\mathid{name}_1.\mathid{name}_2,~\mathid{v})~\/\/~&amp;\text{ senumfield}\\
\mdmathindent{4}|~(\ell,~\mathid{name}_{\mathid{object}})~\/\/~&amp;\text{ stateful runtime}\\
\mdmathindent{4}|~\mathkw{parser}~\overline{(\mathid{name},~\mathid{v})}~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\overline{\mathid{state}}\\
\mdmathindent{4}|~\mathkw{control}~\overline{(\mathid{name},~\mathid{v})}~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\mathid{blk}\\
\mdmathindent{4}|~\mathkw{package}~\overline{(\mathid{name},~\mathid{v})}\\
\mdmathindent{4}|~\mathkw{table}~\mathid{name}~\overline{\mathid{e}:\mathid{x}}~\overline{\mathid{action}\_\mathid{ref}}~\mathid{action}\_\mathid{ref}_\mathid{default}~\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\}\\
\mdmathindent{4}|~\mathkw{extern}~\mathid{name}~\mathid{v}\\
\\
\mathid{v}_{\mathid{anon}}~::=~\mathkw{function}\langle{}\mathid{X}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}~~~~~~~~~~~~~~~~\/\/~&amp;\text{ function code}\\
\mdmathindent{11}|~\mathkw{action}(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}~~~~\/\/~&amp;\text{ action code}\\
\\
\mathid{v}~::=~\mathid{v}_\mathid{o}~|~\mathkw{None}
\end{mdmathpre}%mdk
\]</span></span></div></div></div>
<p class="p noindent" data-line="440"><span data-line="440"></span>Sets
</p>
<div class="p4mathgrammar" data-line="441" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="442">
<div class="mathpre para-block input-mathpre" data-line="443"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{set}~::=~~\mathkw{universal}\\
\mdmathindent{4}|~\mathkw{singleton}~\mathid{w}~\mathid{v}\\
\mdmathindent{4}|~\mathid{v}_{1}~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_{2}~\/\/~&amp;\text{ mask}\\
\mdmathindent{4}|~\mathid{v}_{1}~..~\mathid{v}_{2}~\/\/~&amp;\text{ range}\\
\mdmathindent{4}|~\mathkw{product}~\overline{\mathid{set}}\\
\mdmathindent{4}|~\mathkw{lpm}~\mathid{w}~\mathid{v}_{1}~\mathid{v}_{2}\\
\mdmathindent{4}|~\mathkw{value\_set}~\overline{\mathid{matches}}~\overline{\mathid{set}}
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h3 id="sec-lvalue-syntax" class="h2" data-line="451" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="451"></span><span class="heading-before"><span class="heading-label">2.7</span>.&#8194;</span><span data-line="451"></span>LValue Syntax</h3>
<div class="p4mathgrammar" data-line="452" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="453">
<div class="mathpre para-block input-mathpre" data-line="454"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{lv}~::=~\ell\\
\mdmathindent{5}|~\mathid{lv}.\mathid{x}\\
\mdmathindent{5}|~\mathid{lv}[\mathid{n}_{1}:\mathid{n}_{2}]\\
\mdmathindent{5}|~\mathid{lv}[\mathid{n}]
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h3 id="sec-signal-syntax" class="h2" data-line="459" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="459"></span><span class="heading-before"><span class="heading-label">2.8</span>.&#8194;</span><span data-line="459"></span>Signal Syntax</h3>
<p class="p noindent" data-line="460"><span data-line="460"></span>Statements evaluate to signals, which describe control flow.
</p>
<div class="p4mathgrammar" data-line="461" style="breakable:true;margin-top:6pt;margin-bottom:6pt;padding:6pt;background-color:#e6ffff;border:solid;border-width:0.5pt">
<div class="p4mathgrammarblock" data-line="462">
<div class="mathpre para-block input-mathpre" data-line="463"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{sig}::=\mathkw{return}~\mathid{v}\\
\mdmathindent{6}|~\mathkw{return}\\
\mdmathindent{6}|~\mathkw{exit}\\
\mdmathindent{6}|~\mathkw{transition}~\mathkw{reject}~\mathid{x}\\
\mdmathindent{6}|~\mathkw{transition}~\mathkw{accept}\\
\mdmathindent{6}|~\mathkw{transition}~\mathid{x}\\
\mathid{ssig}~::=~\mathkw{go}\\
\mdmathindent{6}|~\mathkw{stop}~\mathid{sig}_0\\
\mathid{vsig}~::=~\mathkw{ok}~\mathid{v}\\
\mdmathindent{7}|~\mathkw{stop}~\mathid{sig}_0\\
\mathid{lsig}~::=~\mathkw{ok}~\mathid{lv}\\
\mdmathindent{7}|~\mathkw{stop}~\mathid{sig}_0
\end{mdmathpre}%mdk
\]</span></span></div></div></div><h2 id="sec-static" class="h1" data-line="476" data-heading-depth="1" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="476"></span><span class="heading-before"><span class="heading-label">3</span>.&#8194;</span><span data-line="476"></span>Static Semantics</h2><h3 id="sec-typing-contexts" class="h2" data-line="478" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="478"></span><span class="heading-before"><span class="heading-label">3.1</span>.&#8194;</span><span data-line="478"></span>Typing contexts</h3>
<p class="p noindent" data-line="480"><span data-line="480"></span>All typing judgments include
</p>
<ol class="ol compact" data-line="482">
<li class="li ol-li compact-li" data-line="482"><span data-line="482"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma$</span></span><span data-line="482"></span>, the values of any compile-time-known constants,
</li>
<li class="li ol-li compact-li" data-line="483"><span data-line="483"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta$</span></span><span data-line="483"></span>, the definitions of type names in scope, and
</li>
<li class="li ol-li compact-li" data-line="484"><span data-line="484"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="484"></span>, the types of variables in scope.
</li></ol>

<p class="p noindent" data-line="486"><span data-line="486"></span>Some judgments need a store typing <span data-line="486"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi$</span></span><span data-line="486"></span>.
</p>
<p class="p indent para-continue" data-line="488"><span data-line="488"></span>Type variables are tracked by mapping type names <span data-line="488"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X$</span></span><span data-line="488"></span> to themselves in
the context <span data-line="489"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta$</span></span><span data-line="489"></span>. Equivalently there could be another context that
was a list of lists of type variables, without them being mapped to
anything.
</p>
<div class="mathpre para-block input-mathpre" data-line="493"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\sigma ::=~\sigma,~\mathid{x}=\mathid{v}~|~[]\\
\\
\Sigma{}~::=~\Sigma{},~\sigma{}~|~[]\\
\\
\delta ::=~\delta,~\mathid{X}=\tau{}~|~[]\\
\\
\Delta{}~::=~\Delta{},~\delta{}~|~[]\\
\\
\gamma ::=~\gamma,~\mathid{x}:\tau{},\mathid{d}~|~[]\\
\\
\Gamma{}~::=~\Gamma{},~\gamma{}~|~[]\\
\\
\Xi ::=~\Xi,~\ell:\tau{}~|~[]
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="509"><span data-line="509"></span>There are also lookup tests defined for <span data-line="509"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$C \in \{ \Sigma{}, \Delta{}, \Gamma{} \}$</span></span><span data-line="509"></span> and <span data-line="509"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$c \in \{ \sigma, \delta, \gamma, \Xi \}$</span></span><span data-line="509"></span>.
</p>
<div class="judgment" data-line="510">
<div class="mathpre infer para-block input-mathpre" data-line="511"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\mathid{c}(\mathid{x})~=~\mathid{y}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="514">
<div class="mathpre infer para-block input-mathpre" data-line="515"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{c}~=~\mathid{c}&#39;,~\mathid{x}~=~\mathid{y}}{\mathid{c}(\mathid{x})~=~\mathid{y}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="520">
<div class="mathpre infer para-block input-mathpre" data-line="521"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{c}~=~\mathid{c}&#39;,~\mathid{u}~=~\mathid{v}\\
\mathid{u}~\neq \mathid{x}\\
\mathid{c}&#39;(\mathid{x})~=~\mathid{y}}{\mathid{c}(\mathid{x})~=~\mathid{y}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="judgment" data-line="528">
<div class="mathpre infer para-block input-mathpre" data-line="529"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\mathid{C}(\mathid{x})~=~\mathid{y}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="532">
<div class="mathpre infer para-block input-mathpre" data-line="533"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{C}~=~\mathid{C}&#39;,~\mathid{c}\\
\mathid{c}(\mathid{x})~=~\mathid{y}}{\mathid{C}(\mathid{x})~=~\mathid{y}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="539">
<div class="mathpre infer para-block input-mathpre" data-line="540"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{C}~=~\mathid{C}&#39;,~\sigma\\
\mathid{x}\notin{}\mathkw{dom}~\mathid{c}\\
\Sigma{}&#39;(\mathid{x})~=~\mathid{y}}{\mathid{C}(\mathid{x})~=~\mathid{y}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="judgment" data-line="547">
<div class="mathpre infer para-block input-mathpre" data-line="548"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\mathid{C}(.\mathid{x})~=~\mathid{y}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="551">
<div class="mathpre infer para-block input-mathpre" data-line="552"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{C}~=~[],~\mathid{c}\\
\mathid{c}(\mathid{x})~=~\mathid{y}}{\mathid{C}(.\mathid{x})~=~\mathid{y}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="558">
<div class="mathpre infer para-block input-mathpre" data-line="559"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{C}~=~\mathid{C}&#39;,~\mathid{c}\\
\mathid{C}&#39;(.\mathid{x})~=~\mathid{y}}{\mathid{C}(.\mathid{x})~=~\mathid{y}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-helper-judgments" class="h2" data-line="565" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="565"></span><span class="heading-before"><span class="heading-label">3.2</span>.&#8194;</span><span data-line="565"></span>Helper Judgments</h3><h4 id="sec-numeric-types" class="h3" data-line="567" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="567"></span><span class="heading-before"><span class="heading-label">3.2.1</span>.&#8194;</span><span data-line="567"></span>Numeric types</h4>
<p class="p noindent para-continue" data-line="568"><span data-line="568"></span>Judgment form <span data-line="568"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{numeric}(\tau{})$</span></span><span data-line="568"></span> with 3 rules.
</p>
<div class="mathpre para-block input-mathpre" data-line="569"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\inferrule{~}{\mathkw{numeric}(\mathkw{int})}~~~\inferrule{~}{\mathkw{numeric}(\mathkw{int}\langle{}\mathid{w}\rangle{})}~~~\inferrule{~}{\mathkw{numeric}(\mathkw{bit}\langle{}\mathid{w}\rangle{})}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-lvalue-judgment" class="h3" data-line="573" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="573"></span><span class="heading-before"><span class="heading-label">3.2.2</span>.&#8194;</span><span data-line="573"></span>LValue Judgment</h4>
<p class="p noindent" data-line="574"><span data-line="574"></span><em class="em-star1">TODO: this is maybe a misnamed judgment. Actual lvalues are
rooted at memory locations, not variables, so its confusing to name
this judgment lvalue when it really is checking that you can evaluate
the thing to an lvalue. Better name might be <span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{assignable}$</span></span>?}</em><span data-line="577"></span>
</p>
<p class="p indent" data-line="579"><span data-line="579"></span>Left-values or lvalues are expressions that can appear on the left
side of an assignment <span data-line="580"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$e\coloneqq{}e$</span></span><span data-line="580"></span>. As its signature suggests, this judgment
presupposes <span data-line="581"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma{},\Delta{},\Gamma{} \vdash{} e:t$</span></span><span data-line="581"></span>.
</p>
<div class="judgment" data-line="582">
<div class="mathpre infer para-block input-mathpre" data-line="583"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Sigma{},\Delta{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{lvalue}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="586">
<div class="mathpre infer para-block input-mathpre" data-line="587"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\tau{}~\mathid{not}~\mathid{a}~\mathid{stateful},~\mathid{constant},~\mathid{or}~\mathid{function}~\mathid{type}\\
\mathid{x}\notin{}\mathkw{dom}~\Sigma{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{x}:\tau{}~\mathkw{lvalue}}{\textsc{Name-LValue}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="593">
<div class="mathpre infer para-block input-mathpre" data-line="594"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\tau{}~\mathid{not}~\mathid{a}~\mathid{stateful},~\mathid{constant},~\mathid{or}~\mathid{function}~\mathid{type}\\
\mathid{x}\notin{}\mathkw{dom}~\Sigma{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~.\mathid{x}:\tau{}~\mathkw{lvalue}}{\textsc{Top-Level-Name-LValue}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="600">
<div class="mathpre infer para-block input-mathpre" data-line="601"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{e}~\mathkw{lvalue}\\
\mathid{x}~\mathid{not}~\mathid{a}~\mathid{builtin}~\mathid{field}~\mathid{on}~\tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathid{x}:\tau{}~\mathkw{lvalue}}{\textsc{Member-LValue}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="607">
<div class="mathpre infer para-block input-mathpre" data-line="608"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{e}_{1}~\mathkw{lvalue}}{\mathid{e}_{1}[\mathid{e}_{2}]:\tau{}~\mathkw{lvalue}}{\textsc{Index-LValue}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="613">
<div class="mathpre infer para-block input-mathpre" data-line="614"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{e}~\mathkw{lvalue}}{\mathid{e}[\mathid{n}_{1}:\mathid{n}_{2}]:\tau{}~\mathkw{lvalue}}{\textsc{Slice-LValue}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-expression-typing" class="h2" data-line="619" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="619"></span><span class="heading-before"><span class="heading-label">3.3</span>.&#8194;</span><span data-line="619"></span>Expression Typing</h3><h4 id="sec-type-constants" class="h3" data-line="620" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="620"></span><span class="heading-before"><span class="heading-label">3.3.1</span>.&#8194;</span><span data-line="620"></span>Type Constants</h4>
<div class="infer" data-line="622">
<div class="mathpre infer para-block input-mathpre" data-line="623"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool}}{\textsc{Bool-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="628">
<div class="mathpre infer para-block input-mathpre" data-line="629"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool}}{\textsc{Bool-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="634">
<div class="mathpre infer para-block input-mathpre" data-line="635"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{u}~:~\mathkw{string}}{\textsc{String}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="640">
<div class="mathpre infer para-block input-mathpre" data-line="641"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{a}~:~\mathkw{int}}{\textsc{Int-Constant}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="646">
<div class="mathpre infer para-block input-mathpre" data-line="647"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{nsa}~:~\mathkw{int}\langle{}\mathid{n}\rangle{}}{\textsc{Signed-Int-Constant}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="652">
<div class="mathpre infer para-block input-mathpre" data-line="653"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{nwa}~:~\mathkw{bit}\langle{}\mathid{n}\rangle{}}{\textsc{Unsigned-Int-Constant}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-variables" class="h3" data-line="658" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="658"></span><span class="heading-before"><span class="heading-label">3.3.2</span>.&#8194;</span><span data-line="658"></span>Type Variables</h4>
<div class="infer" data-line="660">
<div class="mathpre infer para-block input-mathpre" data-line="661"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Gamma{}(\mathid{x})~=~\tau{},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{x}~:~\tau{},~\mathid{d}}{\textsc{Var}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="666">
<div class="mathpre infer para-block input-mathpre" data-line="667"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Gamma{}(.\mathid{x})~=~\tau{},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~.\mathid{x}~:~\tau{},~\mathid{d}}{\textsc{Var-Top}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-accesses" class="h3" data-line="672" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="672"></span><span class="heading-before"><span class="heading-label">3.3.3</span>.&#8194;</span><span data-line="672"></span>Type Accesses</h4>
<div class="infer" data-line="674">
<div class="mathpre infer para-block input-mathpre" data-line="675"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1[],~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~~:~\tau{}_2,~\_\\
\mathkw{numeric}(\tau{}_2)}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1[\mathid{e}_2]~:~\tau{}_1,~\mathid{d}_1}{\textsc{Array-Access}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="682">
<div class="mathpre infer para-block input-mathpre" data-line="683"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~~:~\tau{}_2,~\_\\
\mathkw{numeric}(\tau{}_2)\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_3~~:~\tau{}_3,~\_\\
\mathkw{numeric}(\tau{}_3)\\
0~\leq \Sigma{}(\mathid{e}_3)~\leq \Sigma{}(\mathid{e}_2)~\langle{}~\mathid{w}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_{1}[\mathid{e}_{2}:\mathid{e}_{3}]~:~\mathid{bit}\langle{}\Sigma{}(\mathid{e}_2)~-~\Sigma{}(\mathid{e}_3)~+~1\rangle{},~\mathid{d}_1}{\textsc{Slice}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="693">
<div class="mathpre infer para-block input-mathpre" data-line="694"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:~\tau,~\mathid{none}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{e}}~\}~:~\{~\overline{\tau}~\},~\mathid{none}}{\textsc{List-Expression}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="699">
<div class="mathpre infer para-block input-mathpre" data-line="700"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}~:~\tau{}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{f}~=~\mathid{e}}~\}~:~\{~\overline{\mathid{f}~:~\tau{}}~\}}{\textsc{Record}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-unary-operations" class="h3" data-line="705" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="705"></span><span class="heading-before"><span class="heading-label">3.3.4</span>.&#8194;</span><span data-line="705"></span>Type Unary Operations</h4>
<div class="infer" data-line="707">
<div class="mathpre infer para-block input-mathpre" data-line="708"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bool},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~!\mathid{e}~:~\mathkw{bool},~\mathid{d}}{\textsc{Not}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="713">
<div class="mathpre infer para-block input-mathpre" data-line="714"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~{\texttt{\textasciitilde}\mathid{e}}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}}{\textsc{Bitwise-Not}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="719">
<div class="mathpre infer para-block input-mathpre" data-line="720"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},~\mathid{d}\\
\mathkw{numeric}(\tau{})}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~{-\mathid{e}}~:~\tau{},~\mathid{d}}{\textsc{Negate}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-binary-operations" class="h3" data-line="726" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="726"></span><span class="heading-before"><span class="heading-label">3.3.5</span>.&#8194;</span><span data-line="726"></span>Type Binary Operations</h4>
<pre class="para-block pre-fenced pre-fenced3 language-haskell lang-haskell haskell colorized" data-line="728" data-line-first="729" style="display:block;font-family:monospace;font-size:10pt"><code data-line="729">  fun binaryDir <span style="color:purple">In</span> <span style="color:purple">In</span> <span style="color:blue;font-weight:bold">=</span> <span style="color:purple">In</span>
    <span style="color:blue;font-weight:bold">|</span> binaryDir _  _  <span style="color:blue;font-weight:bold">=</span> none</code></pre>
<div class="infer" data-line="733">
<div class="mathpre infer para-block input-mathpre" data-line="734"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bool},~\mathid{d}_2\\
\diamond \in \{~\&amp;\&amp;,~||~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Bool-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="741">
<div class="mathpre infer para-block input-mathpre" data-line="742"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{int},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{int},~\mathid{d}_2\\
\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,~/,~\%~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{int},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Int-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="749">
<div class="mathpre infer para-block input-mathpre" data-line="750"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,|+|,|-|~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Int-Signed-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="757">
<div class="mathpre infer para-block input-mathpre" data-line="758"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,|+|,|-|,\&amp;,\hat{},|,\oplus \}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Int-Unsigned-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div><!--
need to define has_equality
-->



<div class="infer" data-line="769">
<div class="mathpre infer para-block input-mathpre" data-line="770"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{},~\mathid{d}_2\\
\mathkw{has\_equality}(\tau{})\\
\diamond \in \{~==,!=~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Equality-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="778">
<div class="mathpre infer para-block input-mathpre" data-line="779"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{l}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{r}\rangle{},~\mathid{d}_2}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{++}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{l}+\mathid{r}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Bit-Concat-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="785">
<div class="mathpre infer para-block input-mathpre" data-line="786"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1,~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{}_2,~\mathid{d}_2\\
\mathkw{numeric}(\tau{}_1)\\
\tau{}_2~=~\mathkw{bit}\langle{}\_\rangle{}~\lor \tau{}_2~=~\mathkw{int}\\
\diamond \in \{\ll,~\gg\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\tau{}_1,~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Shift-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-casts" class="h3" data-line="795" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="795"></span><span class="heading-before"><span class="heading-label">3.3.6</span>.&#8194;</span><span data-line="795"></span>Type Casts</h4>
<p class="p noindent" data-line="797"><span data-line="797"></span>Casting from <span data-line="797"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\tau_0$</span></span><span data-line="797"></span> to <span data-line="797"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\tau$</span></span><span data-line="797"></span> is permitted by the
<span data-line="798"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\tau \prec \tau&#39;$</span></span><span data-line="798"></span> judgment.
</p>
<p class="p indent" data-line="800"><span data-line="800"></span>The equality sign here hasn<span data-line="800"></span>&#39;<span data-line="800"></span>t been defined and probably won<span data-line="800"></span>&#39;<span data-line="800"></span>t make
sense without adding a context for looking up variables and type
names.
</p>
<div class="infer" data-line="803">
<div class="mathpre infer para-block input-mathpre" data-line="804"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\tau{}~=~\tau{}&#39;}{\tau{}~\mathrel{\prec}~\tau{}&#39;}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="809">
<div class="mathpre infer para-block input-mathpre" data-line="810"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{int}~\mathrel{\prec}~\mathkw{int}\langle{}\mathid{w}\rangle{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="814">
<div class="mathpre infer para-block input-mathpre" data-line="815"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{int}~\mathrel{\prec}~\mathkw{bit}\langle{}\mathid{w}\rangle{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="820">
<div class="mathpre infer para-block input-mathpre" data-line="821"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\{\tau{}_1,~\dots,~\tau{}_\mathid{n}\}~\mathrel{\prec}~\mathkw{tuple}\langle{}\tau{}_1,~\dots,~\tau{}_\mathid{n}\rangle{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="826">
<div class="mathpre infer para-block input-mathpre" data-line="827"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\{\tau{}_1,~\dots,~\tau{}_\mathid{n}\}~\mathrel{\prec}~\mathkw{header}~\{\mathid{f}_1:~\tau_1,~...,~\mathid{f}_\mathid{n}:~\tau_\mathid{n}\}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="832">
<div class="mathpre infer para-block input-mathpre" data-line="833"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\{\tau{}_1,~\dots,~\tau{}_\mathid{n}\}~\mathrel{\prec}~\mathkw{struct}~\{\mathid{f}_1:~\tau_1,~...,~\mathid{f}_\mathid{n}:~\tau_\mathid{n}\}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="838">
<div class="mathpre infer para-block input-mathpre" data-line="839"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\tau{}~\mathrel{\prec}~\mathkw{enum}~\tau{}~\mathid{X}~\{\mathid{m}_1,~...,~\mathid{m}_\mathid{n}\}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="844">
<div class="mathpre infer para-block input-mathpre" data-line="845"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{enum}~\tau{}~\mathid{X}~\{\mathid{m}_1,~...,~\mathid{m}_\mathid{n}\}~\mathrel{\prec}~\tau{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="850">
<div class="mathpre infer para-block input-mathpre" data-line="851"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{newtype}~\tau{}~\mathid{X}~\mathrel{\prec}~\tau{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="856">
<div class="mathpre infer para-block input-mathpre" data-line="857"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\tau{}~\mathrel{\prec}~\mathkw{newtype}~\tau{}~\mathid{X}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="862">
<div class="mathpre infer para-block input-mathpre" data-line="863"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}_0,~\mathid{d}\\
\tau{}_0~\prec \tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\tau{})~\mathid{e}~:~\tau{},~\mathkw{none}}{\textsc{Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-member-expressions" class="h3" data-line="869" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="869"></span><span class="heading-before"><span class="heading-label">3.3.7</span>.&#8194;</span><span data-line="869"></span>Type Member expressions</h4>
<div class="infer" data-line="870">
<div class="mathpre infer para-block input-mathpre" data-line="871"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Delta{}(\mathid{X})~=~\mathkw{enum}~\tau{}~\mathid{X}~\{\mathid{m}_1,\dots,\mathid{m}_\mathid{n}\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{X}.\mathid{m}_\mathid{i}:\mathid{X},\mathkw{none}}{\textsc{Type-Member-Serializable-Enum}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="876">
<div class="mathpre infer para-block input-mathpre" data-line="877"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Delta{}(\mathid{X})~=~\mathkw{enum}~\mathid{X}~\{\mathid{m}_1,\dots,\mathid{m}_\mathid{n}\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{X}.\mathid{m}_\mathid{i}:\mathid{X},\mathkw{none}}{\textsc{Type-Member-Enum}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="882">
<div class="mathpre infer para-block input-mathpre" data-line="883"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Gamma{}(\mathkw{error}.\mathid{name})~=~\mathkw{error}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{error}.\mathid{name}~:~\mathkw{error},~\mathkw{none}}{\textsc{Error-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="888"><span data-line="888"></span>Field and method lookups on expressions are delegated to another
judgment <span data-line="889"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{has\_field}\ \tau{}\ name\ \tau{}_{name}$</span></span><span data-line="889"></span>.
</p>
<div class="infer" data-line="890">
<div class="mathpre infer para-block input-mathpre" data-line="891"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},~\vdash{}~\mathid{e}~:~\tau{},~\mathid{d}\\
\mathkw{has\_field}~\tau{}~\mathid{name}~\tau{}_{\mathid{name}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathid{name}~:~\tau{}_{\mathid{name}},~\mathkw{none}}{\textsc{Expression-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="897">
<div class="mathpre infer para-block input-mathpre" data-line="898"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{f}_\mathid{i}~\tau{}_\mathid{i}}{\textsc{Header-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="903"><span data-line="903"></span>TODO: need to make sure all types in a header union are headers.
</p>
<div class="infer" data-line="905">
<div class="mathpre infer para-block input-mathpre" data-line="906"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{f}_\mathid{i}~\tau{}_\mathid{i}}{\textsc{Header-Union-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="911">
<div class="mathpre infer para-block input-mathpre" data-line="912"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{f}_\mathid{i}~\tau{}_\mathid{i}}{\textsc{Struct-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="917">
<div class="mathpre infer para-block input-mathpre" data-line="918"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{isValid}~(()~\to{}~\mathkw{bool})}{\textsc{Header-IsValid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="923">
<div class="mathpre infer para-block input-mathpre" data-line="924"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{setValid}~(()~\to{}~\mathkw{void})}{\textsc{Header-SetValid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="929">
<div class="mathpre infer para-block input-mathpre" data-line="930"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{setInvalid}~(()~\to{}~\mathkw{void})}{\textsc{Header-SetInvalid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="935">
<div class="mathpre infer para-block input-mathpre" data-line="936"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{isValid}~(()~\to{}~\mathkw{bool})}{\textsc{HeaderUnion-IsValid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="942">
<div class="mathpre infer para-block input-mathpre" data-line="943"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{control}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{apply}~(()~\to{}~\mathkw{void})}{\textsc{Control-Apply-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="948">
<div class="mathpre infer para-block input-mathpre" data-line="949"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{parser}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{apply}~(()~\to{}~\mathkw{void})}{\textsc{Parser-Apply-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="954">
<div class="mathpre infer para-block input-mathpre" data-line="955"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~(\mathkw{table}~\tau{})~\mathkw{apply}~(()~\to{}~\tau{})}{\textsc{Table-Apply-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="960">
<div class="mathpre infer para-block input-mathpre" data-line="961"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{size}~\mathkw{bit}\langle{}32\rangle{}}{\textsc{Array-Size-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="966">
<div class="mathpre infer para-block input-mathpre" data-line="967"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{lastIndex}~\mathkw{bit}\langle{}32\rangle{}}{\textsc{Array-LastIndex-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="972">
<div class="mathpre infer para-block input-mathpre" data-line="973"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{next}~\tau{}}{\textsc{Array-Next-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="978">
<div class="mathpre infer para-block input-mathpre" data-line="979"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{last}~\tau{}}{\textsc{Array-Last-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="984">
<div class="mathpre infer para-block input-mathpre" data-line="985"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{push\_front}~((\mathid{count}:~\mathkw{int})~\to{}~\mathkw{void})}{\textsc{Array-PushFront-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="990">
<div class="mathpre infer para-block input-mathpre" data-line="991"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{pop\_front}~((\mathid{count}:~\mathkw{int})~\to{}~\mathkw{void})}{\textsc{Array-PopFront-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-ternary-expression" class="h3" data-line="997" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="997"></span><span class="heading-before"><span class="heading-label">3.3.8</span>.&#8194;</span><span data-line="997"></span>Type Ternary Expression</h4>
<div class="infer" data-line="999">
<div class="mathpre infer para-block input-mathpre" data-line="1000"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\_\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{},~\_\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_3~:~\tau{},~\_}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3~:~\tau{},~\mathkw{none}}{\textsc{Ternary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-direction-agreement" class="h3" data-line="1007" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1007"></span><span class="heading-before"><span class="heading-label">3.3.9</span>.&#8194;</span><span data-line="1007"></span>Direction agreement</h4>
<p class="p noindent" data-line="1008"><span data-line="1008"></span>Expressions passed as out or inout parameters must be lvalues. This
judgment checks that.
</p>
<div class="judgment" data-line="1011">
<div class="mathpre infer para-block input-mathpre" data-line="1012"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathid{d}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1014">
<div class="mathpre infer para-block input-mathpre" data-line="1015"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathkw{out}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathkw{in}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathkw{inout}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1020">
<div class="mathpre infer para-block input-mathpre" data-line="1021"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{lvalue}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathkw{out}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1025">
<div class="mathpre infer para-block input-mathpre" data-line="1026"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathkw{in}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1030">
<div class="mathpre infer para-block input-mathpre" data-line="1031"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}~\mathkw{goes}~\mathkw{none}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-function-calls" class="h3" data-line="1036" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1036"></span><span class="heading-before"><span class="heading-label">3.3.10</span>.&#8194;</span><span data-line="1036"></span>Type Function Calls</h4>
<div class="infer" data-line="1037">
<div class="mathpre infer para-block input-mathpre" data-line="1038"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{f}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}):\tau{}_{\mathid{ret}}\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\rho}],\Gamma{}~\vdash{}~\overline{\mathid{e}:\tau{},\mathid{d}}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:\tau{}&#39;~\mathkw{goes}~\mathid{d}}\\
\Delta{}[\overline{\mathid{X}=\rho}]~\vdash{}~\tau_{\mathid{ret}}\rightsquigarrow{}\tau_{\mathid{ret}}&#39;}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{f}\langle{}\overline{\rho}\rangle{}(\overline{\mathid{e}}):\tau_{\mathid{ret}}&#39;}{\textsc{Function-Call}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1046">
<div class="mathpre infer para-block input-mathpre" data-line="1047"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{f}:\mathkw{action}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}):\tau{}_{\mathsf{ret}},~\_\\
\mathid{P},\Sigma{},\Delta{}[\overline{\mathid{X}~\to \rho}],\Gamma{}~\vdash \overline{\mathid{e}:\tau{}}\\
\overline{\mathkw{P}_{\mathid{call}}~\mathid{d}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{f}\langle{}\overline{\rho}\rangle{}(\overline{\mathid{e}}):\tau_{\mathsf{ret}},~\mathkw{none}}{\textsc{Action-Call}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-nameless-instantiation" class="h3" data-line="1054" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1054"></span><span class="heading-before"><span class="heading-label">3.3.11</span>.&#8194;</span><span data-line="1054"></span>Type Nameless Instantiation</h4>
<p class="p noindent" data-line="1056"><span data-line="1056"></span>We need a function to resolve overloads.
</p>
<div class="infer" data-line="1057">
<div class="mathpre infer para-block input-mathpre" data-line="1058"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\tau{}_{\mathid{ctor}}~=~\mathkw{constructor}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}}):~\tau{}\\
\mathkw{length}~\overline{\mathid{x}:\tau{}}~=~\mathid{n}\\
\mathid{X}:\tau{}_{\mathid{ctor}}~\in \Gamma{}}{\mathkw{resolve\_overload}~\Gamma{}~\mathid{X}~\mathid{n}~=~\tau{}_{\mathid{ctor}}}{\textsc{Resolve-Constructor-Overload}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1065">
<div class="mathpre infer para-block input-mathpre" data-line="1066"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathkw{length}~\overline{\mathid{e}}~=~\mathid{n}\\
\mathkw{length}~\overline{\rho}~=~\mathkw{length}~\overline{\mathid{X}}\\
\mathkw{resolve\_overload}~\Gamma{}~\mathid{Y}~\mathid{n}~=~\mathkw{constructor}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}}):~\tau{}_{\mathid{ret}}\\
\Sigma{},\Delta{}[\overline{\mathid{X}~\to \rho}],\Gamma{}~\vdash \overline{\mathid{e}:\tau{}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{Y}\langle{}\overline{\rho}\rangle{}(\overline{\mathid{e}})~:~\tau{}_{\mathid{ret}}[\overline{\rho/\mathid{X}}]}{\textsc{Specialized-Type-Instantiation}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1074">
<div class="mathpre infer para-block input-mathpre" data-line="1075"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{X}\langle{}\rangle{}(\overline{\mathid{e}})~:~\tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{X}(\overline{\mathid{e}})~:~\tau{}}{\textsc{Simple-Type-Instantiation}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-type-set-operations" class="h3" data-line="1080" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1080"></span><span class="heading-before"><span class="heading-label">3.3.12</span>.&#8194;</span><span data-line="1080"></span>Type Set Operations</h4>
<p class="p noindent" data-line="1082"><span data-line="1082"></span>TODO: the Masks rule is based off of the spec
and diverges from the type checker<span data-line="1083"></span>&#39;<span data-line="1083"></span>s implementation
</p>
<div class="infer" data-line="1085">
<div class="mathpre infer para-block input-mathpre" data-line="1086"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{e}_2~:~\mathkw{set}\langle{}\mathkw{bit}\langle{}\mathid{w}\rangle{}\rangle{},\mathkw{none}}{\textsc{Masks}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1092">
<div class="mathpre infer para-block input-mathpre" data-line="1093"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau,~\_\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau,~\_\\
\tau =~\mathkw{bit}\langle{}\mathid{w}\rangle{}~\lor \tau =~\mathkw{int}\langle{}\mathid{w}\rangle{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1\mathbin{..}\mathid{e}_2~:~\mathkw{set}\langle{}\tau\rangle{},~\mathkw{none}}{\textsc{Ranges}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-evaluation-environment-typing" class="h2" data-line="1100" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1100"></span><span class="heading-before"><span class="heading-label">3.4</span>.&#8194;</span><span data-line="1100"></span>Evaluation environment typing</h3>
<p class="p noindent" data-line="1101"><span data-line="1101"></span>The <span data-line="1101"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">${\Xi} \vdash E:\Gamma$</span></span><span data-line="1101"></span> judgment constructs a typing context from an
evaluation environment. We may write <span data-line="1102"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi \vdash \xi:\Gamma$</span></span><span data-line="1102"></span> to indicate
<span data-line="1103"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi \vdash E:\Gamma$</span></span><span data-line="1103"></span> when <span data-line="1103"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi = (P,E,\Delta,\upsilon)$</span></span><span data-line="1103"></span>.
</p>
<p class="p indent" data-line="1105"><span data-line="1105"></span>First we need an auxiliary judgment on individual
scopes.
</p>
<div class="judgment" data-line="1107">
<div class="mathpre infer para-block input-mathpre" data-line="1108"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Xi\vdash{}\epsilon:\gamma}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1110">
<div class="mathpre infer para-block input-mathpre" data-line="1111"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Xi\vdash [],[]}{\textsc{Type-Env-Scope-Empty}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1116">
<div class="mathpre infer para-block input-mathpre" data-line="1117"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi(\ell)=\tau{}}{\Xi\vdash \epsilon,\mathid{x}=\ell:\gamma,\mathid{x}:\tau{}}{\textsc{Type-Env-Scope-Binding}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="judgment" data-line="1122">
<div class="mathpre infer para-block input-mathpre" data-line="1123"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Xi\vdash{}\mathid{E}:\Gamma{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1125">
<div class="mathpre infer para-block input-mathpre" data-line="1126"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Xi \vdash []:[]}{\textsc{Type-Env-Empty}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1131">
<div class="mathpre infer para-block input-mathpre" data-line="1132"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash \xi:\Gamma{}\\
\Xi \vdash \epsilon:\gamma}{\Xi \vdash \xi,\epsilon:\Gamma{},\gamma}{\textsc{Type-Env-Binding}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-lvalue-typing" class="h2" data-line="1138" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1138"></span><span class="heading-before"><span class="heading-label">3.5</span>.&#8194;</span><span data-line="1138"></span>LValue typing</h3>
<div class="judgment" data-line="1139">
<div class="mathpre infer para-block input-mathpre" data-line="1140"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Xi \vdash{}~\mathid{lv}:\tau{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1143"><span data-line="1143"></span>TODO:I<span data-line="1143"></span>&#39;<span data-line="1143"></span>m leaving off rules for name lookup because that process is
already described in the expression typing rules and there<span data-line="1144"></span>&#39;<span data-line="1144"></span>s no point
in maintaining two versions of it at present.
</p>
<div class="infer" data-line="1147">
<div class="mathpre infer para-block input-mathpre" data-line="1148"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi(\ell)=\tau{}}{\Xi \vdash{}~\ell:\tau{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1153">
<div class="mathpre infer para-block input-mathpre" data-line="1154"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi(\ell)=\tau{}[\mathid{n}]}{\Xi \vdash{}~\ell[\mathid{m}]:\tau{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1159">
<div class="mathpre infer para-block input-mathpre" data-line="1160"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi(\ell)=\mathkw{bit}\langle{}\mathid{m}\rangle{}}{\Xi \vdash{}~\ell[\mathid{n}_{1}:\mathid{n}_{2}]}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-value-typing" class="h2" data-line="1165" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1165"></span><span class="heading-before"><span class="heading-label">3.6</span>.&#8194;</span><span data-line="1165"></span>Value Typing</h3>
<p class="p noindent" data-line="1166"><span data-line="1166"></span>Values can include references to memory locations, so typechecking them
requires a store typing <span data-line="1167"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi$</span></span><span data-line="1167"></span>.
</p>
<div class="judgment" data-line="1168">
<div class="mathpre infer para-block input-mathpre" data-line="1169"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Xi \vdash{}~\mathid{v}:\tau{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1172"><span data-line="1172"></span>Here are the interesting rules. TODO:remaining rules
</p>
<div class="infer" data-line="1173">
<div class="mathpre infer para-block input-mathpre" data-line="1174"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\xi:\Gamma{}\\
[];\Delta{}[\mathid{X}=\mathid{X}];\Gamma{},\overline{\mathid{x}:\tau{}}~\vdash{}~\mathid{blk}:\mathkw{returns}~\tau_{\mathid{ret}}~\dashv{}~\Gamma{}&#39;}{\Xi \vdash{}~(\mathid{P},\mathid{E},\Delta,\upsilon)\otimes{}\mathkw{function}\langle{}\mathid{X}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}:\mathkw{function}\langle{}\mathid{X}\rangle{}(\overline{\tau{},\mathid{d}}):\tau_{\mathid{ret}}}{\textsc{Type-Value-Function}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1179">
<div class="mathpre infer para-block input-mathpre" data-line="1180"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\xi:\Gamma{}\\
[];\Delta{};\Gamma{},\overline{\mathid{x}:\tau{}}~\vdash{}~\mathid{blk}:\mathkw{returns}~\mathkw{void}~\dashv{}~\Gamma{}&#39;}{\Xi \vdash{}~(\mathid{P},\mathid{E},\Delta,\upsilon)\otimes{}\mathkw{action}(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}:\mathkw{action}(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}}):\mathkw{void}}{\textsc{Type-Value-Action}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1186">
<div class="mathpre infer para-block input-mathpre" data-line="1187"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\mathid{lv}:\tau{}\\
\mathkw{has\_field}~\tau{}~\mathid{name}~\tau{}_{\mathid{name}}}{\Xi \vdash{}~\mathkw{builtin}~\mathid{name}~\mathid{lv}:~\tau{}_{\mathid{name}}}{\textsc{Type-Value-Builtin}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1193">
<div class="mathpre infer para-block input-mathpre" data-line="1194"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\ell:\mathkw{extern}~\mathid{X}~\{\overline{\mathid{method}}\}}{\Xi \vdash{}~(\ell,~\mathid{name}_{\mathid{object}}):\mathkw{extern}~\mathid{X}~\{\overline{\mathid{method}}\}}{\textsc{Type-Value-Extern}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-store-typing" class="h2" data-line="1199" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1199"></span><span class="heading-before"><span class="heading-label">3.7</span>.&#8194;</span><span data-line="1199"></span>Store typing</h3>
<div class="infer" data-line="1200">
<div class="mathpre infer para-block input-mathpre" data-line="1201"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\mathid{v}:\tau{}\\
\Xi(\ell)=\tau{}}{\Xi \vdash{}~\ell=\mathid{v},\sigma.}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1207">
<div class="mathpre infer para-block input-mathpre" data-line="1208"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Xi \vdash{}~[]}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-statement-typing" class="h2" data-line="1213" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1213"></span><span class="heading-before"><span class="heading-label">3.8</span>.&#8194;</span><span data-line="1213"></span>Statement Typing</h3><h4 id="sec-merging-statement-types" class="h3" data-line="1215" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1215"></span><span class="heading-before"><span class="heading-label">3.8.1</span>.&#8194;</span><span data-line="1215"></span>Merging statement types</h4>
<p class="p noindent para-continue" data-line="1217"><span data-line="1217"></span>There is a judgment <span data-line="1217"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta{} \vdash{} \mathkw{resmeet}(res_1,res_2,res)$</span></span><span data-line="1217"></span> defined
as follows.
</p>
<div class="mathpre para-block input-mathpre" data-line="1219"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\inferrule{~}{\mathkw{resmeet}(\mathkw{unit},~\mathkw{unit},~\mathkw{unit})}\\
\\
\inferrule{~}{\mathkw{resmeet}(\mathkw{rejects},~\mathkw{unit},~\mathkw{rejects})}~~~~~\inferrule{~}{\mathkw{resmeet}(\mathkw{unit},~\mathkw{rejects},~\mathkw{rejects})}~~~~~\inferrule{~}{\mathkw{resmeet}(\mathkw{rejects},~\mathkw{rejects},~\mathkw{rejects})}\\
\\
\inferrule{\Delta{}~\vdash{}~\tau{}\equiv{}\tau{}&#39;}{\mathkw{resmeet}(\mathkw{returns}~\tau{},~\mathkw{returns}~\tau{}&#39;,~\mathkw{returns}~\tau{})}~~~~~~~\inferrule{~}{\mathkw{resmeet}(\mathkw{returns}~\tau{},~\mathkw{unit},~\mathkw{returns}~\tau{})}~~~~~~\inferrule{~}{\mathkw{resmeet}(\mathkw{unit},~\mathkw{returns}~\tau{},~\mathkw{returns}~\tau{})}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-statement-typing-judgment" class="h3" data-line="1227" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1227"></span><span class="heading-before"><span class="heading-label">3.8.2</span>.&#8194;</span><span data-line="1227"></span>Statement typing judgment</h4>
<p class="p noindent para-continue" data-line="1228"><span data-line="1228"></span>Statements are typed by a judgment of the form
</p>
<div class="mathpre para-block input-mathpre" data-line="1229"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}:\mathid{res}~\dashv{}~\Gamma{}&#39;.
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="1233"><span data-line="1233"></span>The judgment is defined inductively by the following rules.
</p>
<div class="infer" data-line="1235">
<div class="mathpre infer para-block input-mathpre" data-line="1236"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}}):\mathkw{void}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{e}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}}):\mathkw{unit}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Method-Call}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1241">
<div class="mathpre infer para-block input-mathpre" data-line="1242"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{e}_\mathid{l}~\mathkw{lvalue}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_\mathid{l}:~\tau{}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_\mathid{r}:~\tau{}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{e}_\mathid{l}\coloneqq{}\mathid{e}_\mathid{r}:\mathkw{unit}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Assignment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1249">
<div class="mathpre infer para-block input-mathpre" data-line="1250"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\tau{}().\mathkw{apply}(\overline{\mathid{e}})~:~\tau{}&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\tau{}.\mathkw{apply}(\overline{\mathid{e}}):\mathkw{unit}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Direct-Application}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1255">
<div class="mathpre infer para-block input-mathpre" data-line="1256"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool}\\
\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_1:\mathid{res}_1~\dashv{}~\Gamma{}_1\\
\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_2:\mathid{res}_2~\dashv{}~\Gamma{}_2\\
\Delta{}~\vdash{}~\mathkw{resmeet}~\mathid{res}_1~\mathid{res}_2~\mathid{res}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2:\mathid{res}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-If-Else}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1264"><span data-line="1264"></span>We need another judgment for typing sequences <span data-line="1264"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\overline{s}$</span></span><span data-line="1264"></span> of
statements. (Sorry about the empty sequence notation in the first
rule<span data-line="1266"></span>&#8230;<span data-line="1266"></span>)
</p>
<div class="infer" data-line="1268">
<div class="mathpre infer para-block input-mathpre" data-line="1269"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\overline{~~}~:\mathkw{unit}~\dashv{}~\Gamma{}}{\textsc{Type-Stmts-Empty}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1274">
<div class="mathpre infer para-block input-mathpre" data-line="1275"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~~\vdash{}~\mathid{s}:\mathkw{unit}~\dashv{}~\Gamma{}&#39;\\
\Sigma{},\Delta{},\Gamma{}&#39;,\mathid{ctx}~\vdash{}~\overline{\mathid{s}}:\mathid{res}~\dashv{}~\Gamma{}&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s};\overline{\mathid{s}}:\mathid{res}~\dashv{}~\Gamma{}}{\textsc{Type-Stmts-List}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1281">
<div class="mathpre infer para-block input-mathpre" data-line="1282"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\overline{\mathid{s}}:\mathid{res}~\dashv{}~\Gamma{}&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\{\overline{\mathid{s}}\}:\mathid{res}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Block}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1287">
<div class="mathpre infer para-block input-mathpre" data-line="1288"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{},\mathkw{InParserState}~\vdash{}~\mathkw{exit}:\mathkw{returns}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Exit}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1293">
<div class="mathpre infer para-block input-mathpre" data-line="1294"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{;}:\mathkw{unit}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Empty}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1299">
<div class="mathpre infer para-block input-mathpre" data-line="1300"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}}{\Sigma{},\Delta{},\Gamma{},\mathkw{InFunction}~\tau{}~\vdash{}~\mathkw{return}~\mathid{e}:\mathkw{returns}~\tau{}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Return-Value}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1305">
<div class="mathpre infer para-block input-mathpre" data-line="1306"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{},\mathkw{InFunction}~\mathkw{void}~\vdash{}~\mathkw{return}:\mathkw{returns}~\mathkw{void}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Return-Void}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1311">
<div class="mathpre infer para-block input-mathpre" data-line="1312"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{},\mathkw{InControl}~\vdash{}~\mathkw{return}:\mathkw{returns}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Return-Control}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1317">
<div class="mathpre infer para-block input-mathpre" data-line="1318"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{},\mathkw{InAction}~\vdash{}~\mathkw{return}:\mathkw{returns}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Return-Action}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1323"><span data-line="1323"></span>We define a typing judgment for cases of switch statements which has
the form <span data-line="1324"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{case\_ok}_t case$</span></span><span data-line="1324"></span>.
</p>
<div class="infer" data-line="1325">
<div class="mathpre infer para-block input-mathpre" data-line="1326"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{case}\_\mathid{lbl}:\tau{}\\
\Sigma{},\Delta{},\Gamma{},\mathkw{InControl}~\vdash{}~\mathid{blk}:\mathid{res}~\dashv{}~\Gamma{}&#39;}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{case\_ok}_\tau \mathid{case}\_\mathid{lbl}\text{:}\mathid{blk}}{\textsc{Type-Case-Block}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1332">
<div class="mathpre infer para-block input-mathpre" data-line="1333"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{case}\_\mathid{lbl}:\tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{case\_ok}_\tau \mathid{case}\_\mathid{lbl}\text{:}}{\textsc{Type-Case-Fallthrough}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1338"><span data-line="1338"></span>There isn<span data-line="1338"></span>&#39;<span data-line="1338"></span>t a real reason to track signals in controls, seeing as
controls only return void and there<span data-line="1339"></span>&#39;<span data-line="1339"></span>s no way for an apply block that
typechecks in all other respects to fail to not return a value. Seeing
as switch statements can only appear in controls, this rule just
assigns them the signal <span data-line="1342"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\bot$</span></span><span data-line="1342"></span> to avoid having to track signals in
each case and across fallthrough cases.
</p>
<div class="infer" data-line="1344">
<div class="mathpre infer para-block input-mathpre" data-line="1345"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{enum}~\mathid{X}~\{\overline{\mathid{m}}\}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathkw{case\_ok}_\mathid{X}~\mathid{case}}}{\Sigma{},\Delta{},\Gamma{},\mathkw{InControl}~\vdash{}~\mathkw{switch}~(\mathid{e})~\{\overline{\mathid{case}}\}:\mathid{unit}~\dashv{}~\Gamma{}}{\textsc{Type-Stmt-Switch}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1351"><span data-line="1351"></span>TODO: DeclarationStatements don<span data-line="1351"></span>&#39;<span data-line="1351"></span>t need to exist, see
https://github.com/cornell-netlab/petr4/issues/5
</p>
<div class="infer" data-line="1354">
<div class="mathpre infer para-block input-mathpre" data-line="1355"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{decl}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;.\\
\text{decl is const, instantiation, or var}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{decl}:\mathkw{unit}~\dashv{}~\Gamma{}&#39;}{\textsc{Type-Stmt-Declaration-Statement}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-parser-state-typing" class="h2" data-line="1361" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1361"></span><span class="heading-before"><span class="heading-label">3.9</span>.&#8194;</span><span data-line="1361"></span>Parser state typing</h3>
<p class="p noindent" data-line="1363"><span data-line="1363"></span>Parser states need their own typing judgment to deal with
state-machine control flow. It has the form <span data-line="1364"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma{},\Delta{},\Gamma{},K\vdash{}state$</span></span><span data-line="1364"></span>,
where K is a list of names of states used to check that the parser<span data-line="1365"></span>&#39;<span data-line="1365"></span>s
transitions make sense. It is defined by two rules, which use another
judgement <span data-line="1367"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{state\_expr\_ok}$</span></span><span data-line="1367"></span>.
</p>
<div class="infer" data-line="1369">
<div class="mathpre infer para-block input-mathpre" data-line="1370"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},\mathid{K}~\vdash{}~\mathkw{state\_expr\_ok}~\mathid{state}\_\mathid{expr}}{\Sigma{},\Delta{},\Gamma{},\mathid{K}~\vdash{}~\mathkw{state}~\mathid{x}~\{~;~\mathkw{transition}~\mathid{state}\_\mathid{expr}~\}}{\textsc{Type-State-Transition}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1375">
<div class="mathpre infer para-block input-mathpre" data-line="1376"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{s}_{0}:\mathkw{unit}~\dashv{}~\Gamma{}&#39;\\
\Sigma{},\Delta{},\Gamma{}&#39;~\vdash{}~\{~\overline{\mathid{s}};~\mathkw{transition}~\mathid{state}\_\mathid{expr}~\}}{\Sigma{},\Delta{},\Gamma{},\mathid{K}~\vdash{}~\mathkw{state}~\mathid{x}~\{~\mathid{s}_{0};~\overline{\mathid{s}};~\mathkw{transition}~\mathid{state}\_\mathid{expr}~\}}{\textsc{Type-State-Statement-Unit}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1382">
<div class="mathpre infer para-block input-mathpre" data-line="1383"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{s}_{0}:\mathkw{rejects}~\dashv{}~\Gamma{}&#39;\\
\Sigma{},\Delta{},\Gamma{}&#39;~\vdash{}~\{~\overline{\mathid{s}};~\mathkw{transition}~\mathid{state}\_\mathid{expr}~\}}{\Sigma{},\Delta{},\Gamma{},\mathid{K}~\vdash{}~\mathkw{state}~\mathid{x}~\{~\mathid{s}_{0};~\overline{\mathid{s}};~\mathkw{transition}~\mathid{state}\_\mathid{expr}~\}}{\textsc{Type-State-Statement-Rejects}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1389"><span data-line="1389"></span>The <span data-line="1389"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{state\_expr\_ok}$</span></span><span data-line="1389"></span> judgment is defined by the following rules.
</p>
<div class="infer" data-line="1390">
<div class="mathpre infer para-block input-mathpre" data-line="1391"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{x}\in{}\mathid{K}}{\Gamma{},\mathid{K}~\vdash{}~\mathkw{state\_expr\_ok}~\mathid{x}}{\textsc{State-Expr-OK-Direct}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1396">
<div class="mathpre infer para-block input-mathpre" data-line="1397"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:\tau{}}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathkw{match\_ok}~\tau{}~\mathid{match}}\\
\overline{\mathid{x}\in{}\mathid{K}}}{\Sigma{},\Delta{},\Gamma{},\mathid{K}~\vdash{}~\mathkw{state\_expr\_ok}~\mathkw{select}~(\overline{\mathid{e}})~\{~\overline{\overline{\mathid{match}}:\mathid{x}}~\}}{\textsc{State-Expr-OK-Select}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1404"><span data-line="1404"></span>TODO: Should matches be a separate kind of expression, or should we fold them into one type?
</p>
<div class="infer" data-line="1405">
<div class="mathpre infer para-block input-mathpre" data-line="1406"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{set}~\tau{}_\mathid{m}\\
\tau{}_\mathid{m}~=~\tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{match\_ok}~\tau{}~\mathid{e}}{\textsc{Match-OK-Expr}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1412">
<div class="mathpre infer para-block input-mathpre" data-line="1413"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{match\_ok}~\tau{}~\mathkw{\_}}{\textsc{Match-OK-DontCare}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-parameter-typing" class="h2" data-line="1418" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1418"></span><span class="heading-before"><span class="heading-label">3.10</span>.&#8194;</span><span data-line="1418"></span>Parameter typing</h3>
<div class="judgment" data-line="1419">
<div class="mathpre infer para-block input-mathpre" data-line="1420"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Delta{},\mathid{ctx}~\vdash{}~(\mathid{x}:\tau{},\mathid{d})~\mathkw{param}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1422"><span data-line="1422"></span>TODO based on <span data-line="1422"></span><code class="code code1 language-p4 lang-p4 p4 colorized" style="font-family:monospace;font-size:10pt">validate_param</code><span data-line="1422"></span> in the implementation. Will need a few
aux judgments.
</p><h3 id="sec-table-property-typing" class="h2" data-line="1425" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1425"></span><span class="heading-before"><span class="heading-label">3.11</span>.&#8194;</span><span data-line="1425"></span>Table property typing</h3>
<p class="p noindent" data-line="1426"><span data-line="1426"></span>Table typechecking uses key types <span data-line="1426"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$K::=\{\overline{\tau{}}\}$</span></span><span data-line="1426"></span> and
action contexts <span data-line="1427"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$A::=\{\overline{x(e)}\}$</span></span><span data-line="1427"></span>. The action context supports
membership tests <span data-line="1428"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$x(e)\in{}A$</span></span><span data-line="1428"></span>, which use strict syntactic equality.
</p><h4 id="sec-table-const-entry-typing" class="h3" data-line="1430" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1430"></span><span class="heading-before"><span class="heading-label">3.11.1</span>.&#8194;</span><span data-line="1430"></span>Table const entry typing</h4>
<div id="type-table" class="judgment" data-line="1431">
<div class="mathpre infer para-block input-mathpre" data-line="1432"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Sigma{},\Delta{},\Gamma{};\mathid{K},\mathid{A}~\vdash{}~\overline{\mathid{e}_\mathid{m}}:\mathid{x}_\mathid{a}(\overline{\mathid{e}_\mathid{r}},\overline{\mathid{e}})~\mathkw{entryok}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div id="type-table-entry" class="infer" data-line="1435">
<div class="mathpre infer para-block input-mathpre" data-line="1436"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}_\mathid{m}}:\mathkw{set}\langle{}\mathkw{tuple}\langle{}\tau{}_\mathid{k}\rangle{}\rangle{}\\
\mathid{x}(\overline{\mathid{e}_\mathid{r}})~\in \mathid{A}\\
\Sigma{}~\vdash{}~\mathid{e}\Downarrow_{\mathid{CTK}}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{x}(\overline{\mathid{e}_\mathid{r}},\overline{\mathid{e}}):\mathkw{void}}{\Sigma{},\Delta{},\Gamma{};\mathid{K},\mathid{A}~\vdash{}~\overline{\mathid{e}_\mathid{m}}:\mathid{x}(\overline{\mathid{e}_\mathid{r}},\overline{\mathid{e}})~\mathkw{entryok}}{\textsc{Type-Table-Entry}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-table-property-typing-judgment" class="h3" data-line="1444" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1444"></span><span class="heading-before"><span class="heading-label">3.11.2</span>.&#8194;</span><span data-line="1444"></span>Table property typing judgment</h4>
<div class="judgment" data-line="1445">
<div class="mathpre infer para-block input-mathpre" data-line="1446"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Sigma{},\Delta{},\Gamma{};\mathid{K},\mathid{A}~\vdash{}~\mathid{prop}~\dashv{}~\mathid{K}&#39;,\mathid{A}&#39;}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1449">
<div class="mathpre infer para-block input-mathpre" data-line="1450"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:\tau{}}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{x}:\mathkw{match\_kind}}}{\Sigma{},\Delta{},\Gamma{};\{\},\{\}~\vdash{}~\mathkw{key}=\{\overline{\mathid{e}:\mathid{x}}\}~\dashv{}~\{\overline{\tau{}}\},\{\}}{\textsc{Type-Prop-Keys}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1456">
<div class="mathpre infer para-block input-mathpre" data-line="1457"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{x}_\mathid{a}:\mathkw{action}(\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r},\mathid{d}_0},\overline{\mathid{x}:\tau{}}):\mathkw{void}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:\tau{}_\mathid{r}}}{\Sigma{},\Delta{},\Gamma{};\mathid{K},\{\}~\vdash{}~\mathkw{actions}=\{\overline{\mathid{x}_\mathid{a}(\overline{\mathid{e}})}\}~\dashv{}~\mathid{K},\{\overline{\mathid{x}_\mathid{a}(\overline{\mathid{e}}):\mathkw{action}(\overline{\mathid{x}:\tau{}}):\mathkw{void}}\}}{\textsc{Type-Prop-Actions}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1463">
<div class="mathpre infer para-block input-mathpre" data-line="1464"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{};\mathid{K},\mathid{A}~\vdash{}~\overline{\mathid{entry}}~\mathkw{entryok}}{\Sigma{},\Delta{},\Gamma{};\mathid{K},\mathid{A}~\vdash{}~\mathkw{const}~\mathkw{entries}~=~\{\overline{\mathid{entry}}\}~\dashv{}~\mathid{K},\mathid{A}}{\textsc{Type-Prop-Entries}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1469">
<div class="mathpre infer para-block input-mathpre" data-line="1470"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{x}(\overline{\mathid{e}_\mathid{r}})~\in \mathid{A}\\
\Sigma{}~\vdash{}~\overline{\mathid{e}}\Downarrow_{\mathid{CTK}}}{\Sigma{},\Delta{},\Gamma{},\mathid{K},\mathid{A}~\vdash{}~\mathkw{default\_action}=\mathid{x}(\overline{\mathid{e}_\mathid{r}},\overline{\mathid{e}})~\dashv{}~\mathid{K},\mathid{A}}{\textsc{Type-Prop-Default}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-declaration-typing" class="h2" data-line="1476" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1476"></span><span class="heading-before"><span class="heading-label">3.12</span>.&#8194;</span><span data-line="1476"></span>Declaration Typing</h3>
<div class="judgment" data-line="1477">
<div class="mathpre infer para-block input-mathpre" data-line="1478"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{decl}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1481">
<div class="mathpre infer para-block input-mathpre" data-line="1482"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},\mathkw{InConstant}~\vdash{}~\mathid{e}:\tau{}\\
\Sigma{}~\vdash{}~\mathid{e}\rightsquigarrow{}\mathid{v}\\
\Sigma{},\Delta{}~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{const}~\tau{}~\mathid{x}\coloneqq{}\mathid{e}~\dashv{}~\Sigma{}[\mathid{x}=\mathid{v}],\Delta{},\Gamma{}[\mathid{x}:\tau{}&#39;]}{\textsc{Type-Decl-Const}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1489">
<div class="mathpre infer para-block input-mathpre" data-line="1490"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\tau{}(\overline{\mathid{e}})~:~\tau{}_{\mathid{inst}}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\tau{}~\mathid{x}(\overline{\mathid{e}})~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}_{\mathid{inst}}]}{\textsc{Type-Decl-Instantiation}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1495"><span data-line="1495"></span>The function <span data-line="1495"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{names}(s_1, s_2, \dots)$</span></span><span data-line="1495"></span> takes a list of states
and returns a list of their names. The judgment <span data-line="1496"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{nodups}(K)$</span></span><span data-line="1496"></span>
checks that <span data-line="1497"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$K$</span></span><span data-line="1497"></span> contains no duplicated names.
</p>
<div class="infer" data-line="1498">
<div class="mathpre infer para-block input-mathpre" data-line="1499"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{K}~=~\mathkw{names}(\overline{\mathid{state}}),\mathkw{accept},\mathkw{reject}\\
\mathkw{nodups}(\mathid{K})\\
\mathkw{start}~\in \mathid{K}\\
\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}_\mathid{r}\rightsquigarrow{}\tau{}_\mathid{r}&#39;}\\
\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}\rightsquigarrow{}\tau{}&#39;}\\
\Delta{},\mathkw{constructor}~\mathkw{parser}~\vdash{}~\overline{\mathid{x}:\tau{}&#39;}~\mathkw{param}\\
\Delta{},\mathkw{runtime}~\mathkw{ctx}~\vdash{}~\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;,\mathid{d}}~\mathkw{param}\\
\Sigma{},\Delta{},\Gamma{}[\overline{\mathid{x}:\tau{}}][\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}}],\mathkw{InParserLocals}~\vdash{}~\overline{\mathid{decl}}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;\\
\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;,\mathid{K}~\vdash{}~\overline{\mathid{state}}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{parser}~\mathid{X}(\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r},\mathid{d}})(\overline{\mathid{x}:\tau{}})\{\overline{\mathid{decl}}~\overline{\mathid{state}}\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{X}:\mathkw{constructor}(\overline{\mathid{x}:\tau{}}):\mathkw{parser}(\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}})]}{\textsc{Type-Decl-Parser}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1512">
<div class="mathpre infer para-block input-mathpre" data-line="1513"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}_\mathid{r}\rightsquigarrow{}\tau{}_\mathid{r}&#39;}\\
\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}\rightsquigarrow{}\tau{}&#39;}\\
\Delta{},\mathkw{constructor}~\mathkw{control}~\vdash{}~\overline{\mathid{x}:\tau{}&#39;}~\mathkw{param}\\
\Delta{},\mathkw{runtime}~\mathkw{control}~\vdash{}~\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;,\mathid{d}}~\mathkw{param}\\
\Sigma{},\Delta{},\Gamma{}[\overline{\mathid{x}:\tau{}&#39;}][\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;}]~\vdash{}~\overline{\mathid{decl}}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;\\
\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;,\mathkw{InFunction}~\mathkw{void}~\vdash{}~\mathid{blk}:\mathkw{returns}~\mathkw{void}~\dashv{}~\Gamma{}&#39;&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{control}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{\overline{\mathid{decl}}~\mathkw{apply}~\mathid{blk}\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{X}:\mathkw{constructor}(\overline{\mathid{x}:\tau{}}):\mathkw{control}(\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r},\mathid{d}})]}{\textsc{Type-Decl-Control}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1523">
<div class="mathpre infer para-block input-mathpre" data-line="1524"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\overline{\tau{}\rightsquigarrow{}\tau{}&#39;}\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\tau{}_{\mathid{ret}}\rightsquigarrow{}\tau{}_{\mathid{ret}}&#39;\\
\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{runtime}~[\mathid{ctx}]~\vdash{}~\overline{\mathid{x}:\tau{}&#39;,\mathid{d}}~\mathkw{param}\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}],\Gamma{}[\overline{\mathid{x}:\tau{}&#39;}],\mathkw{InFunction}~\tau{}_{\mathid{ret}}&#39;~\vdash{}~\mathid{blk}:\mathkw{returns}~\tau{}_{\mathid{ret}}&#39;~\dashv{}~\Gamma{}_{\mathid{blk}}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{function}~\tau{}_{\mathid{ret}}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}&#39;}):\tau{}_{\mathid{ret}}&#39;]}{\textsc{Type-Decl-Function}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1532">
<div class="mathpre infer para-block input-mathpre" data-line="1533"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\overline{\tau{}_\mathid{r}&#39;\rightsquigarrow{}\tau{}_\mathid{r}&#39;}\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\overline{\tau{}&#39;\rightsquigarrow{}\tau{}&#39;}\\
\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{runtime}~\mathkw{action}~\vdash{}~\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;,\mathid{d}}~\mathkw{param}\\
\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{runtime}~\mathkw{action}~\vdash{}~\overline{\mathid{x}:\tau{}&#39;,\mathid{d}}~\mathkw{param}\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}],\Gamma{}[\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;}][\overline{\mathid{x}:\tau{}&#39;}],\mathkw{InAction}~\vdash{}~\mathid{blk}:\mathkw{returns}~\mathkw{void}~\dashv{}~\Gamma{}_{\mathid{blk}}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{action}~\mathid{x}~(\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\mathkw{action}(\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;,\mathid{d}_0},~\overline{\mathid{x}:\tau{}&#39;}):\mathkw{void}]}{\textsc{Type-Decl-Action}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1542">
<div class="mathpre infer para-block input-mathpre" data-line="1543"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\overline{\tau{}\rightsquigarrow{}\tau{}&#39;}\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\overline{\tau{}_{\mathid{ret}}\rightsquigarrow{}\tau{}_{\mathid{ret}}&#39;}\\
\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{runtime}~\mathkw{extern}~\vdash{}~\overline{\mathid{x}_\mathid{r}:\tau{}_\mathid{r}&#39;,\mathid{d}}~\mathkw{param}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{extern\ function}~\tau{}_{\mathid{ret}}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}&#39;,\mathid{d}}):\tau{}_{\mathid{ret}}&#39;]}{\textsc{Type-Decl-Extern-Function}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1550">
<div class="mathpre infer para-block input-mathpre" data-line="1551"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\tau{}~\mathid{x}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}&#39;]}{\textsc{Type-Decl-Variable}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1556">
<div class="mathpre infer para-block input-mathpre" data-line="1557"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\tau{}&#39;}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\tau{}~\mathid{x}\coloneqq{}\mathid{e}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}&#39;]}{\textsc{Type-Decl-Variable-Initialized}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1564">
<div class="mathpre infer para-block input-mathpre" data-line="1565"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{},\{\},\{\}~\vdash{}~\overline{\mathid{prop}}~\dashv{}~\mathid{K},\{\overline{\mathid{x}_\mathid{a}(\overline{\mathid{e}})}\}\\
\mathid{X}_{\mathid{acts}},\mathid{X}_{\mathid{ret}}~\text{fresh}\\
\tau{}_{\mathid{acts}}=\mathkw{enum}~\mathid{X}_{\mathid{acts}}~\{\overline{\mathid{x}_\mathid{a}}\}\\
\tau{}_{\mathid{ret}}=\mathkw{struct}~\{\mathkw{hit}:\mathkw{bool};~\mathkw{action\_run}:\tau{}_{\mathid{acts}}\}}{\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{table}~\mathid{x}~\{\overline{\mathid{prop}}\}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}_{\mathid{acts}}=\tau{}_{\mathid{acts}},\mathid{X}_{\mathid{ret}}=\tau{}_{\mathid{ret}}],\Gamma{}[\mathid{x}:\mathkw{table}~\tau{}_{\mathid{ret}}]}{\textsc{Type-Decl-Table}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1573">
<div class="mathpre infer para-block input-mathpre" data-line="1574"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}}\rightsquigarrow{}\overline{\tau{}&#39;}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header}~\mathid{X}~\{\overline{\mathid{x}:\tau{}}\}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{header}~\{\overline{\mathid{x}:\tau{}&#39;}\}],\Gamma{}}{\textsc{Type-Decl-Header}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1579">
<div class="mathpre infer para-block input-mathpre" data-line="1580"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}}\rightsquigarrow{}\overline{\tau{}&#39;}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header\ union}~\mathid{X}~\{\overline{\mathid{x}:\tau{}}~\}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{header}~\mathkw{union}~\{\overline{\mathid{x}:\tau{}&#39;}\}],\Gamma{}}{\textsc{Type-Decl-Header-Union}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1585">
<div class="mathpre infer para-block input-mathpre" data-line="1586"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\overline{\tau{}}\rightsquigarrow{}\overline{\tau{}&#39;}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{struct}~\mathid{X}~\{\overline{\mathid{x}:\tau{}}\}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{struct}~\{\overline{\mathid{x}:\tau{}&#39;}\}],\Gamma{}}{\textsc{Type-Decl-Struct}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1591">
<div class="mathpre infer para-block input-mathpre" data-line="1592"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\overline{\mathkw{error}.\mathid{x}\notin{}\Gamma{}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{error}~\{\overline{\mathid{x}}\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\overline{\mathkw{error}.\mathid{x}:\mathkw{error}}]}{\textsc{Type-Decl-Error}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1597">
<div class="mathpre infer para-block input-mathpre" data-line="1598"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\overline{.\mathid{x}\notin{}\Gamma{}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{match\_kind}~\{\overline{\mathid{x}}\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\overline{.\mathid{x}:\mathkw{match\_kind}}]}{\textsc{Type-Decl-Match-Kind}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1603">
<div class="mathpre infer para-block input-mathpre" data-line="1604"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:\tau{}&#39;}\\
\Sigma{}~\vdash{}~\overline{\mathid{e}}\Downarrow_{\mathid{CTK}}\overline{\mathid{v}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{enum}~\tau{}~\mathid{X}~\{\overline{\mathid{x}=\mathid{e}}\}~\dashv{}~\Sigma{}[\overline{\mathid{X}.\mathid{x}=\mathid{v}}],\Delta{}[\mathid{X}=\mathkw{enum}~\tau{}~\mathid{X}~\{\overline{\mathid{x}}\}],\Gamma{}}{\textsc{Type-Decl-Enum}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1611">
<div class="mathpre infer para-block input-mathpre" data-line="1612"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\mathkw{enum}~\mathid{X}~\{\overline{\mathid{x}}\}\rightsquigarrow{}\tau{}_\mathid{X}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{x}}~\}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\tau{}_\mathid{X}],\Gamma{}}{\textsc{Type-Decl-Serializable-Enum}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1617">
<div class="mathpre infer para-block input-mathpre" data-line="1618"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\forall{}\mathid{ctor}_\mathid{i}=\mathid{X}(\overline{\mathid{x}:\tau{}}).~{\tau{}_{\mathid{ctor}}}_\mathid{i}~=~\mathkw{constructor}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}_\mathid{i}:\tau{}_\mathid{i}})~:~\tau{}_{\mathid{extern}}\\
\tau{}_{\mathid{extern}}~=~\mathkw{extern}~\mathid{X}~\{~\overline{\mathid{method}}~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\overline{\mathid{X}:\tau{}_{\mathid{ctor}}}]}{\textsc{Type-Decl-Extern-Object}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1624">
<div class="mathpre infer para-block input-mathpre" data-line="1625"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{typedef}~\tau{}~\mathid{X}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\tau{}&#39;],\Gamma{}}{\textsc{Type-Decl-TypeDef}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1630">
<div class="mathpre infer para-block input-mathpre" data-line="1631"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{newtype}~\tau{}~\mathid{X}~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{newtype}~\tau{}&#39;~\mathid{X}],\Gamma{}}{\textsc{Type-Decl-TypeDef}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1636">
<div class="mathpre infer para-block input-mathpre" data-line="1637"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{runtime}~\mathkw{control}~\vdash{}~\overline{\mathid{x}:\tau{}&#39;,\mathid{d}}~\mathkw{param}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{control}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{control}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}),\Gamma{}}{\textsc{Type-Decl-Control-Type}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1643">
<div class="mathpre infer para-block input-mathpre" data-line="1644"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{runtime}~\mathkw{parser}~\vdash{}~\overline{\mathid{x}:\tau{}&#39;,\mathid{d}}~\mathkw{param}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{parser}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{parser}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}),\Gamma{}}{\textsc{Type-Decl-Parser-Type}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1650">
<div class="mathpre infer para-block input-mathpre" data-line="1651"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}]~\vdash{}~\tau{}\rightsquigarrow{}\tau{}&#39;\\
\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}],\mathkw{constructor}~\mathkw{package}~\vdash{}~\overline{\mathid{x}:\tau{}&#39;}~\mathkw{param}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{package}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}})~\dashv{}~\Sigma{},\Delta{}[\mathid{X}=\mathkw{package}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}}),\Gamma{}}{\textsc{Type-Decl-Package-Type}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-typing-of-programs" class="h2" data-line="1657" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1657"></span><span class="heading-before"><span class="heading-label">3.13</span>.&#8194;</span><span data-line="1657"></span>Typing of Programs</h3>
<p class="p noindent para-continue" data-line="1658"><span data-line="1658"></span>Programs are checked by a judgment of the form
</p>
<div class="mathpre para-block input-mathpre" data-line="1659"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{P}_{0}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;.
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="1662"><span data-line="1662"></span>Complete programs are checked by giving empty contexts on the left.
</p>
<p class="p indent" data-line="1664"><span data-line="1664"></span>The judgment only needs two rules.
</p>
<div class="infer" data-line="1666">
<div class="mathpre infer para-block input-mathpre" data-line="1667"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~[]~\dashv{}~\Sigma{},\Delta{},\Gamma{}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1672">
<div class="mathpre infer para-block input-mathpre" data-line="1673"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{decl}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;\\
\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;~\vdash{}~\mathid{P}_{0}~\dashv{}~\Sigma{}&#39;&#39;,\Delta{}&#39;&#39;,\Gamma{}&#39;&#39;}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{decl},~\mathid{P}_{0}~\dashv{}~\Sigma{}&#39;&#39;,\Delta{}&#39;&#39;,\Gamma{}&#39;&#39;}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h2 id="sec-dynamic" class="h1" data-line="1679" data-heading-depth="1" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1679"></span><span class="heading-before"><span class="heading-label">4</span>.&#8194;</span><span data-line="1679"></span>Dynamic Semantics</h2><h3 id="sec-evaluation-environment-and-state" class="h2" data-line="1681" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1681"></span><span class="heading-before"><span class="heading-label">4.1</span>.&#8194;</span><span data-line="1681"></span>Evaluation Environment and State</h3>
<p class="p noindent" data-line="1682"><span data-line="1682"></span>All evaluation rules include
</p>
<ol class="ol compact" data-line="1684">
<li class="li ol-li compact-li" data-line="1684"><span data-line="1684"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1684"></span>, an evaluation environment
</li>
<li class="li ol-li compact-li" data-line="1685"><span data-line="1685"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma$</span></span><span data-line="1685"></span>, for maintaining state
</li></ol>

<p class="p noindent" data-line="1687"><span data-line="1687"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi ::= P, E, \Delta, \upsilon$</span></span><span data-line="1687"></span>
</p>
<p class="p indent para-continue" data-line="1689"><span data-line="1689"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$P$</span></span><span data-line="1689"></span> is a declaration context representing the program seen so far mapping type names to declarations.
<span data-line="1690"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$E$</span></span><span data-line="1690"></span> is a value context mapping names to locations <span data-line="1690"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\ell$</span></span><span data-line="1690"></span> in the state <span data-line="1690"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma$</span></span><span data-line="1690"></span>.
<span data-line="1691"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta$</span></span><span data-line="1691"></span> is the same as defined in the typing contexts.
<span data-line="1692"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\upsilon$</span></span><span data-line="1692"></span> is a string namespace used for control plane names.
</p>
<div class="mathpre para-block input-mathpre" data-line="1694"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\rho ::=~\rho,~\mathid{X}=\mathid{decl}~|~[]\\
\\
\mathid{P}~::=~\mathid{P},~\rho{}~|~[]\\
\\
\epsilon ::=~\epsilon,~\mathid{x}=\ell |~[]\\
\\
\mathid{E}~::=~\mathid{E},~\epsilon{}~|~[]\\
\\
\delta ::=~\delta,~\mathid{X}=\tau{}~|~[]\\
\\
\Delta{}~::=~\Delta{},~\delta{}~|~[]
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="1708"><span data-line="1708"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma ::= (packet, (\overline{name,object}))$</span></span><span data-line="1708"></span> where <span data-line="1708"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$object$</span></span><span data-line="1708"></span> is defined by the target.
<span data-line="1709"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$packet$</span></span><span data-line="1709"></span> is used to maintain the state of the packet and <span data-line="1709"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\overline{name,object})$</span></span><span data-line="1709"></span> is for stateful objects maintained by externs.
</p>
<p class="p indent" data-line="1711"><span data-line="1711"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{push} \xi$</span></span><span data-line="1711"></span> pushes an empty first-level scope onto each context in <span data-line="1711"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1711"></span>.
<span data-line="1712"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{pop} \xi$</span></span><span data-line="1712"></span> pops the first-level scope off each context in <span data-line="1712"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1712"></span> if one exists.
<span data-line="1713"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{first\_lvl} \xi$</span></span><span data-line="1713"></span> is the first-level scope of each context in <span data-line="1713"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1713"></span> if one exists.
</p>
<p class="p indent" data-line="1715"><span data-line="1715"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi[z/x]$</span></span><span data-line="1715"></span> is syntactic sugar for <span data-line="1715"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$P[z/x]$</span></span><span data-line="1715"></span>, <span data-line="1715"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$E[z/x]$</span></span><span data-line="1715"></span>, or <span data-line="1715"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta[z/x]$</span></span><span data-line="1715"></span> depending on whether
<span data-line="1716"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$z$</span></span><span data-line="1716"></span> is a declaration, value, or type, respectively. Similarly <span data-line="1716"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi(x) = z$</span></span><span data-line="1716"></span> is syntactic sugar
for <span data-line="1717"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$P(x)$</span></span><span data-line="1717"></span>, <span data-line="1717"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$E(x)$</span></span><span data-line="1717"></span>, or <span data-line="1717"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta(x)$</span></span><span data-line="1717"></span> depending on whether <span data-line="1717"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$z$</span></span><span data-line="1717"></span> is a declaration, location, or type, respectively.
<span data-line="1718"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi[\overline{\ell}/\overline{name}]$</span></span><span data-line="1718"></span> means the bindings <span data-line="1718"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(name_i, \ell_i)$</span></span><span data-line="1718"></span>
are inserted into <span data-line="1719"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1719"></span> in the order they appear in <span data-line="1719"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\overline{name,\ell_i})$</span></span><span data-line="1719"></span>.
</p>
<p class="p indent" data-line="1721"><span data-line="1721"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{set\_namespace} \xi x$</span></span><span data-line="1721"></span> is <span data-line="1721"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1721"></span> with <span data-line="1721"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\upsilon$</span></span><span data-line="1721"></span> set to <span data-line="1721"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$x$</span></span><span data-line="1721"></span> and <span data-line="1721"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{namespace} \xi$</span></span><span data-line="1721"></span> is <span data-line="1721"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\upsilon$</span></span><span data-line="1721"></span>.
Since <span data-line="1722"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\upsilon$</span></span><span data-line="1722"></span> is a string, the string concatenation operator <span data-line="1722"></span>^<span data-line="1722"></span> is used in places.
</p><h3 id="sec-control-flow" class="h2" data-line="1724" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1724"></span><span class="heading-before"><span class="heading-label">4.2</span>.&#8194;</span><span data-line="1724"></span>Control flow</h3>
<p class="p noindent" data-line="1725"><span data-line="1725"></span>Signals are threaded through expression and statement evaluation.
Unless otherwise stated, a signal that is not <span data-line="1726"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{sig\_continue}$</span></span><span data-line="1726"></span> will result in
a no-op that does not change <span data-line="1727"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1727"></span> or <span data-line="1727"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma$</span></span><span data-line="1727"></span> and propagates the signal. In cases
where a value is needed, it will be <span data-line="1728"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{None}$</span></span><span data-line="1728"></span> if the input signal is not <span data-line="1728"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{sig\_continue}$</span></span><span data-line="1728"></span>.
</p><!--
~ Infer
<\xi, \sigma, e> \Downarrow_e <\xi', \sigma', sig', v>
sig = \mathkw{sig\_continue}
----------------------------------------------------------------------------------
<\xi, \sigma, sig, e> \Downarrow_E <\xi', \sigma', sig', v>
~

~ Infer
sig \neq \mathkw{sig\_continue}
----------------------------------------------------------------------------------
<\xi, \sigma, sig, e> \Downarrow_E <\xi, \sigma, sig, @None>
~
-->


<h3 id="sec-evaluation-helper-rules" class="h2" data-line="1745" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1745"></span><span class="heading-before"><span class="heading-label">4.3</span>.&#8194;</span><span data-line="1745"></span>Evaluation Helper Rules</h3><h4 id="sec-memory-allocation-and-dereferencing" class="h3" data-line="1747" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1747"></span><span class="heading-before"><span class="heading-label">4.3.1</span>.&#8194;</span><span data-line="1747"></span>Memory Allocation and Dereferencing</h4>
<p class="p noindent para-continue" data-line="1749"><span data-line="1749"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$ \mathkw{new} \, \xi \, \sigma \, x \, v $</span></span><span data-line="1749"></span> allocates memory for value <span data-line="1749"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$v$</span></span><span data-line="1749"></span> and returns an updated state and environment.
</p>
<div class="mathpre para-block input-mathpre" data-line="1751"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}~=~\xi&#39;,~\sigma&#39;\\
\text{where}\\
\ell \text{ is a fresh location in memory}\\
\sigma&#39;~=~\sigma[\mathid{v}~/~\ell]\\
\xi&#39;~=~\xi[~\ell /~\mathid{x}~]
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="1759"><span data-line="1759"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\sigma \circ \xi)(x)$</span></span><span data-line="1759"></span> finds the value associated with name <span data-line="1759"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$x$</span></span><span data-line="1759"></span>.
</p><h4 id="sec-sequence-evaluation" class="h3" data-line="1761" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1761"></span><span class="heading-before"><span class="heading-label">4.3.2</span>.&#8194;</span><span data-line="1761"></span>Sequence Evaluation</h4>
<p class="p noindent" data-line="1762"><span data-line="1762"></span>Evaluating sequences such as <span data-line="1762"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\overline{e}$</span></span><span data-line="1762"></span> implies the evaluation  is performed
left-to-right and outputs such as <span data-line="1763"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="1763"></span>, <span data-line="1763"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma$</span></span><span data-line="1763"></span>, and <span data-line="1763"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$sig$</span></span><span data-line="1763"></span> are threaded through.
</p><h4 id="sec-numeric-value-evaluation" class="h3" data-line="1765" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1765"></span><span class="heading-before"><span class="heading-label">4.3.3</span>.&#8194;</span><span data-line="1765"></span>Numeric Value Evaluation</h4>
<div class="mathpre para-block input-mathpre" data-line="1766"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{extract\_num}~\mathid{v}~=~\begin{cases}~\mathid{a}~&amp;~\mathid{v}~=~\mathid{a}\\
\mathid{a}~&amp;~\mathid{v}~=~\mathid{a}_\mathid{u}^\mathid{n}\\
\mathid{a}~&amp;~\mathid{v}~=~\mathid{a}_\mathid{s}^\mathid{n}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-bitslice-evaluation" class="h3" data-line="1773" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1773"></span><span class="heading-before"><span class="heading-label">4.3.4</span>.&#8194;</span><span data-line="1773"></span>Bitslice Evaluation</h4>
<p class="p noindent" data-line="1774"><span data-line="1774"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{bitslice} n_1 n_2 n_3$</span></span><span data-line="1774"></span> is the decimal value obtained from interpreting <span data-line="1774"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n_1$</span></span><span data-line="1774"></span> in its binary representation and
converting bits <span data-line="1775"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n_2...n_3$</span></span><span data-line="1775"></span> inclusive to decimal. Bit <span data-line="1775"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n_2$</span></span><span data-line="1775"></span> is more significant than bit <span data-line="1775"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n_3$</span></span><span data-line="1775"></span>.
</p><h4 id="sec-copy-incopy-out" class="h3" data-line="1777" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1777"></span><span class="heading-before"><span class="heading-label">4.3.5</span>.&#8194;</span><span data-line="1777"></span>Copy-In/Copy-Out</h4>
<div class="mathpre para-block input-mathpre" data-line="1778"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{copyin}~\,~\xi_{\mathid{closure}}~\,~\sigma \,~(\mathid{x}:\tau{},\mathid{d})~\,~\mathid{v}~=~\begin{cases}~\xi_{\mathid{closure}},\sigma &amp;~\mathid{d}~=~\mathkw{out}\\
\mathkw{new}~\,~\xi_{\mathid{closure}}~\,~\sigma \,~\mathid{x}~\,~\mathid{v}~&amp;~\mathid{otherwise}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div>
<div class="mathpre para-block input-mathpre" data-line="1784"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{copyout}~\,~\xi_{\mathid{call}}~\,~\xi_{\mathid{closure}}~\,~\sigma \,~(\mathid{x}:\tau{},\mathid{d})~\,~\mathid{e}~=~\begin{cases}~\sigma &amp;~\mathid{d}~=~\mathkw{in}\\
\sigma &amp;~\mathid{d}~=~\mathkw{none}~\land \tau{}~\neq \mathkw{extern}~...\\
\sigma&#39;~&amp;~\mathid{otherwise},~\text{where}~\mathkw{lv\_of\_expr}~\,~\xi_{\mathid{call}}~\,~\sigma \,~\mathid{e}~=~(\_,~\_,~\_,~\mathid{lv}_\mathid{o})~\land \mathkw{assign\_lv}~\,~\xi_{\mathid{call}}~\,~\mathid{lv}_\mathid{o}~\,~(\sigma \circ \xi_{\mathid{closure}})(\mathid{x})~=~(\sigma&#39;,~\_)\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-match-switch-case" class="h3" data-line="1791" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1791"></span><span class="heading-before"><span class="heading-label">4.3.6</span>.&#8194;</span><span data-line="1791"></span>Match Switch Case</h4>
<div class="mathpre para-block input-mathpre" data-line="1792"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{match\_switch\_case}~\mathid{case}_1...\mathid{case}_\mathid{n}~\mathid{name}~=~\begin{cases}~\mathid{None}~&amp;~\forall \mathid{i}~\text{ where }~1~\leq \mathid{i}~\leq \mathid{n},~\mathid{name}~\neq \mathid{case}\_\mathid{lbl}_\mathid{i}~\land \mathid{case}\_\mathid{lbl}_\mathid{i}~\neq \texttt{default}\\
\mathid{None}~&amp;~\mathid{case}_\mathid{i}~=~\mathid{case}\_\mathid{lbl}_\mathid{i}~:\ \land \nexists \mathid{case}\_\mathid{lbl}_\mathid{j}~:~\mathid{blk}_\mathid{j},~\mathid{i}~\lt \mathid{j}\\
\mathid{Some}\ \mathid{blk}_\mathid{i}~&amp;~\mathid{case}_\mathid{i}~=~\mathid{case}\_\mathid{lbl}_\mathid{i}~:~\mathid{blk}_\mathid{i}~\land \mathid{name}~=~\mathid{case}\_\mathid{lbl}_\mathid{i}\\
\mathid{Some}\ \mathid{blk}_\mathid{j}~&amp;~\mathid{case}_\mathid{i}~=~\mathid{case}\_\mathid{lbl}_\mathid{i}~:\ \land \mathid{case}_\mathid{j}~=~\mathid{case}\_\mathid{lbl}_\mathid{j}~:~\mathid{blk}_\mathid{j}~\land \mathid{name}~=~\mathid{case}\_\mathid{lbl}_\mathid{i}~\land \nexists \mathid{case}\_\mathid{lbl}_\mathid{h}~:~\mathid{blk}_\mathid{h},~\mathid{i}~\lt \mathid{h}~\lt \mathid{j}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-match-sets" class="h3" data-line="1800" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1800"></span><span class="heading-before"><span class="heading-label">4.3.7</span>.&#8194;</span><span data-line="1800"></span>Match Sets</h4>
<div class="mathpre para-block input-mathpre" data-line="1801"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{width\_of\_val}~\mathid{v}~=~\begin{cases}~\mathid{w}~&amp;~\mathid{v}~=~\mathid{n}_\mathid{u}^\mathid{w}\\
\mathid{w}~&amp;~\mathid{v}~=~\mathid{n}_\mathid{s}^\mathid{w}\\
\mathid{n}_{1}~&amp;~\mathid{v}~=~(\mathid{n}_{1},~{\mathid{n}_{2}}_\mathid{u}^\mathid{w})\\
0~&amp;~\mathid{v}~=~\mathkw{None}\\
1~&amp;~\mathid{v}~=~\mathid{b}\\
\mathkw{width\_of\_val}~\mathid{v}_{1}~+...+\mathkw{width\_of\_val}~\mathid{v}_\mathid{n}~&amp;~\mathid{v}~=~\mathkw{struct}~\{\overline{(\mathid{name},\mathid{v})}\}\\
\mathkw{width\_of\_val}~\mathid{v}_{1}~+...+\mathkw{width\_of\_val}~\mathid{v}_\mathid{n}~&amp;~\mathid{v}~=~\mathkw{header}~\mathid{b}~\{\overline{(\mathid{name},\mathid{v})}\}\\
\mathkw{width\_of\_val}~\mathid{v}&#39;~&amp;~\mathid{v}~=~(\mathid{name}_{1}.\mathid{name}_{2},~\mathid{v}&#39;)\\
\end{cases}\\
\\
\mathkw{set\_of\_matches}~\xi \sigma \overline{\mathid{match}}~\overline{\mathid{w}}~=~\begin{cases}~(\xi,~\sigma,~\mathkw{universal})~&amp;~\overline{\mathid{match}}~=~(\_)\\
(\xi&#39;,~\sigma&#39;,~\mathkw{singleton}~\mathid{w}~(\mathkw{extract\_num}~\mathid{v}))~&amp;~\overline{\mathid{match}}~=~(\mathid{e})~\land \overline{\mathid{w}}~=~\mathid{w}~\land \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}\\
(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{value\_set}~\overline{\mathid{matches}}~\overline{\mathid{set}}_2)~&amp;~\overline{\mathid{match}}~=~(\mathid{e})~\land \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{value\_set}~\overline{\mathid{matches}}~\overline{\mathid{set}}_1\rangle{}~\land \mathkw{set\_of\_matches}~\xi&#39;~\sigma&#39;~\overline{\mathid{matches}}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\overline{\mathid{set}}_2)\\
(\xi&#39;,~\sigma&#39;,~\mathid{set})~&amp;~\overline{\mathid{match}}~=~(\mathid{e})~\land \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{set}\rangle{}~\land \mathid{set}~\neq \mathkw{value\_set}~...\\
(\xi^\mathid{n},~\sigma^\mathid{n},~\mathkw{product}~(\mathid{set}_1,...,\mathid{set}_\mathid{n}))~&amp;~\overline{\mathid{match}}~=~(\mathid{match}_1,...,\mathid{match}_\mathid{n})~\land \mathkw{set\_of\_matches}~\xi \sigma (\mathid{match}_1)~(\mathid{w}_1)~=~(\xi&#39;,~\sigma&#39;,~\mathid{set}_1)~\land ...~\land \mathkw{set\_of\_matches}~\xi^{\mathid{n}-1}~\sigma^{\mathid{n}-1}~(\mathid{match}_\mathid{n})~(\mathid{w}_\mathid{n})~=~(\xi^\mathid{n},~\sigma^\mathid{n},~\mathid{set}_\mathid{n})\\
\end{cases}\\
\\
\\
\mathkw{match\_set}~\overline{\mathid{v}}~\mathid{set}~=~\begin{cases}~\mathid{true}~&amp;~\mathid{set}~=~\mathkw{universal}\\
\mathid{true}~&amp;~\mathid{set}~=~\mathkw{singleton}~\mathid{w}~\mathid{v}_1~\land \overline{\mathid{v}}~=~(\mathid{v}_2)~\land \mathid{v}_1~=~\mathkw{extract\_num}~\mathid{v}_2\\
\mathid{false}~&amp;~\mathid{set}~=~\mathkw{singleton}~\mathid{w}~\mathid{v}_1~\land \overline{\mathid{v}}~=~(\mathid{v}_2)~\land \mathid{v}_1~\neq \mathkw{extract\_num}~\mathid{v}_2\\
\mathid{true}~&amp;~\mathid{set}~=~\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2~\land \overline{\mathid{v}}~=~(\mathid{v}_3)~\land \mathid{v}_{1}~\&amp;~\mathid{v}_2~=~\mathid{v}_3~\&amp;~\mathid{v}_2\\
\mathid{false}~&amp;~\mathid{set}~=~\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2~\land \overline{\mathid{v}}~=~(\mathid{v}_3)~\land \mathid{v}_1~\&amp;~\mathid{v}_2~\neq \mathid{v}_3~\&amp;~\mathid{v}_2\\
\mathid{true}~&amp;~\mathid{set}~=~\mathid{v}_1~..~\mathid{v}_2~\land \overline{\mathid{v}}~=~(\mathid{v}_3)~\land \mathid{v}_1~\leq \mathid{v}_3~\leq \mathid{v}_2\\
\mathid{false}~&amp;~\mathid{set}~=~\mathid{v}_1~..~\mathid{v}_2~\land \overline{\mathid{v}}~=~(\mathid{v}_3)~\land (\mathid{v}_3~\lt \mathid{v}_1~\lor \mathid{v}_3~\gt \mathid{v}_2)\\
\mathkw{match\_set}~(\mathid{v}_1)~\mathid{set}_1~\&amp;\&amp;~...~\&amp;\&amp;~\mathkw{match\_set}~(\mathid{v}_\mathid{n})~\mathid{set}_\mathid{n}~&amp;~\mathid{set}~=~\mathkw{product}~(\mathid{set}_1,...,\mathid{set}_\mathid{n})~\land \overline{\mathid{v}}~=~(\mathid{v}_1,...,\mathid{v}_\mathid{n})\\
\mathkw{match\_set}~(\mathid{v}_1)~\mathid{set}_1~||~...~||~\mathkw{match\_set}~(\mathid{v}_\mathid{n})~\mathid{set}_\mathid{n}~&amp;~\mathid{set}~=~\mathkw{value\_set}~\overline{\mathid{matches}}~(\mathid{set}_1,...,\mathid{set}_\mathid{n})~\land \overline{\mathid{v}}~=~(\mathid{v}_1,...,\mathid{v}_\mathid{n})\\
\mathkw{match\_set}~\overline{\mathid{v}}~(\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2)~&amp;~\mathid{set}~=~\mathkw{lpm}~\mathid{w}~\mathid{v}_1~\mathid{v}_2\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-parser-state-machine" class="h3" data-line="1833" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1833"></span><span class="heading-before"><span class="heading-label">4.3.8</span>.&#8194;</span><span data-line="1833"></span>Parser State machine</h4>
<div class="mathpre para-block input-mathpre" data-line="1834"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{transition\_select}~\xi \sigma (\mathkw{select}~(\overline{\mathid{e}})~\{\overline{\mathid{matches}:\mathid{x}}\})~=~\begin{cases}~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{None})~&amp;~\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}~\land \mathkw{set\_of\_matches}~\xi&#39;~\sigma&#39;~\overline{\mathid{matches}}~(\mathkw{width\_of\_val}~\overline{\mathid{v}})~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\overline{\mathid{set}})~\land \forall \mathid{set}_\mathid{i}~\in \overline{\mathid{set}},~\mathkw{match\_set}~\overline{\mathid{v}}~\mathid{set}_\mathid{i}~=~\mathid{false}\\
(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{Some}\ \mathid{x}_\mathid{i})~&amp;~\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}~\land \mathkw{set\_of\_matches}~\xi&#39;~\sigma&#39;~\overline{\mathid{matches}}~(\mathkw{width\_of\_val}~\overline{\mathid{v}})~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\overline{\mathid{set}})~\land \mathkw{match\_set}~\overline{\mathid{v}}~\mathid{set}_\mathid{i}~=~\mathid{true}~\land \forall \mathid{j}~\lt \mathid{i},~\mathkw{match\_set}~\overline{\mathid{v}}~\mathid{set}_\mathid{j}~=~\mathid{false}\\
\end{cases}\\
\\
\\
\mathkw{parser\_state\_machine}~\xi \sigma \overline{\mathid{state}}~(\mathkw{state}~\mathid{x}~\{\overline{\mathid{s}};~\mathkw{transition}~\mathid{state}\_\mathid{expr}\})~=~\begin{cases}~(\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue})~&amp;~\mathid{state}\_\mathid{expr}~=~``\mathid{accept}&quot;~\land \langle{}\xi,~\sigma,~\{\mathid{s}_1;~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}\\
(\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject}~``\mathid{NoError}&quot;)~&amp;~\mathid{state}\_\mathid{expr}~=~``\mathid{reject}&quot;~\land \langle{}\xi,~\sigma,~\{\mathid{s}_{1};~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}\\
\mathkw{parser\_state\_machine}~\xi&#39;~\sigma&#39;~\overline{\mathid{state}}~(\mathkw{state}~\mathid{x}_{\mathid{next}}~\{...\})~&amp;~\mathkw{state}~\mathid{x}_{\mathid{next}}~\{...\}~\in \overline{\mathid{state}}~\land \mathid{state}\_\mathid{expr}~=~\mathid{x}_{\mathid{next}}~\land \mathid{x}_{\mathid{next}}~\neq ``\mathid{accept}&quot;~\land \mathid{x}_{\mathid{next}}~\neq ``\mathid{reject}&quot;~\land \langle{}\xi,~\sigma,~\{\mathid{s}_1;~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}\\
\mathkw{parser\_state\_machine}~\xi&#39;&#39;~\sigma&#39;&#39;~\overline{\mathid{state}}~(\mathkw{state}~\mathid{x}~\{\overline{\mathid{s}};~\mathkw{transition}~\mathid{x}_{\mathid{next}}\})~&amp;~\mathid{state}\_\mathid{expr}~=~\mathkw{select}~(\overline{\mathid{e}})~\{\overline{\mathid{matches}:\mathid{x}}\}~\land \langle{}\xi,~\sigma,~\{\mathid{s}_1;~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}~\land \mathkw{transition\_select}~\xi&#39;~\sigma&#39;~\mathid{state}\_\mathid{expr}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{Some}\ \mathid{x}_{\mathid{next}})\\
(\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject}~``\mathid{NoMatch}&quot;)~&amp;~\mathid{state}\_\mathid{expr}~=~\mathkw{select}~(\overline{\mathid{e}})~\{\overline{\mathid{matches}:\mathid{x}}\}~\land \langle{}\xi,~\sigma,~\{\mathid{s}_1;~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}~\land \mathkw{transition\_select}~\xi&#39;~\sigma&#39;~\mathid{state}\_\mathid{expr}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{None})\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-default-action" class="h3" data-line="1848" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1848"></span><span class="heading-before"><span class="heading-label">4.3.9</span>.&#8194;</span><span data-line="1848"></span>Default Action</h4>
<div class="mathpre para-block input-mathpre" data-line="1849"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{default}~\overline{\mathid{prop}}~=~\begin{cases}~\mathid{x}(\overline{\mathid{e}})~&amp;~\mathkw{default\_action}~=~\mathid{x}~\in \overline{\mathid{prop}}\\
\mathkw{NoAction}()~&amp;~\mathkw{default\_action}~=~\mathid{x}~\not\in \overline{\mathid{prop}}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-lpm-entries" class="h3" data-line="1855" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1855"></span><span class="heading-before"><span class="heading-label">4.3.10</span>.&#8194;</span><span data-line="1855"></span>LPM Entries</h4>
<p class="p noindent" data-line="1856"><span data-line="1856"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{sort\_lpm}\ \overline{set}\ n$</span></span><span data-line="1856"></span> is <span data-line="1856"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\overline{set}$</span></span><span data-line="1856"></span> with elements up
until the first occurrence of <span data-line="1857"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{universal}$</span></span><span data-line="1857"></span>, if one exists, sorted in descending order by <span data-line="1857"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$w$</span></span><span data-line="1857"></span>.
Elements can be of the form <span data-line="1858"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{universal}$</span></span><span data-line="1858"></span>, <span data-line="1858"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{lpm}\ w\ v_1\ v_2$</span></span><span data-line="1858"></span>, or
<span data-line="1859"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{product}\ \overline{set}&#39;$</span></span><span data-line="1859"></span>. If an element <span data-line="1859"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$set_i = \mathkw{product}\ \overline{set}&#39;$</span></span><span data-line="1859"></span> then it
is replaced with <span data-line="1860"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$set&#39;_n$</span></span><span data-line="1860"></span> where <span data-line="1860"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$set&#39;_n = \mathkw{lpm}\ w\ v_1\ v_2$</span></span><span data-line="1860"></span> or <span data-line="1860"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$set&#39;_n = \mathkw{universal}$</span></span><span data-line="1860"></span>.
</p>
<p class="p indent para-continue" data-line="1862"><span data-line="1862"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{bits}\ n$</span></span><span data-line="1862"></span> is the number of bits not masked by <span data-line="1862"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n$</span></span><span data-line="1862"></span>.
</p>
<div class="mathpre para-block input-mathpre" data-line="1864"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{lpm\_set}~\mathid{set}~=~\begin{cases}~\mathkw{universal}~&amp;~\mathid{set}~=~\mathkw{universal}\\
\mathkw{lpm}~\mathid{w}~\mathid{v}_1~\mathid{v}_2~&amp;~\mathid{set}~=~\mathkw{lpm}~\mathid{w}~\mathid{v}_1~\mathid{v}_2\\
\mathkw{lpm}~\mathid{w}~\mathid{v}_\mathid{u}^\mathid{w}~(\texttt{\textasciitilde}~\mathid{v})_\mathid{u}^\mathid{w}~&amp;~\mathid{set}~=~\mathkw{singleton}~\mathid{w}~\mathid{v}\\
\mathkw{lpm}~(\mathkw{bits}~(\mathkw{extract\_num}~\mathid{v}_2))~\mathid{v}_1~\mathid{v}_2~&amp;~\mathid{set}~=~\mathid{v}_{1}~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2\\
\mathkw{product}~(\mathkw{lpm\_set}~\overline{\mathid{set}})~&amp;~\mathid{set}~=~\mathkw{product}~\overline{\mathid{set}}\\
\end{cases}\\
\\
\mathkw{lpm\_entries}~\overline{\mathid{set}}~\overline{\mathid{x}}~\overline{\mathid{v}}~=~\begin{cases}~(\mathkw{sort\_lpm}~(\mathkw{lpm\_set}~\overline{\mathid{set}})~\mathid{n},~\overline{\mathid{v}})~&amp;~\overline{\mathid{x}}~=~(\mathkw{lpm})\\
(\mathkw{sort\_lpm}~(\mathkw{lpm\_set}~\overline{\mathid{set}}&#39;)~\mathid{i},~(\mathid{v}_\mathid{i}))~&amp;~\overline{\mathid{x}}~=~(...,\mathid{x}_\mathid{i}~=~\mathkw{lpm},...)~\land \forall \mathid{set}~\in \overline{\mathid{set}}~\text{ where }~\mathkw{match\_set}~\overline{\mathid{v}}~\mathid{set}~=~\mathid{true},~\mathid{set}~\in \overline{\mathid{set}}&#39;\\
(\overline{\mathid{set}},~\overline{\mathid{v}})~&amp;~\mathkw{lpm}~\not\in \overline{\mathid{x}}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-initial-value-of-type" class="h3" data-line="1878" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1878"></span><span class="heading-before"><span class="heading-label">4.3.11</span>.&#8194;</span><span data-line="1878"></span>Initial Value of Type</h4>
<div class="mathpre para-block input-mathpre" data-line="1879"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{init\_val}~\xi \tau{}_1~=~\begin{cases}~\mathid{false}~&amp;~\tau{}_1~=~\mathkw{bool}\\
``&quot;~&amp;~\tau{}_1~=~\mathkw{string}\\
0~&amp;~\tau{}_1~=~\mathkw{int}\\
0^\mathid{w}_\mathid{u}~&amp;~\tau{}_1~=~\mathkw{bit}\langle{}\mathid{w}\rangle{}\\
0^\mathid{w}_\mathid{s}~&amp;~\tau{}_1~=~\mathkw{int}\langle{}\mathid{w}\rangle{}\\
(\mathid{w},~0^0_\mathid{u})~&amp;~\tau{}_1~=~\mathkw{varbit}\langle{}\mathid{w}\rangle{}\\
((\mathkw{init\_val}~\xi \tau{})^\mathid{a},~\mathid{a},~0)~&amp;~\tau{}_1~=~\tau{}_2[\mathid{a}]\\
(\mathkw{init\_val}~\xi \overline{\tau{}})~&amp;~\tau{}_1~=~\mathkw{tuple}\langle{}\overline{\tau{}}\rangle{}\\
(\mathkw{init\_val}~\xi \overline{\tau{}})~&amp;~\tau{}_1~=~\{~\overline{\tau{}}~\}\\
\{\overline{\mathid{f}=\mathkw{init\_val}~\xi \tau{}}\}~&amp;~\tau{}_1~=~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mathkw{universal}~&amp;~\tau{}_1~=~\mathkw{set}\langle{}\tau{}\rangle{}\\
\mathkw{error}.\mathkw{NoError}~&amp;~\tau{}_1~=~\mathkw{error}\\
\mathkw{matchkind}~\mathkw{exact}~&amp;~\tau{}_1~=~\mathkw{match\_kind}\\
\mathkw{init\_val}~\xi (\xi(\mathid{X}))~&amp;~\tau{}_1~=~\mathid{X}\\
\mathkw{init\_val}~\xi (\xi(.\mathid{X}))~&amp;~\tau{}_1~=~.\mathid{X}\\
\mathkw{init\_val}~\xi \tau{}_2~&amp;~\tau{}_1~=~\mathkw{newtype}~\tau{}_2~\mathid{X}\\
\mathkw{None}~&amp;~\tau{}_1~=~\mathkw{void}\\
\mathkw{header}~\mathid{false}~\{~\overline{\mathid{f}:\mathkw{init\_val}~\xi \tau{}}~\}~&amp;~\tau{}_1~=~\mathkw{header}~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mathkw{header\ union}~\{~\overline{\mathid{f}:\mathkw{init\_val}~\xi \tau{}}~\}~&amp;~\tau{}_1~=~\mathkw{header\ union}~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mathkw{struct}~\{~\overline{\mathid{f}:\mathkw{init\_val}~\xi \tau{}}~\}~&amp;~\tau{}_1~=~\mathkw{struct}~\{~\overline{\mathid{f}:\tau{}}~\}\\
\mathid{X}.\mathid{x}_1~&amp;~\tau{}_1~=~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{x}}~\}\\
(\mathid{X}.\mathid{x}_1,~\mathkw{init\_val}~\xi \tau{}_2)&amp;~\tau{}_1~=~\mathkw{enum}~\tau{}_2~\mathid{X}~\{~\overline{\mathid{x}=\mathid{v}}~\}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="1904"><span data-line="1904"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\mathkw{init\_val} \xi \tau{})^n$</span></span><span data-line="1904"></span> is short for <span data-line="1904"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$n$</span></span><span data-line="1904"></span> occurrences of <span data-line="1904"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{init\_val} \xi t$</span></span><span data-line="1904"></span>.
</p><h4 id="sec-name-of-type" class="h3" data-line="1906" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1906"></span><span class="heading-before"><span class="heading-label">4.3.12</span>.&#8194;</span><span data-line="1906"></span>Name of Type</h4>
<div class="mathpre para-block input-mathpre" data-line="1907"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{nametype}~\tau{}_1~=~\begin{cases}~\mathid{X}~&amp;~\tau{}_1~=~\mathid{X}\\
\mathid{X}~&amp;~\tau{}_1~=~\mathkw{newtype}~\tau{}_2~\mathid{X}\\
\mathid{X}~&amp;~\tau{}_1~=~\mathkw{enum}~\mathid{X}~\{\overline{\mathid{x}}\}\\
\mathkw{nametype}~\tau{}_2~&amp;~\tau{}_1~=~\tau{}_2\langle{}\overline{\tau{}}\rangle{}\\
\end{cases}
\end{mdmathpre}%mdk
\]</span></span></div><h3 id="sec-lvalue-operations" class="h2" data-line="1915" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1915"></span><span class="heading-before"><span class="heading-label">4.4</span>.&#8194;</span><span data-line="1915"></span>LValue operations</h3>
<div class="judgment" data-line="1916">
<div class="mathpre infer para-block input-mathpre" data-line="1917"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\langle{}\sigma,\mathid{lv}\rangle{}\Downarrow_{\mathid{read}}\mathid{v}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="judgment" data-line="1919">
<div class="mathpre infer para-block input-mathpre" data-line="1920"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\langle{}\sigma,\mathid{lv},\mathid{v}\rangle{}\Downarrow_{\mathid{write}}\sigma&#39;}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="1922"><span data-line="1922"></span>TODO:rules. These judgments write or read (evaluate to a value) lvalues.
</p>
<p class="p indent" data-line="1924"><span data-line="1924"></span>This judgment turns expressions into lvalues.
</p>
<div class="judgment" data-line="1925">
<div class="mathpre infer para-block input-mathpre" data-line="1926"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\boxed{\langle{}\xi,\sigma,\mathid{e}\rangle{}\Downarrow_{\mathid{l}}\langle{}\xi,\sigma,\mathid{lsig}\rangle{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1928">
<div class="mathpre infer para-block input-mathpre" data-line="1929"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathid{x}\in{}\mathkw{dom}(\xi)}{\langle{}\xi,\sigma,\mathid{x}\rangle{}\Downarrow_{\mathid{l}}\langle{}\xi,\sigma,\mathkw{go}~\xi(\mathid{x})\rangle{}}{\textsc{Eval-LValue-Var}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1933">
<div class="mathpre infer para-block input-mathpre" data-line="1934"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{.\mathid{x}\in{}\mathkw{dom}(\xi)}{\langle{}\xi,\sigma,.\mathid{x}\rangle{}\Downarrow_\mathid{l}\langle{}\xi,\sigma,\mathkw{go}~\xi(.\mathid{x})\rangle{}}{\textsc{Eval-LValue-Var-Top}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1938">
<div class="mathpre infer para-block input-mathpre" data-line="1939"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}\rangle{}\Downarrow_\mathid{l}\langle{}\xi&#39;,\sigma&#39;,\mathkw{go}~\mathid{lv}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}.\mathid{x}\rangle{}\Downarrow_\mathid{l}\langle{}\xi&#39;,\sigma&#39;,\mathkw{go}~\mathid{lv}.\mathid{x}\rangle{}}{\textsc{Eval-LValue-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1943">
<div class="mathpre infer para-block input-mathpre" data-line="1944"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}\rangle{}\Downarrow_\mathid{l}\langle{}\xi&#39;,\sigma&#39;,\mathkw{stop}~\mathid{sig}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}.\mathid{x}\rangle{}\Downarrow_\mathid{l}\langle{}\xi&#39;,\sigma&#39;,\mathkw{stop}~\mathid{sig}\rangle{}}{\textsc{Eval-LValue-Field-Fail1}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1948">
<div class="mathpre infer para-block input-mathpre" data-line="1949"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{go}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathid{e}_2\rangle{}\Downarrow_\mathid{e}\langle{}\xi_2,\sigma_2,\mathkw{go}~\mathid{n}\rangle{}\\
\langle{}\xi_2,\sigma_2,\mathid{e}_3\rangle{}\Downarrow_\mathid{e}\langle{}\xi_3,\sigma_3,\mathkw{go}~\mathid{m}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2:\mathid{e}_3]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_3,\sigma_3,\mathkw{go}~\mathid{lv}[\mathid{n}:\mathid{m}]\rangle{}}{\textsc{Eval-LValue-Slice}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1955">
<div class="mathpre infer para-block input-mathpre" data-line="1956"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{stop}~\mathid{sig}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2:\mathid{e}_3]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{stop}~\mathid{sig}\rangle{}}{\textsc{Eval-LValue-Slice-Fail1}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1960">
<div class="mathpre infer para-block input-mathpre" data-line="1961"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{go}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathid{e}_2\rangle{}\Downarrow_\mathid{e}\langle{}\xi_2,\sigma_2,\mathkw{stop}~\mathid{sig}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2:\mathid{e}_3]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_2,\sigma_2,\mathkw{stop}~\mathid{sig}\rangle{}}{\textsc{Eval-LValue-Slice-Fail2}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1966">
<div class="mathpre infer para-block input-mathpre" data-line="1967"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{go}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathid{e}_2\rangle{}\Downarrow_\mathid{e}\langle{}\xi_2,\sigma_2,\mathkw{go}~\mathid{n}\rangle{}\\
\langle{}\xi_2,\sigma_2,\mathid{e}_3\rangle{}\Downarrow_\mathid{e}\langle{}\xi_3,\sigma_3,\mathkw{stop}~\mathid{sig}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2:\mathid{e}_3]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_3,\sigma_3,\mathkw{stop}~\mathid{sig}\rangle{}}{\textsc{Eval-LValue-Slice-Fail3}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1973">
<div class="mathpre infer para-block input-mathpre" data-line="1974"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{go}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathid{e}_2\rangle{}\Downarrow_\mathid{e}\langle{}\xi_2,\sigma_2,\mathkw{go}~\mathid{n}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_2,\sigma_2,\mathkw{go}~\mathid{lv}[\mathid{n}]\rangle{}}{\textsc{Eval-LValue-Index}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1979">
<div class="mathpre infer para-block input-mathpre" data-line="1980"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{stop}~\mathid{sig}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{stop}~\mathid{sig}\rangle{}}{\textsc{Eval-LValue-Index-Fail1}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="1984">
<div class="mathpre infer para-block input-mathpre" data-line="1985"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_1\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathid{e}_2\rangle{}\Downarrow_\mathid{e}\langle{}\xi_2,\sigma_2,\mathkw{stop}~\mathid{sig}\rangle{}}{\langle{}\xi,\sigma,\mathid{e}_1[\mathid{e}_2]\rangle{}\Downarrow_\mathid{l}\langle{}\xi_2,\sigma_2,\mathkw{stop}~\mathid{sig}\rangle{}}{\textsc{Eval-LValue-Index-Fail2}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-expression-evaluation" class="h2" data-line="1991" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1991"></span><span class="heading-before"><span class="heading-label">4.5</span>.&#8194;</span><span data-line="1991"></span>Expression Evaluation</h3>
<p class="p noindent" data-line="1993"><span data-line="1993"></span>Expressions are evaluated according to the following big-step relation:
</p>
<div class="center align-center" data-line="1994" style="text-align:center">
<p class="p noindent" data-line="1995"><span data-line="1995"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle \xi, \sigma, e \rangle \Downarrow_e \langle \xi&#39;, \sigma&#39;, sig, v \rangle$</span></span></p></div><h4 id="sec-evaluation-of-constants" class="h3" data-line="1998" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="1998"></span><span class="heading-before"><span class="heading-label">4.5.1</span>.&#8194;</span><span data-line="1998"></span>Evaluation of Constants</h4>
<div class="infer" data-line="2000">
<div class="mathpre infer para-block input-mathpre" data-line="2001"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathid{true}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{true}\rangle{}}{\textsc{Bool-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2006">
<div class="mathpre infer para-block input-mathpre" data-line="2007"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathid{false}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{false}\rangle{}}{\textsc{Bool-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2012">
<div class="mathpre infer para-block input-mathpre" data-line="2013"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathid{a}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{a}\rangle{}}{\textsc{Int-Constant}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2018">
<div class="mathpre infer para-block input-mathpre" data-line="2019"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathid{nwa}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{a}_\mathid{u}^\mathid{n}\rangle{}}{\textsc{Unsigned-Int-Constant}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2024">
<div class="mathpre infer para-block input-mathpre" data-line="2025"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathid{nsa}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{a}_\mathid{s}^\mathid{n}\rangle{}}{\textsc{Signed-Int-Constant}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2030">
<div class="mathpre infer para-block input-mathpre" data-line="2031"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathid{u}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{u}\rangle{}}{\textsc{String}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-evaluation-of-variables" class="h3" data-line="2036" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2036"></span><span class="heading-before"><span class="heading-label">4.5.2</span>.&#8194;</span><span data-line="2036"></span>Evaluation of Variables</h4>
<div class="infer" data-line="2038">
<div class="mathpre infer para-block input-mathpre" data-line="2039"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{x}\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{ok}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathkw{ok}~\mathid{lv}\rangle{}\Downarrow_{\mathid{read}}\langle{}\xi_2,\sigma_2,\mathkw{ok}~\mathid{v}\rangle{}\\
\mathid{x}\neq{}\mathkw{verify}}{\langle{}\xi,\sigma,\mathid{x}\rangle{}\Downarrow_\mathid{e}\langle{}\xi,\sigma,\mathkw{ok}~\mathid{v}\rangle{}}{\textsc{Var}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2046">
<div class="mathpre infer para-block input-mathpre" data-line="2047"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{verify}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathkw{extern}~\mathkw{verify}~\mathkw{None}\rangle{}}{\textsc{Var-Verify}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2052">
<div class="mathpre infer para-block input-mathpre" data-line="2053"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{x}\rangle{}\Downarrow_\mathid{l}\langle{}\xi_1,\sigma_1,\mathkw{ok}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,\sigma_1,\mathkw{ok}~\mathid{lv}\rangle{}\Downarrow_{\mathid{read}}\langle{}\xi_2,\sigma_2,\mathkw{ok}~\mathid{v}\rangle{}\\
\mathid{x}\neq{}\mathkw{verify}}{\langle{}\xi,\sigma,\mathid{x}\rangle{}\Downarrow_\mathid{e}\langle{}\xi,\sigma,\mathkw{ok}~\mathid{v}\rangle{}}{\textsc{Var-Top}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-evaluation-of-accessess" class="h3" data-line="2060" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2060"></span><span class="heading-before"><span class="heading-label">4.5.3</span>.&#8194;</span><span data-line="2060"></span>Evaluation of Accessess</h4>
<div class="infer" data-line="2062">
<div class="mathpre infer para-block input-mathpre" data-line="2063"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}\Downarrow_\mathid{e}\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\dots,\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}},\dots,\mathid{n}_{\mathid{size}},\mathid{n}_{\mathid{next}})\rangle{}\\
\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_2\rangle{}\Downarrow_\mathid{e}\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}_1[\mathid{e}_2]\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}}\rangle{}}{\textsc{Array-Access}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2069">
<div class="mathpre infer para-block input-mathpre" data-line="2070"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}[\mathid{n}_{1}:\mathid{n}_{2}]\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\mathkw{bitslice}~(\mathkw{extract\_num}~\mathid{v}))_\mathid{u}^{(\mathid{n}_{1}-\mathid{n}_{2}+1)}\rangle{}}{\textsc{Bitslice}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2075">
<div class="mathpre infer para-block input-mathpre" data-line="2076"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\overline{\mathid{v}}\rangle{}}{\langle{}\xi,~\sigma,~\{\overline{\mathid{e}}\}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~(\overline{\mathid{v}})\rangle{}}{\textsc{List-Expression}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2081">
<div class="mathpre infer para-block input-mathpre" data-line="2082"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\overline{\mathid{v}}\rangle{}}{\langle{}\xi,~\sigma,~\{~\overline{\mathid{name}=\mathid{e}}~\}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\{~\overline{\mathid{name}=\mathid{v}}~\}\rangle{}}{\textsc{Record}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-unary-operation-evaluation" class="h3" data-line="2087" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2087"></span><span class="heading-before"><span class="heading-label">4.5.4</span>.&#8194;</span><span data-line="2087"></span>Unary Operation Evaluation</h4>
<div class="infer" data-line="2089">
<div class="mathpre infer para-block input-mathpre" data-line="2090"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}\\
\diamond \in \{~!,~\texttt{\textasciitilde},~-~\}}{\langle{}\xi,~\sigma,~\diamond \mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\diamond \mathid{v}\rangle{}}{\textsc{Unary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-binary-operation-evaluation" class="h3" data-line="2096" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2096"></span><span class="heading-before"><span class="heading-label">4.5.5</span>.&#8194;</span><span data-line="2096"></span>Binary Operation Evaluation</h4>
<div class="infer" data-line="2098">
<div class="mathpre infer para-block input-mathpre" data-line="2099"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}\\
\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}\\
\diamond \in \{~+,~|+|,~-,~|-|,~*,~/,~\%,~\ll,~\gg,~\lt,~\gt,~\leq,~\geq,~==,~!=,~\&amp;,~\hat{},~|,~++,~\&amp;\&amp;,~||~\}}{\langle{}\xi,~\sigma,~\mathid{e}_1~\diamond \mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_1~\diamond \mathid{v}_2\rangle{}}{\textsc{Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-evaluation-of-casts" class="h3" data-line="2106" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2106"></span><span class="heading-before"><span class="heading-label">4.5.6</span>.&#8194;</span><span data-line="2106"></span>Evaluation of Casts</h4>
<div class="infer" data-line="2107">
<div class="mathpre infer para-block input-mathpre" data-line="2108"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~1_\mathid{u}^1\rangle{}}{\langle{}\xi,~\sigma,~(\mathkw{bool})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}}{\textsc{Bool-Cast-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2113">
<div class="mathpre infer para-block input-mathpre" data-line="2114"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{n}_\mathid{u}^1\rangle{}\\
\mathid{n}~\neq 1}{\langle{}\xi,~\sigma,~(\mathkw{bool})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}}{\textsc{Bool-Cast-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="2120"><span data-line="2120"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{of2s}(a)$</span></span><span data-line="2120"></span> is the result of converting <span data-line="2120"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$a$</span></span><span data-line="2120"></span> from two<span data-line="2120"></span>&#39;<span data-line="2120"></span>s complement while <span data-line="2120"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{to2s}(a)$</span></span><span data-line="2120"></span> is the result of converting <span data-line="2120"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$a$</span></span><span data-line="2120"></span> to two<span data-line="2120"></span>&#39;<span data-line="2120"></span>s complement.
</p>
<div class="infer" data-line="2122">
<div class="mathpre infer para-block input-mathpre" data-line="2123"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~(\mathkw{bit}\langle{}\mathid{w}\rangle{})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~{\mathkw{of2s}(\mathkw{extract\_num}~\mathid{v})}_\mathid{u}^{\mathid{w}}\rangle{}}{\textsc{Bit-Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2128">
<div class="mathpre infer para-block input-mathpre" data-line="2129"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~(\mathkw{int}\langle{}\mathid{w}\rangle{})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~{\mathkw{to2s}(\mathkw{extract\_num}~\mathid{v})}_\mathid{s}^{\mathid{w}}\rangle{}}{\textsc{Int-Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2134">
<div class="mathpre infer para-block input-mathpre" data-line="2135"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~(\xi(\mathid{X}))~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~(\mathid{X})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\textsc{TypeName-Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2140">
<div class="mathpre infer para-block input-mathpre" data-line="2141"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~(\tau{})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~(\mathkw{newtype}~\tau{}~\mathid{X})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\textsc{NewType-Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-member-expression-evaluation" class="h3" data-line="2146" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2146"></span><span class="heading-before"><span class="heading-label">4.5.7</span>.&#8194;</span><span data-line="2146"></span>Member Expression Evaluation</h4>
<div class="infer" data-line="2148">
<div class="mathpre infer para-block input-mathpre" data-line="2149"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathid{X}_1)~=~\mathkw{enum}~\mathid{X}_2~\{\dots,\mathid{name},\dots\}}{\langle{}\xi,~\sigma,~\mathid{X}_1.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{X}_2.\mathid{name}\rangle{}}{\textsc{Type-Member-Enum}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2154">
<div class="mathpre infer para-block input-mathpre" data-line="2155"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathid{X}_1)~=~\mathkw{enum}~\tau{}~\mathid{X}_2~\{\dots,(\mathid{name},~\mathid{e}),\dots\}\\
\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{X}_1.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\mathid{X}_2.\mathid{name},~(\tau{})~\mathid{v})\rangle{}}{\textsc{Type-Member-SEnum}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2161">
<div class="mathpre infer para-block input-mathpre" data-line="2162"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{error}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathkw{error}.\mathid{name}\rangle{}}{\textsc{Error-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2167">
<div class="mathpre infer para-block input-mathpre" data-line="2168"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\textsc{Struct-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2173">
<div class="mathpre infer para-block input-mathpre" data-line="2174"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\textsc{Header-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2179">
<div class="mathpre infer para-block input-mathpre" data-line="2180"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots \}\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{isValid}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Header-IsValid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2186">
<div class="mathpre infer para-block input-mathpre" data-line="2187"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots \}\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{setValid}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{setValid}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Header-SetValid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2193">
<div class="mathpre infer para-block input-mathpre" data-line="2194"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots \}\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{setInvalid}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{setInvalid}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Header-SetInvalid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2200">
<div class="mathpre infer para-block input-mathpre" data-line="2201"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header\ union}~\{~\dots,(\mathid{name},\mathid{v}),\dots \}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\textsc{Header-Union-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2206">
<div class="mathpre infer para-block input-mathpre" data-line="2207"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header\ union}~\{~\dots \}\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{isValid}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Header-Union-IsValid-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2213">
<div class="mathpre infer para-block input-mathpre" data-line="2214"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{size}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~{\mathid{n}_{\mathid{size}}}_\mathid{u}^{32}\rangle{}}{\textsc{Array-Size-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2219">
<div class="mathpre infer para-block input-mathpre" data-line="2220"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
\mathid{n}_{\mathid{next}}~\lt \mathid{n}_{\mathid{size}}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{next}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{\mathid{n}_{\mathid{next}}}\rangle{}}{\textsc{Array-Next-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2226">
<div class="mathpre infer para-block input-mathpre" data-line="2227"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
\mathid{n}_{\mathid{next}}~\geq \mathid{n}_{\mathid{size}}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{next}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject}~``\mathid{StackOutOfBounds}&quot;,~\mathkw{None}\rangle{}}{\textsc{Array-Next-Field-OutOfBounds}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2233">
<div class="mathpre infer para-block input-mathpre" data-line="2234"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
1~\leq \mathid{n}_{\mathid{next}}~\leq \mathid{n}_{\mathid{size}}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{last}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{\mathid{n}_{\mathid{next}}~-~1}\rangle{}}{\textsc{Array-Last-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2240">
<div class="mathpre infer para-block input-mathpre" data-line="2241"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
\mathid{n}_{\mathid{next}}~\gt \mathid{n}_{\mathid{size}}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{last}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject}~``\mathid{StackOutOfBounds}&quot;,~\mathkw{None}\rangle{}}{\textsc{Array-Last-Field-OutOfBounds-High}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2247">
<div class="mathpre infer para-block input-mathpre" data-line="2248"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
\mathid{n}_{\mathid{next}}~\lt 1}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{last}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject}~``\mathid{StackOutOfBounds}&quot;,~\mathkw{None}\rangle{}}{\textsc{Array-Last-Field-OutOfBounds-Low}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2254">
<div class="mathpre infer para-block input-mathpre" data-line="2255"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{lastIndex}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\mathid{n}_{\mathid{next}}~-~1)_\mathid{u}^{32}\rangle{}}{\textsc{Array-LastIndex-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2260">
<div class="mathpre infer para-block input-mathpre" data-line="2261"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{pop\_front}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathkw{builtin}~\mathkw{pop\_front}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Array-PopFront-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2267">
<div class="mathpre infer para-block input-mathpre" data-line="2268"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{push\_front}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathkw{builtin}~\mathkw{push\_front}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Array-PushFront-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2274">
<div class="mathpre infer para-block input-mathpre" data-line="2275"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\{...;\mathid{name}=\mathid{v};...\}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\textsc{Record-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2280">
<div class="mathpre infer para-block input-mathpre" data-line="2281"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\mathid{loc},~\mathid{name}_{\mathid{object}})\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{extern}~\mathid{name}~(\mathid{loc},~\mathid{name}_{\mathid{object}})\rangle{}}{\textsc{Runtime-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2286">
<div class="mathpre infer para-block input-mathpre" data-line="2287"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{parser}~\dots\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathid{name}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Parser-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2293">
<div class="mathpre infer para-block input-mathpre" data-line="2294"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{control}~\dots\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathid{name}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Control-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2300">
<div class="mathpre infer para-block input-mathpre" data-line="2301"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{table}~\dots\rangle{}\\
\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{lv}_\mathid{o})}{\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathid{name}~\mathid{lv}_\mathid{o}\rangle{}}{\textsc{Table-Field}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-ternary-expression-evaluation" class="h3" data-line="2308" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2308"></span><span class="heading-before"><span class="heading-label">4.5.8</span>.&#8194;</span><span data-line="2308"></span>Ternary Expression Evaluation</h4>
<div class="infer" data-line="2310">
<div class="mathpre infer para-block input-mathpre" data-line="2311"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}_1,~\mathkw{true}\rangle{}\\
\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_2\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_2\rangle{}}{\textsc{Ternary-Op-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2317">
<div class="mathpre infer para-block input-mathpre" data-line="2318"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}_1,~\mathkw{false}\rangle{}\\
\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_3\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_3\rangle{}}{\textsc{Ternary-Op-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-function-call-evaluation" class="h3" data-line="2324" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2324"></span><span class="heading-before"><span class="heading-label">4.5.9</span>.&#8194;</span><span data-line="2324"></span>Function Call Evaluation</h4>
<div class="infer" data-line="2326">
<div class="mathpre infer para-block input-mathpre" data-line="2327"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma_0,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_1,~\sigma_1,~\mathkw{sig\_continue},~\xi_{\mathid{closure}}\otimes{}\mathkw{function}\langle{}\mathid{X}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}\rangle{}\\
\langle{}\xi_1,~\sigma_1,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_2,~\sigma_2,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~\,~(\mathkw{push}~\,~\xi_{\mathid{closure}})~\,~\sigma_2~\,~(\overline{\mathid{x}:\tau{},\mathid{d}})~\,~\overline{\mathid{v}}~=~\xi_3,\sigma_3\\
\langle{}\xi_3,~\sigma_3,~\mathid{blk}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi_4,~\sigma_4,~\mathkw{sig\_return\ v}\rangle{}\\
\mathkw{copyout}~\,~\xi_2~\,~\xi_4~\,~\sigma_4~\,~(\overline{\mathid{x}:\tau{},\mathid{d}})~\,~\overline{\mathid{e}}~=~\sigma_5}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_2,~\sigma_5,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\textsc{Function-Eval}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2336">
<div class="mathpre infer para-block input-mathpre" data-line="2337"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma_0,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_1,~\sigma_1,~\mathkw{sig\_continue},~\xi_{\mathid{closure}}\otimes{}\mathkw{action}(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}\\
\langle{}\xi_1,~\sigma_1,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_2,~\sigma_2,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~\,~(\mathkw{push}~\,~\xi_{\mathid{closure}})~\,~\sigma_2~\,~(\overline{\mathid{x}:\tau{},\mathid{d}})~\,~\overline{\mathid{v}}~=~\xi_3,\sigma_3\\
\langle{}\xi_3,~\sigma_3,~\mathid{blk}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi_4,~\sigma_4,~\mathkw{sig\_return\ v}\rangle{}\\
\mathkw{copyout}~\,~\xi_2~\,~\xi_4~\,~\sigma_4~\,~(\overline{\mathid{x}:\tau{},\mathid{d}})~\,~\overline{\mathid{e}}~=~\sigma_5}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_2,~\sigma_5,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\textsc{Action-Eval}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2346">
<div class="mathpre infer para-block input-mathpre" data-line="2347"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~=~\mathkw{header}~\mathid{b}~\{\dots\}}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{b}\rangle{}}{\textsc{isValid-Header}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2353">
<div class="mathpre infer para-block input-mathpre" data-line="2354"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~=~\mathkw{header\ union}~\{~\dots,(\mathid{name},~\mathkw{header}~\mathid{true}~\{\dots\}),~\dots\}}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{true}\rangle{}}{\textsc{isValid-Header-Union-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2360">
<div class="mathpre infer para-block input-mathpre" data-line="2361"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~=~\mathkw{header\ union}~\{~\overline{(\mathid{name},~\mathkw{header}~\mathid{false}~\{\dots\})}\}}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{false}\rangle{}}{\textsc{isValid-Header-Union-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2367">
<div class="mathpre infer para-block input-mathpre" data-line="2368"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{setValid}~\mathid{lv}_\mathid{o}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~=~\mathkw{header}~\mathid{b}~\{\overline{(\mathid{name},\mathid{v})}\}\\
\mathkw{assign\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~(\mathkw{header}~\mathid{true}~\{\overline{(\mathid{name},\mathid{v})}\})~=~(\xi&#39;&#39;,\mathid{sig})}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{true}\rangle{}}{\textsc{setValid}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2375">
<div class="mathpre infer para-block input-mathpre" data-line="2376"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{setInvalid}~\mathid{lv}_\mathid{o}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~=~\mathkw{header}~\mathid{b}~\{\overline{(\mathid{name},\mathid{v})}\}\\
\mathkw{assign\_lv}~\xi&#39;~\mathid{lv}_\mathid{o}~(\mathkw{header}~\mathid{false}~\{\overline{(\mathid{name},\mathid{v})}\})~=~(\xi&#39;&#39;,\mathid{sig})}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{false}\rangle{}}{\textsc{setInvalid}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2383">
<div class="mathpre infer para-block input-mathpre" data-line="2384"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{pop\_front}~(\mathkw{lvalue}~\tau{}[\mathid{a}]~...)\rangle{}\\
\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;&#39;~(\mathkw{lvalue}~\tau{}[\mathid{a}]~...)~=~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\\
\mathkw{assign\_lv}~\xi&#39;~(\mathkw{lvalue}~\tau{}[\mathid{a}]~...)~(\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})+1},...,\mathid{v}_{\mathid{n}_\mathid{size}},~(\mathkw{init\_val}~\xi&#39;&#39;~\tau{})^{\mathkw{extract\_num}~\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}}~-~\mathkw{extract\_num}~\mathid{v})~=~(\xi&#39;&#39;&#39;,\mathid{sig})}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\mathid{e})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{None}\rangle{}}{\textsc{PopFront}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2392">
<div class="mathpre infer para-block input-mathpre" data-line="2393"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{push\_front}~(\mathkw{lvalue}~\tau{}[\mathid{a}]~...)\rangle{}\\
\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;&#39;~(\mathkw{lvalue}~\tau{}[\mathid{a}]~...)~=~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\\
\mathkw{assign\_lv}~\xi&#39;~(\mathkw{lvalue}~\tau{}[\mathid{a}]~...)~((\mathkw{init\_val}~\xi&#39;&#39;~\tau{})^{\mathkw{extract\_num}~\mathid{v}},\mathid{v}_1,...,\mathid{v}_{\mathid{n}_{\mathid{size}}~-~\mathkw{extract\_num}~\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}}~+~\mathkw{extract\_num}~\mathid{v})~=~(\xi&#39;&#39;&#39;,\mathid{sig})}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\mathid{e})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{None}\rangle{}}{\textsc{PushFront}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2401">
<div class="mathpre infer para-block input-mathpre" data-line="2402"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{apply}~(\mathkw{lvalue}~\tau{}~\mathid{x})\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~(\mathkw{lvalue}~\tau{}~\mathid{x})~=~\mathkw{parser}~(\overline{\mathid{name},\mathid{v}})~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\overline{\mathid{state}}\\
\langle{}\mathkw{set\_namespace}~\xi&#39;~\mathid{x},~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;[\overline{\mathid{v}}/\overline{\mathid{name}}],~\sigma&#39;&#39;,~\overline{\mathid{decl}}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;\rangle{}\\
(\mathkw{state}~``\mathid{start}&quot;~\{...\})~\in \overline{\mathid{state}}\\
\mathkw{parser\_state\_machine}~\xi&#39;&#39;&#39;&#39;~\sigma&#39;&#39;&#39;~\overline{\mathid{state}}~(\mathkw{state}~``\mathid{start}&quot;~\{...\})~=~(\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;)\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\mathkw{set\_namespace}~\xi&#39;&#39;&#39;&#39;&#39;&#39;~(\mathkw{namespace}~\xi&#39;),~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;,~\mathkw{None}\rangle{}}{\textsc{Apply-Parser}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2414">
<div class="mathpre infer para-block input-mathpre" data-line="2415"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{apply}~(\mathkw{lvalue}~\tau{}~\mathid{x})\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~(\mathkw{lvalue}~\tau{}~\mathid{x})~=~\mathkw{control}~(\overline{\mathid{name},\mathid{v}})~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\mathid{blk}\\
\langle{}\mathkw{set\_namespace}~\xi&#39;~\mathid{x},~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;[\overline{\mathid{v}}/\overline{\mathid{name}}],~\sigma&#39;&#39;,~\overline{\mathid{decl}}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;\rangle{}\\
\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;,~\mathid{blk}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;\rangle{}\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\mathkw{set\_namespace}~\xi&#39;&#39;&#39;&#39;&#39;&#39;~(\mathkw{namespace}~\xi&#39;),~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;,~\mathkw{None}\rangle{}}{\textsc{Apply-Control}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2426">
<div class="mathpre infer para-block input-mathpre" data-line="2427"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{apply}~(\mathkw{lvalue}~\tau{}~\mathid{x})\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~(\mathkw{lvalue}~\tau{}~\mathid{x})~=~\mathkw{table}~\mathid{name}~\overline{\mathid{e}_\mathid{k}:\mathid{x}}~\overline{\mathid{action}\_\mathid{ref}}~\mathid{x}_{\mathid{default}}(\overline{\mathid{e}}_{\mathid{default}})~\{~\overline{\mathid{matches}:\mathid{x}(\overline{\mathid{e}})}~\}\\
\langle{}\mathkw{set\_namespace}~\xi&#39;~\mathid{x},~\sigma&#39;,~\overline{\mathid{e}}_\mathid{k}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}~,\overline{\mathid{v}}\rangle{}\\
\mathkw{set\_of\_matches}~\xi&#39;&#39;~\sigma&#39;&#39;~\overline{\mathid{matches}&#39;}~(\mathkw{width\_of\_val}~\overline{\mathid{v}})~=~(\xi&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;,~\overline{\mathid{set}})\\
\mathkw{lpm\_entries}~\overline{\mathid{set}}~\overline{\mathid{x}}~\overline{\mathid{v}}~=~(\overline{\mathid{set}}&#39;,\overline{\mathid{v}}&#39;)\\
\forall \mathid{i}~\text{where}~1~\leq \mathid{i}~\leq \mathid{n},~\mathkw{match\_set}~\overline{\mathid{v}}&#39;~\mathid{set}&#39;_\mathid{i}~=~\mathid{false}\\
\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;,~\mathid{x}_{\mathid{default}}(\overline{\mathid{e}}_{\mathid{default}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;,~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;,~\{(``\text{hit}&quot;,\mathid{false});(``\text{action\_run}&quot;,~\mathid{name}.\mathid{x}_{\mathid{default}})\}\rangle{}}{\textsc{Apply-Table-Default}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2438">
<div class="mathpre infer para-block input-mathpre" data-line="2439"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{apply}~(\mathkw{lvalue}~\tau{}~\mathid{x})\rangle{}\\
\mathkw{value\_of\_lv}~\xi&#39;~(\mathkw{lvalue}~\tau{}~\mathid{x})~=~\mathkw{table}~\mathid{name}~\overline{\mathid{e}_\mathid{k}:\mathid{x}}~\overline{\mathid{action}\_\mathid{ref}}~\mathid{x}_{\mathid{default}}(\overline{\mathid{e}}_{\mathid{default}})~\{~\overline{\mathid{matches}:\mathid{x}(\overline{\mathid{e}})}~\}\\
\langle{}\mathkw{set\_namespace}~\xi&#39;~\mathid{x},~\sigma&#39;,~\overline{\mathid{e}}_\mathid{k}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}~,\overline{\mathid{v}}\rangle{}\\
\mathkw{set\_of\_matches}~\xi&#39;&#39;~\sigma&#39;&#39;~\overline{\mathid{matches}&#39;}~(\mathkw{width\_of\_val}~\overline{\mathid{v}})~=~(\xi&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;,~\overline{\mathid{set}})\\
\mathkw{lpm\_entries}~\overline{\mathid{set}}~\overline{\mathid{x}}~\overline{\mathid{v}}~=~(\overline{\mathid{set}}&#39;,\overline{\mathid{v}}&#39;)\\
\mathkw{match\_set}~\overline{\mathid{v}}~\mathid{set}&#39;_\mathid{i}~=~\mathid{true}\\
\forall \mathid{j}~\lt \mathid{i},~\mathkw{match\_set}~\overline{\mathid{v}}&#39;~\mathid{set}&#39;_\mathid{j}~=~\mathid{false}\\
\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;,~\mathid{x}_\mathid{i}(\overline{\mathid{e}}_\mathid{i})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;,~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}&#39;,~\{(``\text{hit}&quot;,\mathid{true});(``\text{action\_run}&quot;,~\mathid{name}.\mathid{x}_\mathid{i})\}\rangle{}}{\textsc{Apply-Table}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2451">
<div class="mathpre infer para-block input-mathpre" data-line="2452"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{extern}~\mathid{name}~(\mathid{loc},~\mathid{x})\rangle{}\\
\xi&#39;(\mathid{x})~=~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}\\
\tau{}~\mathid{name}~\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\in \overline{\mathid{method}}\\
\mathkw{len}~\overline{\mathid{x}:\tau{},\mathid{d}}~=~\mathkw{len}~\overline{\mathid{e}}\\
\langle{}\xi&#39;,~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;,~\overline{\tau{}},~(((\mathid{loc},~\mathid{x}),~\mathkw{packet}),(\mathid{v}_{1},\tau{}_1),...,(\mathid{v}_\mathid{n},~\tau{}_\mathid{n}))\rangle{}~\Downarrow_{\mathid{T}\_\mathid{extern}}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\textsc{Extern-Function-Some-Caller}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="2464"><span data-line="2464"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{len}\ \overline{x}$</span></span><span data-line="2464"></span> is defined as the number of elements in <span data-line="2464"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\overline{x}$</span></span><span data-line="2464"></span>.
<span data-line="2465"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{packet}$</span></span><span data-line="2465"></span> is a type name.
<span data-line="2466"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\tau_i$</span></span><span data-line="2466"></span> is the type of <span data-line="2466"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$e_i \in \overline{e}$</span></span><span data-line="2466"></span>
</p>
<p class="p indent" data-line="2468"><span data-line="2468"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle \xi, \sigma, \overline{\tau{}}, (\overline{v,\tau{}}) \rangle \Downarrow_{Target\_extern} \langle \xi&#39;, \sigma&#39;, sig, v \rangle$</span></span><span data-line="2468"></span> is a relation defined by the target.
</p>
<div class="infer" data-line="2470">
<div class="mathpre infer para-block input-mathpre" data-line="2471"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{extern}~\mathid{name}~(\mathid{loc},~\mathid{x})\rangle{}\\
\xi&#39;(\mathid{x})~=~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}\\
\mathkw{abstract}~\tau{}~\mathid{name}~\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\in \overline{\mathid{method}}\\
\mathkw{len}~\overline{\mathid{x}:\tau{},\mathid{d}}~=~\mathkw{len}~\overline{\mathid{e}}\\
\langle{}\xi&#39;,~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;,~\overline{\tau{}},~(((\mathid{loc},~\mathid{x}),~\mathkw{packet}),(\mathid{v}_{1},\tau{}_1),...,(\mathid{v}_\mathid{n},~\tau{}_\mathid{n}))\rangle{}~\Downarrow_{\mathid{T}\_\mathid{extern}}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\textsc{Extern-Function-Some-Caller-Abstract}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2483">
<div class="mathpre infer para-block input-mathpre" data-line="2484"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{extern}~\mathid{name}~\mathkw{None}\rangle{}\\
\xi&#39;(\mathid{name})~=~\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\langle{}\xi&#39;,~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;,~\sigma&#39;,~\overline{\tau{}},~(\overline{\mathid{v},\tau{}})\rangle{}~\Downarrow_{\mathid{T}\_\mathid{extern}}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\textsc{Extern-Function-No-Caller}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-nameless-instantiation-evaluation" class="h3" data-line="2494" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2494"></span><span class="heading-before"><span class="heading-label">4.5.10</span>.&#8194;</span><span data-line="2494"></span>Nameless Instantiation Evaluation</h4>
<div class="infer" data-line="2496">
<div class="mathpre infer para-block input-mathpre" data-line="2497"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathkw{nametype}~\tau{})~=~\mathkw{control}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\mathkw{apply}~\mathid{blk}~\}\\
\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;)~(\overline{\mathid{x}:\tau{}},\mathkw{none})~\overline{\mathid{v}}~=~\xi&#39;&#39;}{\langle{}\xi,~\sigma,~\tau{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\mathkw{pop}~\xi&#39;&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{control}~(\mathkw{first\_lvl}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\mathid{blk}\rangle{}}{\textsc{Control}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2504">
<div class="mathpre infer para-block input-mathpre" data-line="2505"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathkw{nametype}~\tau{})~=~\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}\\
\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;)~(\overline{\mathid{x}:\tau{}},\mathkw{none})~\overline{\mathid{v}}~=~\xi&#39;&#39;}{\langle{}\xi,~\sigma,~\tau{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\mathkw{pop}~\xi&#39;&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{parser}~(\mathkw{first\_lvl}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\overline{\mathid{state}}\rangle{}}{\textsc{Parser}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2512">
<div class="mathpre infer para-block input-mathpre" data-line="2513"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathkw{nametype}~\tau{})~=~\mathkw{package}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\\
\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;}{\langle{}\xi,~\sigma,~\tau{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\mathkw{pop}~\xi&#39;&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{package}~(\mathkw{first\_lvl}~\xi&#39;&#39;)\rangle{}}{\textsc{Package}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2520">
<div class="mathpre infer para-block input-mathpre" data-line="2521"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathkw{nametype}~\tau{})~=~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}\\
(\mathkw{namespace}~\xi,~\mathid{object})~\in \sigma}{\langle{}\xi,~\sigma,~\tau{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~(\mathkw{namespace}~\xi,~\mathid{X})\rangle{}}{\textsc{Extern-Object-Initialized}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="2527"><span data-line="2527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\mathkw{namespace} \xi, object) \in \sigma$</span></span><span data-line="2527"></span> means if <span data-line="2527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma = (packet, (\overline{name,object}))$</span></span><span data-line="2527"></span> then <span data-line="2527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\mathkw{namespace} \xi, object) \in (\overline{name,object})$</span></span><span data-line="2527"></span>.
</p>
<div class="infer" data-line="2529">
<div class="mathpre infer para-block input-mathpre" data-line="2530"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\xi(\mathkw{nametype}~\tau{})~=~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}\\
(\mathkw{namespace}~\xi,~\mathid{object})~\not\in \sigma\\
\langle{}\xi,~\sigma,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{extern}~(\mathkw{namespace}~\xi)~((\mathkw{namespace}~\xi),~\mathid{X})\rangle{}\\
\langle{}\xi,~\sigma,~\mathid{f}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\tau{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\textsc{Extern-Object-Uninitialized}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-set-operation-evaluation" class="h3" data-line="2538" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2538"></span><span class="heading-before"><span class="heading-label">4.5.11</span>.&#8194;</span><span data-line="2538"></span>Set Operation Evaluation</h4>
<div class="infer" data-line="2540">
<div class="mathpre infer para-block input-mathpre" data-line="2541"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}\\
\langle{}\xi&#39;,~\sigma,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2\rangle{}}{\textsc{Masks}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2547">
<div class="mathpre infer para-block input-mathpre" data-line="2548"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}\\
\langle{}\xi&#39;,~\sigma,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}_1~\mathbin{..}~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_1~\mathbin{..}~\mathid{v}_2\rangle{}}{\textsc{Ranges}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-statements-and-block-evaluation" class="h2" data-line="2554" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2554"></span><span class="heading-before"><span class="heading-label">4.6</span>.&#8194;</span><span data-line="2554"></span>Statements and Block Evaluation</h3>
<p class="p noindent" data-line="2556"><span data-line="2556"></span>Statements are evaluated according to the following big-step relation:
</p>
<div class="center align-center" data-line="2557" style="text-align:center">
<p class="p noindent" data-line="2558"><span data-line="2558"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle{}\xi, \sigma, s\rangle{} \Downarrow_s \langle{}\xi&#39;, \sigma&#39;, sig\rangle{}$</span></span></p></div>
<div class="infer" data-line="2561">
<div class="mathpre infer para-block input-mathpre" data-line="2562"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{e}\langle{}\overline{\tau{}}\rangle{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}}{\textsc{Method-Call}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="2567"><span data-line="2567"></span>assignment
</p>
<div class="infer" data-line="2568">
<div class="mathpre infer para-block input-mathpre" data-line="2569"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,\sigma,\mathid{e}_\mathid{l}\rangle{}\Downarrow_{\mathid{l}}\langle{}\xi_1,\sigma_1,\mathkw{ok}~\mathid{lv}\rangle{}\\
\langle{}\xi_1,~\sigma_1,~\mathid{e}_\mathid{r}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_2,~\sigma_2,~\mathkw{ok}~\mathid{v}\rangle{}\\
\mathkw{write}~\sigma_2~\mathid{lv}~\mathid{v}\Downarrow_{\mathid{w}}\sigma_3}{\langle{}\xi,~\sigma,~\mathid{e}_\mathid{l}~:=~\mathid{e}_\mathid{r}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi_2,~\sigma_3,~\mathkw{go}\rangle{}}{\textsc{Assignment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2576">
<div class="mathpre infer para-block input-mathpre" data-line="2577"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\tau{}()\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{parser}~(\overline{\mathid{name},\mathid{v}})~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\overline{\mathid{state}}\rangle{}\\
\langle{}\mathkw{set\_namespace}~((\mathkw{namespace}~\xi&#39;)~\char`\^~(\mathkw{nametype}~\tau{}))~\xi&#39;,~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;[\overline{\mathid{v}}/\overline{\mathid{name}}],~\sigma&#39;&#39;,~\overline{\mathid{decl}}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;\rangle{}\\
(\mathkw{state}~``\mathid{start}&quot;~\{...\})~\in \overline{\mathid{state}}\\
\mathkw{parser\_state\_machine}~\xi&#39;&#39;&#39;&#39;~\sigma&#39;&#39;&#39;~\overline{\mathid{state}}~(\mathkw{state}~``\mathid{start}&quot;~\{...\})~=~(\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig})\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\tau{}.\mathkw{apply}~(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{s}~\langle{}\mathkw{set\_namespace}~(\mathkw{namespace}~\xi&#39;)~\xi&#39;&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}\rangle{}}{\textsc{Direct-Application-Parser}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2588">
<div class="mathpre infer para-block input-mathpre" data-line="2589"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\tau{}()\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{control}~(\overline{\mathid{name},\mathid{v}})~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{decl}}~\mathid{blk}\rangle{}\\
\langle{}\mathkw{set\_namespace}~((\mathkw{namespace}~\xi&#39;)~\char`\^~(\mathkw{nametype}~\tau{}))~\xi&#39;,~\sigma&#39;,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\overline{\mathid{v}}\rangle{}\\
\mathkw{copyin}~(\mathkw{push}~\xi&#39;&#39;)~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{v}}~=~\xi&#39;&#39;&#39;\\
\langle{}\xi&#39;&#39;&#39;[\overline{\mathid{v}}/\overline{\mathid{name}}],~\sigma&#39;&#39;,~\overline{\mathid{decl}}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;\rangle{}\\
\langle{}\xi&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;,~\mathid{blk}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}\rangle{}\\
\mathkw{copyout}~(\mathkw{pop}~\xi&#39;&#39;&#39;&#39;&#39;)~\xi&#39;&#39;&#39;&#39;&#39;~(\overline{\mathid{x}:\tau{},\mathid{d}})~\overline{\mathid{e}}~=~\xi&#39;&#39;&#39;&#39;&#39;&#39;}{\langle{}\xi,~\sigma,~\tau{}.\mathkw{apply}~(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{s}~\langle{}\mathkw{set\_namespace}~(\mathkw{namespace}~\xi&#39;)~\xi&#39;&#39;&#39;&#39;&#39;&#39;,~\sigma&#39;&#39;&#39;&#39;,~\mathid{sig}\rangle{}}{\textsc{Direct-Application-Control}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2599">
<div class="mathpre infer para-block input-mathpre" data-line="2600"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject\ v},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}_{1}~\mathkw{else}~\mathid{s}_{2}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject\ v}\rangle{}}{\textsc{Conditional-Reject}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2605">
<div class="mathpre infer para-block input-mathpre" data-line="2606"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}\\
\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\textsc{If-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2612">
<div class="mathpre infer para-block input-mathpre" data-line="2613"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}}{\textsc{If-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2618">
<div class="mathpre infer para-block input-mathpre" data-line="2619"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}\\
\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}_1\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\textsc{If-Else-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2625">
<div class="mathpre infer para-block input-mathpre" data-line="2626"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}\\
\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\textsc{If-Else-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2632">
<div class="mathpre infer para-block input-mathpre" data-line="2633"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\mathkw{push}~\xi,~\sigma,~\overline{\mathid{s}}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}}{\langle{}\xi,~\sigma,~\{\mathid{s}_1;~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma&#39;,~\mathid{sig}\rangle{}}{\textsc{Block}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2638">
<div class="mathpre infer para-block input-mathpre" data-line="2639"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{exit}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma,~\mathkw{sig\_exit}\rangle{}}{\textsc{Exit-Continue}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2644">
<div class="mathpre infer para-block input-mathpre" data-line="2645"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~;\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma,~\mathid{sig}\rangle{}}{\textsc{Empty}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2650">
<div class="mathpre infer para-block input-mathpre" data-line="2651"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{return}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma,~\mathkw{sig\_return\ None}\rangle{}}{\textsc{Return-Void}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2656">
<div class="mathpre infer para-block input-mathpre" data-line="2657"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{return}~\mathid{e}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_return\ v}\rangle{}}{\textsc{Return-Value}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2662">
<div class="mathpre infer para-block input-mathpre" data-line="2663"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{name}_1.\mathid{name}_2\rangle{}\\
\mathkw{match\_switch\_case}~\overline{\mathid{case}}~\mathid{name}_2~=~\mathid{None}}{\langle{}\xi,~\sigma,~\mathkw{switch}~(\mathid{e})~\{\overline{\mathid{case}}\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}}{\textsc{Switch-No-Match}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2669">
<div class="mathpre infer para-block input-mathpre" data-line="2670"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{name}_1.\mathid{name}_2\rangle{}\\
\mathkw{match\_switch\_case}~\overline{\mathid{case}}~\mathid{name}_2~=~\mathid{Some}\ \mathid{blk}\\
\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{blk}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{switch}~(\mathid{e})~\{\overline{\mathid{case}}\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}}{\textsc{Switch-Match}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2677">
<div class="mathpre infer para-block input-mathpre" data-line="2678"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{decl}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;,~\sigma&#39;\rangle{}}{\langle{}\xi,~\sigma,~\mathid{decl}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}}{\textsc{Declaration-Statement}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-declaration-evaluation" class="h2" data-line="2683" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2683"></span><span class="heading-before"><span class="heading-label">4.7</span>.&#8194;</span><span data-line="2683"></span>Declaration Evaluation</h3>
<p class="p noindent" data-line="2685"><span data-line="2685"></span>Declarations are evaluated according to the following big-step relation:
</p>
<div class="center align-center" data-line="2686" style="text-align:center">
<p class="p noindent" data-line="2687"><span data-line="2687"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle \xi, \sigma, decl \rangle \Downarrow_d \langle \xi&#39;, \sigma&#39; \rangle$</span></span></p></div>
<div class="infer" data-line="2690">
<div class="mathpre infer para-block input-mathpre" data-line="2691"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{const}~\tau{}~\mathid{x}\coloneqq{}\mathid{v}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}\rangle{}}{\textsc{Constant-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2696">
<div class="mathpre infer para-block input-mathpre" data-line="2697"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\mathkw{set\_namespace}~((\mathkw{namespace}~\xi)~\char`\^~\mathid{x})~\xi,~\sigma,~\tau{}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\tau{}~\mathid{x}(\overline{\mathid{e}})\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~(\mathkw{set\_namespace}~(\mathkw{namespace}~\xi)~\xi&#39;)~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}\rangle{}}{\textsc{Instantiation-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2702">
<div class="mathpre infer para-block input-mathpre" data-line="2703"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Parser-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2708">
<div class="mathpre infer para-block input-mathpre" data-line="2709"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{control}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\mathkw{apply}~\mathid{blk}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{control}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\mathkw{apply}~\mathid{blk}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Control-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2714">
<div class="mathpre infer para-block input-mathpre" data-line="2715"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\xi\otimes{}\mathkw{function}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk})~=~\xi&#39;,~\sigma&#39;}{\langle{}\xi,~\sigma,~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;[~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}/\mathid{x}],~\sigma&#39;\rangle{}}{\textsc{Function-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2720">
<div class="mathpre infer para-block input-mathpre" data-line="2721"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\mathkw{extern}~\mathid{x}~\mathkw{None})~=~\xi&#39;,\sigma&#39;}{\langle{}\xi,~\sigma,~\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\rangle{}~\Downarrow_\mathid{d}~\langle{}(\xi&#39;[\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})/\mathid{x}]),~\sigma&#39;\rangle{}}{\textsc{Extern-Function-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2726">
<div class="mathpre infer para-block input-mathpre" data-line="2727"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\tau{}~\mathid{x}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})\rangle{}}{\textsc{Variable-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2732">
<div class="mathpre infer para-block input-mathpre" data-line="2733"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\tau{}~\mathid{x}~:=~\mathid{e}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}\rangle{}}{\textsc{Variable-Initialized-Decl-Success}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2738">
<div class="mathpre infer para-block input-mathpre" data-line="2739"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}\\
\mathid{sig}~\neq \mathkw{sig\_continue}}{\langle{}\xi,~\sigma,~\tau{}~\mathid{x}~:=~\mathid{e}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})\rangle{}}{\textsc{Variable-Initialized-Decl-Fail}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2745">
<div class="mathpre infer para-block input-mathpre" data-line="2746"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi[\tau{}/\mathid{x}],~\sigma,~\mathid{e}\rangle{}~\Downarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\_\mathid{continue},~\mathid{v}\rangle{}}{\langle{}\xi,~\sigma,~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}\rangle{}~\Downarrow \langle{}\mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}\rangle{}}{\textsc{Value-Set-Decl-Success}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2751">
<div class="mathpre infer para-block input-mathpre" data-line="2752"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi[\tau{}/\mathid{x}],~\sigma,~\mathid{e}\rangle{}~\Downarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}\\
\mathid{sig}~\neq \mathkw{sig\_continue}}{\langle{}\xi,~\sigma,~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}\rangle{}~\Downarrow \langle{}\xi,~\sigma\rangle{}}{\textsc{Value-Set-Decl-Fail}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2758">
<div class="mathpre infer para-block input-mathpre" data-line="2759"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\xi\otimes{}\mathkw{action}(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk})~=~\xi&#39;,\sigma&#39;}{\langle{}\xi,~\sigma,~\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;[\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}/\mathid{x}],~\sigma&#39;\rangle{}}{\textsc{Action-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2764">
<div class="mathpre infer para-block input-mathpre" data-line="2765"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathkw{const\ entries}~=~\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\}~\in \overline{\mathid{prop}}\\
\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\}~\neq \{\}\\
\mathkw{key}~=~\{~\overline{\mathid{e}:\mathid{x}}~\}~\in \overline{\mathid{prop}}\\
\mathkw{actions}~=~\{~\overline{\mathid{action}\_\mathid{ref}}~\}~\in \overline{\mathid{prop}}}{\langle{}\xi,~\sigma,~\mathkw{table}~\mathid{x}~\{~\overline{\mathid{prop}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~(\xi[\mathkw{table}~\mathid{x}~\{~\overline{\mathid{prop}}~\}/\mathid{x}])~\,~\sigma \,~\mathid{x}~\,~(\mathkw{table}~\mathid{x}~\overline{\mathid{e}}~\overline{\mathid{action}\_\mathid{ref}}~(\mathkw{default}~\overline{\mathid{prop}})~\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\})\rangle{}}{\textsc{Table-Decl-Constant-Entries}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2773">
<div class="mathpre infer para-block input-mathpre" data-line="2774"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\mathkw{const\ entries}~=~\{\}~\in \overline{\mathid{prop}}\\
\mathkw{key}~=~\{~\overline{\mathid{e}:\mathid{x}}~\}~\in \overline{\mathid{prop}}\\
\mathkw{actions}~=~\{~\overline{\mathid{action}\_\mathid{ref}}~\}~\in \overline{\mathid{prop}}}{\langle{}(\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\},~\overline{\mathid{set}}),~\xi,~\sigma,~\mathkw{table}~\mathid{x}~\{~\overline{\mathid{prop}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~(\xi[\mathkw{table}~\mathid{x}~\{~\overline{\mathid{prop}}~\}/\mathid{x}])~\,~\sigma \,~\mathid{x}~\,~(\mathkw{table}~\mathid{x}~\overline{\mathid{e}}~\overline{\mathid{action}\_\mathid{ref}}~(\mathkw{default}~\overline{\mathid{prop}})~\{~\overline{\mathid{matches}:\mathid{action}\_\mathid{ref}}~\})\rangle{}}{\textsc{Table-Decl-Control-Plane-Entries}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2781">
<div class="mathpre infer para-block input-mathpre" data-line="2782"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{header}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{header}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Header-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2787">
<div class="mathpre infer para-block input-mathpre" data-line="2788"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{header\ union}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{header\ union}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Header-Union-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2793">
<div class="mathpre infer para-block input-mathpre" data-line="2794"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{struct}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{struct}~\mathid{X}~\{~\overline{\mathid{x}:\tau{}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Struct-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2799">
<div class="mathpre infer para-block input-mathpre" data-line="2800"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{error}~\{~\overline{\mathid{x}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi,~\sigma\rangle{}}{\textsc{Error-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2805">
<div class="mathpre infer para-block input-mathpre" data-line="2806"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{match\_kind}~\{~\overline{\mathid{x}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi,~\sigma\rangle{}}{\textsc{Matchkind-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2811">
<div class="mathpre infer para-block input-mathpre" data-line="2812"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{x}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{x}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Enum-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2817">
<div class="mathpre infer para-block input-mathpre" data-line="2818"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{enum}~\tau{}~\mathid{X}~\{~\overline{\mathid{x}=\mathid{e}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{enum}~\tau{}~\mathid{X}~\{~\overline{\mathid{x}=\mathid{e}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{SEnum-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2823">
<div class="mathpre infer para-block input-mathpre" data-line="2824"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{extern}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}~\{~\overline{\mathid{ctor}}\ \overline{\mathid{method}}~\}/\mathid{X}],~\sigma\rangle{}}{\textsc{Extern-Object-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2829">
<div class="mathpre infer para-block input-mathpre" data-line="2830"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{typedef}~\tau{}~\mathid{X}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{typedef}~\tau{}~\mathid{X}/\mathid{X}],~\sigma\rangle{}}{\textsc{Type-Def-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2835">
<div class="mathpre infer para-block input-mathpre" data-line="2836"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{type}~\tau{}~\mathid{X}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{type}~\tau{}~\mathid{X}/\mathid{X}],~\sigma\rangle{}}{\textsc{New-Type-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2841">
<div class="mathpre infer para-block input-mathpre" data-line="2842"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{control}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{control}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})/\mathid{X}],~\sigma\rangle{}}{\textsc{Control-Type-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2847">
<div class="mathpre infer para-block input-mathpre" data-line="2848"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{parser}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{parser}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})/\mathid{X}],~\sigma\rangle{}}{\textsc{Parser-Type-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2853">
<div class="mathpre infer para-block input-mathpre" data-line="2854"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\langle{}\xi,~\sigma,~\mathkw{package}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}})\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{package}~\mathid{X}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{}})/\mathid{X}],~\sigma\rangle{}}{\textsc{Package-Type-Decl}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h3 id="sec-program-evaluation" class="h2" data-line="2859" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2859"></span><span class="heading-before"><span class="heading-label">4.8</span>.&#8194;</span><span data-line="2859"></span>Program Evaluation</h3>
<p class="p noindent" data-line="2861"><span data-line="2861"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$r ::= (packet&#39;, n_{out\_port}) | \mathkw{None}$</span></span><span data-line="2861"></span>
</p>
<p class="p indent" data-line="2863"><span data-line="2863"></span>Programs are evaluated according to the following big-step relation:
</p>
<div class="center align-center" data-line="2864" style="text-align:center">
<p class="p noindent" data-line="2865"><span data-line="2865"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle \xi, \sigma, packet, n_{in\_port}, \overline{decl} \rangle \Downarrow \langle \sigma&#39;, r \rangle$</span></span></p></div>
<div class="infer" data-line="2868">
<div class="mathpre infer para-block input-mathpre" data-line="2869"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\overline{\mathid{decl}}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;,~\sigma&#39;\rangle{}\\
\langle{}\xi&#39;,~\mathid{n}_{\mathid{in}\_\mathid{port}}\rangle{}~\Downarrow_{\mathid{Target}\_\mathid{init}}~\langle{}\xi&#39;&#39;\rangle{}\\
\langle{}\xi&#39;&#39;,~\sigma&#39;,~\mathid{packet},~\mathid{TODO}\rangle{}~\Downarrow_{\mathid{Target}\_\mathid{pipeline}}~\langle{}\sigma&#39;&#39;,~\xi&#39;&#39;&#39;,~\mathid{packet}&#39;\rangle{}\\
\xi&#39;&#39;&#39;(``\mathid{std}\_\mathid{meta}&quot;)~=~\mathkw{struct}~\{...,(``\mathid{egress}\_\mathid{port}&quot;,\mathid{n}_\mathid{u}^\mathid{w}),...\}}{\langle{}\xi,~\sigma,~\mathid{packet},~\mathid{n}_{\mathid{in}\_\mathid{port}},~\overline{\mathid{decl}}\rangle{}~\Downarrow \langle{}\sigma&#39;,~(\mathid{packet}&#39;,~\mathid{n})\rangle{}}{\textsc{Some-Packet}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2877">
<div class="mathpre infer para-block input-mathpre" data-line="2878"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\langle{}\xi,~\sigma,~\overline{\mathid{decl}}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;,~\sigma&#39;\rangle{}\\
\langle{}\xi&#39;,~\mathid{n}_{\mathid{in}\_\mathid{port}}\rangle{}~\Downarrow_{\mathid{Target}\_\mathid{init}}~\langle{}\xi&#39;&#39;\rangle{}\\
\langle{}\xi&#39;&#39;,~\sigma&#39;,~\mathid{packet},~\mathid{TODO}\rangle{}~\Downarrow_{\mathid{Target}\_\mathid{pipeline}}~\langle{}\sigma&#39;&#39;,~\xi&#39;&#39;&#39;,~\mathkw{None}\rangle{}}{\langle{}\xi,~\sigma,~\mathid{packet},~\mathid{n}_{\mathid{in}\_\mathid{port}},~\overline{\mathid{decl}}\rangle{}~\Downarrow \langle{}\sigma&#39;,~\mathkw{None}\rangle{}}{\textsc{No-Packet}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="2885"><span data-line="2885"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$p ::= packet | \mathkw{None}$</span></span><span data-line="2885"></span>
</p>
<p class="p indent" data-line="2887"><span data-line="2887"></span>These relations are defined by the target:
</p>
<div class="center align-center" data-line="2888" style="text-align:center">
<p class="p noindent" data-line="2889"><span data-line="2889"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle \xi, n_{in\_port} \rangle \Downarrow_{Target\_init} \langle \xi&#39; \rangle$</span></span><span data-line="2889"></span>
</p>
<p class="p indent" data-line="2891"><span data-line="2891"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle \xi, \sigma, packet, TODO \rangle \Downarrow_{Target\_pipeline} \langle \sigma&#39;, \xi&#39;, p \rangle$</span></span></p></div><h2 id="sec-type-soundness" class="h1" data-line="2894" data-heading-depth="1" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2894"></span><span class="heading-before"><span class="heading-label">5</span>.&#8194;</span><span data-line="2894"></span>Type Soundness</h2><h3 id="sec-environment-typing" class="h2" data-line="2896" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2896"></span><span class="heading-before"><span class="heading-label">5.1</span>.&#8194;</span><span data-line="2896"></span>Environment Typing</h3>
<p class="p noindent para-continue" data-line="2897"><span data-line="2897"></span>Given a store typing and a variable typing it is possible to typecheck an
evaluation environment <span data-line="2898"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi,\sigma$</span></span><span data-line="2898"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="2899"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Xi,\Gamma{}\vDash{}\xi,\sigma.
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="2902"><span data-line="2902"></span>Since contexts and environments are structured into scopes, we will define this
judgment in terms of a per-scope judgment
</p>
<div class="mathpre para-block input-mathpre" data-line="2904"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Xi,\Gamma{}\vDash{}\epsilon,\sigma.
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="2908"><span data-line="2908"></span>Here is a formal definition:
</p>
<div class="infer" data-line="2909">
<div class="mathpre infer para-block input-mathpre" data-line="2910"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Xi,\Gamma{}\vDash{}[]}{\textsc{Entails-Empty-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2915">
<div class="mathpre infer para-block input-mathpre" data-line="2916"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}\vDash{}\epsilon,\sigma\\
\Gamma{}(\mathid{x})=\tau{}\\
\Xi(\ell)=\tau{}}{\Sigma{},\Delta{},\Gamma{}~\models \epsilon,(\mathid{x}=\ell)}{\textsc{Entails-Variable-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2924">
<div class="mathpre infer para-block input-mathpre" data-line="2925"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\models ([],[],[],\nu),\sigma}{\textsc{Entails-Empty-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2931">
<div class="mathpre infer para-block input-mathpre" data-line="2932"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\models (\mathid{P},\mathid{E},\Delta{},\nu),\sigma\\
\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma}{\Sigma{},\Delta{},\Gamma{}~\models ((\mathid{P},\rho),(\mathid{E},\epsilon),(\Delta{},\delta),\nu),\sigma}{\textsc{Entails-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-lemma--entailment-is-contravariant-with-respect-to-state" class="h3" data-line="2938" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2938"></span><span class="heading-before"><span class="heading-label">5.1.1</span>.&#8194;</span><span data-line="2938"></span>Lemma: Entailment is Contravariant with respect to State</h4>
<div class="mathpre para-block input-mathpre" data-line="2939"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{0_1}:~\forall \Sigma{},\Delta{},\Gamma{},\epsilon,\sigma,\sigma&#39;,\\
\sigma \subseteq \sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<div class="mathpre para-block input-mathpre" data-line="2944"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_0:~\forall \Sigma{},\Delta{},\Gamma{},\xi,\sigma,\sigma&#39;,\\
\sigma \subseteq \sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-lemma--mathkwlv_of_expr-sustains-entailment" class="h3" data-line="2949" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2949"></span><span class="heading-before"><span class="heading-label">5.1.2</span>.&#8194;</span><span data-line="2949"></span>Lemma: <span data-line="2949"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{lv\_of\_expr}$</span></span><span data-line="2949"></span> Sustains Entailment</h4>
<p class="p noindent para-continue" data-line="2951"><span data-line="2951"></span>TODO: need a good definition for this<span data-line="2951"></span>&#8230;<span data-line="2951"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="2953"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_1:~\forall \Sigma{},\Delta{},\Gamma{},\xi,\xi&#39;,\sigma,\sigma&#39;,\mathid{e},\mathid{sig},\tau{},\mathid{lv},\\
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},\_~\Rightarrow \mathkw{lv\_of\_expr}~\xi \sigma \mathid{e}~=~(\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathkw{lvalue}~\tau{}~\mathid{lv})~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \sigma \subseteq \sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{lv}~:~\tau{},\_
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="2958" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2958"></span><span class="heading-before"><span class="heading-label">5.1.2.1</span>.&#8194;</span><span data-line="2958"></span>Proof</h5>
<p class="p noindent" data-line="2960"><span data-line="2960"></span>TODO!
</p><h4 id="sec-the-necromancer-psi--constructing-gamma-from-xi_closure" class="h3" data-line="2962" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2962"></span><span class="heading-before"><span class="heading-label">5.1.3</span>.&#8194;</span><span data-line="2962"></span>The Necromancer <span data-line="2962"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Psi$</span></span><span data-line="2962"></span>: Constructing <span data-line="2962"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="2962"></span> from <span data-line="2962"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi_{closure}$</span></span></h4>
<p class="p noindent para-continue" data-line="2964"><span data-line="2964"></span>For function call expressions involving copyin and copyout, the type-preservation proof needs the typing context <span data-line="2964"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="2964"></span> from the function<span data-line="2964"></span>&#39;<span data-line="2964"></span>s definition.
We need a way to reverse engineer <span data-line="2965"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="2965"></span> from the closure environment <span data-line="2965"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi_{closure}$</span></span><span data-line="2965"></span>.
Ergo, the need for a necromancer function:
</p>
<div class="mathpre para-block input-mathpre" data-line="2967"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Psi :~\Sigma \times \Delta \times \xi_{\mathid{closure}}~\times \sigma  \mapsto \Gamma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="2970"><span data-line="2970"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Psi$</span></span><span data-line="2970"></span> is defined as follows:
</p>
<div class="infer" data-line="2971">
<div class="mathpre infer para-block input-mathpre" data-line="2972"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\psi \,~\Sigma{}~\,~\Delta{}~\,~[]~\,~\sigma \mapsto_{\mathid{scope}}~[]}{\textsc{Necromance-Empty-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2976">
<div class="mathpre infer para-block input-mathpre" data-line="2977"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\psi \,~\Sigma{}~\,~\Delta{}~\,~\epsilon \,~\sigma \mapsto_{\mathid{scope}}~\gamma\\
\Sigma{}~\,~\Delta{}~\,~\gamma \vdash{}~\sigma(\ell)~:~\tau{},~\mathid{d}}{\psi \,~\Sigma{}~\,~\Delta{}~\,~((\epsilon,\mathid{x}=\ell),\nu)~\,~\sigma \mapsto_{\mathid{scope}}~\gamma,(\mathid{x}:\tau{},\mathid{d})}{\textsc{Necromance-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2982">
<div class="mathpre infer para-block input-mathpre" data-line="2983"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Psi \,~\Sigma{}~\,~\Delta{}~\,~([],[],\nu)~\,~\sigma \mapsto []}{\textsc{Necromance-Empty-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="2987">
<div class="mathpre infer para-block input-mathpre" data-line="2988"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Psi \,~\Sigma{}~\,~\Delta{}~\,~(\mathid{E},\Delta{},\nu)~\sigma \mapsto \Gamma{}\\
\psi \,~\Sigma{}~\,~\Delta{}~\,~\epsilon \,~\sigma \mapsto_{\mathid{scope}}~\gamma}{\Psi \,~\Sigma{}~\,~\Delta{}~\,~((\mathid{E},\epsilon),(\Delta{},\delta),\nu)~\,~\sigma \mapsto \Gamma{},\gamma}{\textsc{Necromance-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h5 id="sec-corollary--the-necromancer-necromances-an-entailing-typing-context" class="h4" data-line="2994" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="2994"></span><span class="heading-before"><span class="heading-label">5.1.3.1</span>.&#8194;</span><span data-line="2994"></span>Corollary: The Necromancer necromances an entailing Typing Context</h5>
<div class="mathpre para-block input-mathpre" data-line="2996"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{C}_0:~\forall \Sigma{},\Delta{},\xi,\sigma,\Gamma{},\\
\Psi \,~\Sigma{}~\,~\Delta{}~\,~\xi \,~\sigma \mapsto \Gamma{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h6 id="sec-proof" class="h5" data-line="3001" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3001"></span>Proof</h6>
<p class="p noindent para-continue" data-line="3002"><span data-line="3002"></span>Introducing the variables:
</p>
<div class="mathpre para-block input-mathpre" data-line="3003"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\xi,\sigma,\mathid{G}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3006"><span data-line="3006"></span>and hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3007"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Psi \,~\Sigma{}~\,~\Delta{}~\,~\xi \,~\sigma \mapsto \mathid{G}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3010"><span data-line="3010"></span>we wish to prove the goal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3011"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3014"><span data-line="3014"></span>By induction on <span data-line="3014"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="3014"></span> we have the following case-analysis:
</p><h6 id="sec-case-necromance-empty-environment" class="h6" data-line="3016" data-heading-depth="6" style="display:block"><span data-line="3016"></span>Case Necromance-Empty-Environment</h6>
<p class="p noindent para-continue" data-line="3017"><span data-line="3017"></span>We have hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3018"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Psi \,~\Sigma{}~\,~\Delta{}~\,~([],[],\nu)~\,~\sigma \mapsto []
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3021"><span data-line="3021"></span>and we wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3022"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models ([],[],\nu)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3025"><span data-line="3025"></span>We may construct the rule-instance:
</p>
<div class="infer" data-line="3026">
<div class="mathpre infer para-block input-mathpre" data-line="3027"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},[]~\models ([],[],\nu),\sigma}{\textsc{Entails-Empty-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3031"><span data-line="3031"></span>proving <span data-line="3031"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3031"></span>
</p><h6 id="sec-case-necromance-environment" class="h6" data-line="3033" data-heading-depth="6" style="display:block"><span data-line="3033"></span>Case Necromance-Environment</h6>
<p class="p noindent para-continue" data-line="3034"><span data-line="3034"></span>We have hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3035"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Psi \,~\Sigma{}~\,~\Delta{}~\,~((\mathid{E},\epsilon),(\Delta{},\delta),\nu)~\,~\sigma \mapsto \Gamma{},\gamma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3038"><span data-line="3038"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3039"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Psi \,~\Sigma{}~\,~\Delta{}~\,~(\mathid{E},\Delta{},\nu)~\,~\sigma \mapsto \Gamma{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models (\mathid{E},\Delta{},\nu),\sigma\\
\textit{Sketchy: probably need another lemma...}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3043"><span data-line="3043"></span>and we wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3044"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},(\Gamma{},\gamma)~\models ((\mathid{E},\epsilon),(\Delta{},\delta),\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3047"><span data-line="3047"></span>By inversion on <span data-line="3047"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="3047"></span> we have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3048"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_1:~\Psi \,~\Sigma{}~\,~\Delta{}~\,~(\mathid{E},\Delta{},\nu)~\sigma \mapsto \Gamma{}\\
\mathid{H}_2:~\psi \,~\Sigma{}~\,~\Delta{}~\,~\epsilon \,~\sigma \mapsto_{\mathid{scope}}~\gamma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3052"><span data-line="3052"></span>Via application <span data-line="3052"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_1$</span></span><span data-line="3052"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3053"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{E},\Delta{},\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3057"><span data-line="3057"></span>TODO: stuck<span data-line="3057"></span>&#8230;<span data-line="3057"></span>
</p><h4 id="sec-lemma--copyin-preserves-entailment" class="h3" data-line="3059" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3059"></span><span class="heading-before"><span class="heading-label">5.1.4</span>.&#8194;</span><span data-line="3059"></span>Lemma: Copyin Preserves Entailment</h4>
<p class="p noindent para-continue" data-line="3060"><span data-line="3060"></span>TODO: Is this the right definition?
</p>
<div class="mathpre para-block input-mathpre" data-line="3061"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_2:~\forall \xi_{\mathid{closure}},\mathid{x},\tau{},\mathid{d},\mathid{v},\xi_{\mathid{closure}}&#39;,\Sigma{},\Delta{},\Gamma{},\Delta{}_{\Psi},\Gamma{}_{\Psi}\sigma,\sigma&#39;\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathid{d}~\Rightarrow \mathkw{copyin}~\,~\xi_{\mathid{closure}}~\,~\sigma (\mathid{x}:\tau{},\mathid{d})~\mathid{v}~=~\xi_{\mathid{closure}}&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{}_{\Psi},\Gamma{}_{\Psi}~\models \xi_{\mathid{closure}},\sigma \Rightarrow \Sigma{},\Delta{}_{\Psi},\Gamma{}_{\Psi}[\mathid{x}:\tau{},\mathid{d}]~\models \xi_{\mathid{closure}}&#39;,\sigma&#39;~\wedge \sigma \subseteq \sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="3066" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3066"></span><span class="heading-before"><span class="heading-label">5.1.4.1</span>.&#8194;</span><span data-line="3066"></span>Proof</h5>
<p class="p noindent" data-line="3068"><span data-line="3068"></span>TODO!
</p><h4 id="sec-lemma--copyout-preserves-entailment" class="h3" data-line="3070" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3070"></span><span class="heading-before"><span class="heading-label">5.1.5</span>.&#8194;</span><span data-line="3070"></span>Lemma: Copyout Preserves Entailment</h4>
<p class="p noindent para-continue" data-line="3072"><span data-line="3072"></span>TODO: probably need a better definition for this<span data-line="3072"></span>&#8230;<span data-line="3072"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="3074"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_3:~\forall \xi_{\mathid{call}},~\xi_{\mathid{closure}}~\,~\sigma,~\mathid{x},~\tau{},~\mathid{d},~\mathid{e},~\sigma&#39;,~\Sigma{},~\Delta{},~\Gamma{},~\Delta{}_{\Psi},~\Gamma{}_{\Psi}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},\mathid{d}~\Rightarrow \mathkw{copyout}~\,~\xi_{\mathid{call}}~\,~\xi_{\mathid{closure}}~\,~\sigma \,~(\mathid{x}:\tau{},\mathid{d})~\,~\mathid{e}~=~\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi_{\mathid{call}},\sigma \Rightarrow \Sigma{},\Delta{}_{\Psi},\Gamma{}_{\Psi}~\models \xi_{\mathid{closure}},\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi_{\mathid{call}},\sigma&#39;~\wedge \sigma \subseteq \sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="3079" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3079"></span><span class="heading-before"><span class="heading-label">5.1.5.1</span>.&#8194;</span><span data-line="3079"></span>Proof</h5>
<p class="p noindent" data-line="3081"><span data-line="3081"></span>TODO!
</p><h4 id="sec-lemma--push-preserves-entailment" class="h3" data-line="3083" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3083"></span><span class="heading-before"><span class="heading-label">5.1.6</span>.&#8194;</span><span data-line="3083"></span>Lemma: Push Preserves Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3084"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_4:~\forall \Sigma{},\Delta{},\Gamma{},\xi,~\sigma,\\
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \mathkw{push}~\xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="3089" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3089"></span><span class="heading-before"><span class="heading-label">5.1.6.1</span>.&#8194;</span><span data-line="3089"></span>Proof</h5>
<p class="p noindent para-continue" data-line="3090"><span data-line="3090"></span>Introducing variables:
</p>
<div class="mathpre para-block input-mathpre" data-line="3091"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{},\xi,~\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3094"><span data-line="3094"></span>and hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3095"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3098"><span data-line="3098"></span>i.e:
</p>
<div class="mathpre para-block input-mathpre" data-line="3099"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{E},\Delta{},\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3102"><span data-line="3102"></span>we wish to prove the goal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3103"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \mathkw{push}~\xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3106"><span data-line="3106"></span>By definition of <span data-line="3106"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{push}$</span></span><span data-line="3106"></span> we may rewrite the goal as:
</p>
<div class="mathpre para-block input-mathpre" data-line="3107"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models ((\mathid{E},[]),(\Delta{},[]),\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3110"><span data-line="3110"></span>We may construct the rule-instance:
</p>
<div class="infer" data-line="3111">
<div class="mathpre infer para-block input-mathpre" data-line="3112"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~[],\sigma}{\textsc{Entails-Empty-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3116"><span data-line="3116"></span>as well as:
</p>
<div class="infer" data-line="3117">
<div class="mathpre infer para-block input-mathpre" data-line="3118"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\models (\mathid{E},\Delta{},\nu),\sigma\\
\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~[],\sigma}{\Sigma{},\Delta{},\Gamma{}~\models ((\mathid{E},[]),(\Delta{},[]),\nu),\sigma}{\textsc{Entails-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3123"><span data-line="3123"></span>proving the goal.
</p>
<p class="p indent" data-line="3125"><span data-line="3125"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\square$</span></span><span data-line="3125"></span>.
</p><h4 id="sec-lemma--pop-preserves-entailment" class="h3" data-line="3127" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3127"></span><span class="heading-before"><span class="heading-label">5.1.7</span>.&#8194;</span><span data-line="3127"></span>Lemma: Pop Preserves Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3128"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_5:~\forall \Sigma{},\Delta{},\Gamma{},\xi,\sigma,\\
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \mathkw{pop}~\xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="3133" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3133"></span><span class="heading-before"><span class="heading-label">5.1.7.1</span>.&#8194;</span><span data-line="3133"></span>Proof</h5>
<p class="p noindent para-continue" data-line="3134"><span data-line="3134"></span>Introducing variables:
</p>
<div class="mathpre para-block input-mathpre" data-line="3135"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{},\xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3138"><span data-line="3138"></span>and hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3139"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3142"><span data-line="3142"></span>we wish to provethe goal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3143"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \mathkw{pop}~\xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3146"><span data-line="3146"></span>By inversion on <span data-line="3146"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="3146"></span> we have the following case-analysis:
</p><h6 id="sec-case-entails-empty-environment" class="h5" data-line="3148" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3148"></span>Case Entails-Empty-Environment</h6>
<p class="p noindent para-continue" data-line="3149"><span data-line="3149"></span>We have hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3150"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models ([],[],\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3153"><span data-line="3153"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3154"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \mathkw{pop}~([],[],\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3157"><span data-line="3157"></span>which by definition of <span data-line="3157"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{pop}$</span></span><span data-line="3157"></span> we may rewrite as:
</p>
<div class="mathpre para-block input-mathpre" data-line="3158"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models ([],[],\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3161"><span data-line="3161"></span>and <span data-line="3161"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="3161"></span> proves <span data-line="3161"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3161"></span>.
</p><h6 id="sec-case-entails-environment" class="h5" data-line="3163" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3163"></span>Case Entails-Environment</h6>
<p class="p noindent para-continue" data-line="3164"><span data-line="3164"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3165"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models ((\mathid{E},\epsilon),(\Delta{},\delta),\nu),\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{E},\Delta{},\nu),\sigma\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3170"><span data-line="3170"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3171"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \mathkw{pop}~((\mathid{E},\epsilon),(\Delta{},\delta),\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3174"><span data-line="3174"></span>which by definition of <span data-line="3174"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{pop}$</span></span><span data-line="3174"></span> we may rewrite as:
</p>
<div class="mathpre para-block input-mathpre" data-line="3175"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{E},\Delta{},\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3178"><span data-line="3178"></span>and <span data-line="3178"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3178"></span> proves <span data-line="3178"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3178"></span>.
</p><h4 id="sec-lemma-mathkwassign_lv-sustains-entailment" class="h3" data-line="3180" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3180"></span><span class="heading-before"><span class="heading-label">5.1.8</span>.&#8194;</span><span data-line="3180"></span>Lemma <span data-line="3180"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{assign\_lv}$</span></span><span data-line="3180"></span> Sustains Entailment</h4>
<p class="p noindent para-continue" data-line="3182"><span data-line="3182"></span>Need better definition<span data-line="3182"></span>&#8230;<span data-line="3182"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="3184"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_6:~\forall \Sigma{},\Delta{},\Gamma{},\xi,\sigma,\mathid{lv},\mathid{v},\sigma&#39;,\mathid{sig},\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},\mathid{d}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{lv}~:~\tau{},\mathid{d}~\Rightarrow \mathkw{assign\_lvalue}~\,~\xi \,~\sigma \,~\mathid{lv}~\,~\mathid{v}~=~\sigma&#39;,\mathid{sig}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="3189" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3189"></span><span class="heading-before"><span class="heading-label">5.1.8.1</span>.&#8194;</span><span data-line="3189"></span>Proof</h5>
<p class="p noindent" data-line="3191"><span data-line="3191"></span>TODO!
</p><h4 id="sec-lemmas--state-is-monotonic" class="h3" data-line="3193" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3193"></span><span class="heading-before"><span class="heading-label">5.1.9</span>.&#8194;</span><span data-line="3193"></span>Lemmas: State is Monotonic</h4>
<p class="p noindent" data-line="3195"><span data-line="3195"></span>These are used to prove statement type preservation.
</p><h5 id="sec-expression-monotonicity" class="h4" data-line="3197" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3197"></span><span class="heading-before"><span class="heading-label">5.1.9.1</span>.&#8194;</span><span data-line="3197"></span>Expression Monotonicity</h5>
<div class="mathpre para-block input-mathpre" data-line="3198"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_7:\forall \xi,\sigma,\mathid{e},\xi&#39;,\sigma&#39;,\mathid{sig},\mathid{v}\\
\langle \xi,~\sigma,~\mathid{e}~\rangle \Downarrow_\mathid{e}~\langle \xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}~\rangle \Rightarrow \sigma \subseteq \sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h6 id="sec-proof" class="h5" data-line="3203" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3203"></span>Proof</h6>
<p class="p noindent" data-line="3205"><span data-line="3205"></span>TODO!
</p><h5 id="sec-corollary--mathkwlv_of_expr-is-monotonic" class="h4" data-line="3207" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3207"></span><span class="heading-before"><span class="heading-label">5.1.9.2</span>.&#8194;</span><span data-line="3207"></span>Corollary: <span data-line="3207"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{lv\_of\_expr}$</span></span><span data-line="3207"></span> is Monotonic</h5>
<div class="mathpre para-block input-mathpre" data-line="3208"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{C}_1:~\forall \xi,\xi&#39;,\sigma,\sigma&#39;,\mathid{e},\mathid{sig},\tau{},\mathid{lv},\\
\mathkw{lv\_of\_expr}~\sigma&#39;,~\mathid{sig},~\mathkw{lvalue}~\tau{}~\mathid{lv})~\Rightarrow \sigma \subseteq \sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h6 id="sec-proof" class="h5" data-line="3213" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3213"></span>Proof</h6>
<p class="p noindent" data-line="3215"><span data-line="3215"></span>TODO!
</p><h5 id="sec-corollary--copyin-is-monotonic" class="h4" data-line="3217" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3217"></span><span class="heading-before"><span class="heading-label">5.1.9.3</span>.&#8194;</span><span data-line="3217"></span>Corollary: Copyin is Monotonic</h5>
<div class="mathpre para-block input-mathpre" data-line="3218"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{C}_2:~\xi_{\mathid{closure}},~\sigma,~\mathid{x},~\tau{},~\mathid{d},~\mathid{v},~\xi_{\mathid{closure}}&#39;,\sigma&#39;,\\
\mathkw{copyin}~\,~\xi_{\mathid{closure}}~\,~\sigma (\mathid{x}:\tau{},\mathid{d})~\mathid{v}~=~\xi_{\mathid{closure}}&#39;,\sigma&#39;~\Rightarrow \sigma \subseteq \sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h6 id="sec-proof" class="h5" data-line="3223" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3223"></span>Proof</h6>
<p class="p noindent" data-line="3225"><span data-line="3225"></span>TODO!
</p><h5 id="sec-statement-monotonicity" class="h4" data-line="3227" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3227"></span><span class="heading-before"><span class="heading-label">5.1.9.4</span>.&#8194;</span><span data-line="3227"></span>Statement Monotonicity</h5>
<div class="mathpre para-block input-mathpre" data-line="3228"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_8:~\forall \xi,\sigma,\mathid{s},\xi&#39;,\sigma&#39;,\mathid{sig},\\
\langle{}\xi,~\sigma,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}~\Rightarrow \sigma \subseteq \sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof" class="h4" data-line="3233" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3233"></span><span class="heading-before"><span class="heading-label">5.1.9.5</span>.&#8194;</span><span data-line="3233"></span>Proof</h5>
<p class="p noindent" data-line="3236"><span data-line="3236"></span>TODO!
</p><h4 id="sec-lemma--extending-delta-preserves-entailment" class="h3" data-line="3238" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3238"></span><span class="heading-before"><span class="heading-label">5.1.10</span>.&#8194;</span><span data-line="3238"></span>Lemma: Extending <span data-line="3238"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Delta$</span></span><span data-line="3238"></span> Preserves Entailment</h4>
<p class="p noindent" data-line="3240"><span data-line="3240"></span>TODO: Is this valid?
</p>
<p class="p indent para-continue" data-line="3242"><span data-line="3242"></span>The validity of this lemma may heavily depend upon how
reliant the typing judgment for values is upon the typing contexts.
</p>
<div class="mathpre para-block input-mathpre" data-line="3245"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_9:~\forall \xi,\sigma,\Sigma{},\Delta{},\mathid{X},\rho,\\
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{}[\mathid{X}~\to \rho],\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof-" class="h4" data-line="3250" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3250"></span><span class="heading-before"><span class="heading-label">5.1.10.1</span>.&#8194;</span><span data-line="3250"></span>Proof:</h5>
<p class="p noindent" data-line="3252"><span data-line="3252"></span>TODO!
</p><h4 id="sec-lemma--extending-sigma-preserves-entailment" class="h3" data-line="3254" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3254"></span><span class="heading-before"><span class="heading-label">5.1.11</span>.&#8194;</span><span data-line="3254"></span>Lemma: Extending <span data-line="3254"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma$</span></span><span data-line="3254"></span> Preserves Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3255"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{10}:~\forall \Sigma{},\Delta{},\Gamma{},\xi,\sigma,\mathid{decl},\\
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{}[\mathid{decl}],\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-lemma-extending-sigma-preserves-per-scope-entailment" class="h3" data-line="3260" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3260"></span><span class="heading-before"><span class="heading-label">5.1.12</span>.&#8194;</span><span data-line="3260"></span>Lemma Extending <span data-line="3260"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma$</span></span><span data-line="3260"></span> Preserves Per-Scope Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3261"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{11}:~\forall \Sigma{},\Delta{},\Gamma{},\epsilon,\sigma,\mathid{decl},\\
\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma \Rightarrow \Sigma{}[\mathid{decl}],\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof-" class="h4" data-line="3266" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3266"></span><span class="heading-before"><span class="heading-label">5.1.12.1</span>.&#8194;</span><span data-line="3266"></span>Proof:</h5>
<p class="p noindent" data-line="3268"><span data-line="3268"></span>TODO!
</p><h4 id="sec-sketchy-lemma-extending-p-preserves-entailment" class="h3" data-line="3270" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3270"></span><span class="heading-before"><span class="heading-label">5.1.13</span>.&#8194;</span><span data-line="3270"></span>Sketchy? Lemma Extending <span data-line="3270"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$P$</span></span><span data-line="3270"></span> Preserves Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3271"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{12}:~\forall \Sigma{},\Delta{},\Gamma{},\mathid{P},\mathid{E},\nu,\sigma,\mathid{decl}\\
\Sigma{},\Delta{},\Gamma{}~\models (\mathid{P},\mathid{E},\Delta{},\nu),\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models (\mathid{P}[\mathid{decl}],\mathid{E},\Delta{},\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof-" class="h4" data-line="3276" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3276"></span><span class="heading-before"><span class="heading-label">5.1.13.1</span>.&#8194;</span><span data-line="3276"></span>Proof:</h5>
<p class="p noindent" data-line="3277"><span data-line="3277"></span>TODO!
</p><h4 id="sec-lemma-extending-g-xi-sigma-preserves-entailment" class="h3" data-line="3279" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3279"></span><span class="heading-before"><span class="heading-label">5.1.14</span>.&#8194;</span><span data-line="3279"></span>Lemma Extending <span data-line="3279"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma{}, \, \xi, \, \sigma$</span></span><span data-line="3279"></span> Preserves Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3280"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{13}:~\forall \Sigma{},\Delta{},\Gamma{},\mathid{v},\tau{},\xi,\sigma,\mathid{x},\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-proof-" class="h4" data-line="3285" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3285"></span><span class="heading-before"><span class="heading-label">5.1.14.1</span>.&#8194;</span><span data-line="3285"></span>Proof:</h5>
<p class="p noindent para-continue" data-line="3286"><span data-line="3286"></span>Introducing variables:
</p>
<div class="mathpre para-block input-mathpre" data-line="3287"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{},\mathid{v},\tau{},\xi,\sigma,\mathid{x}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3290"><span data-line="3290"></span>and hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3291"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3295"><span data-line="3295"></span>we wish to prove the goal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3296"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3299"><span data-line="3299"></span>By definition of <span data-line="3299"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{new} \, \xi \, \sigma \, x ((\tau{}) \, v)$</span></span><span data-line="3299"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="3300"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}~=~\xi&#39;,~\sigma&#39;\\
\exists \ell,\\
\xi&#39;~=~\xi,(\mathid{x}=\ell)~=~\mathid{P},(\mathid{E},\epsilon(\mathid{x}=\ell)),\Delta{},\nu\\
\sigma&#39;~=~\sigma[\mathid{v}~/~\ell]
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3306"><span data-line="3306"></span>By inversion on <span data-line="3306"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3306"></span>, we have the following case-analysis:
</p><h6 id="sec-case-entails-empty-environment" class="h5" data-line="3308" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3308"></span>Case Entails-Empty-Environment</h6>
<p class="p noindent para-continue" data-line="3309"><span data-line="3309"></span>We have hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3310"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{P},[],\Delta{},\nu),\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3314"><span data-line="3314"></span>and we wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3315"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},([],(\mathid{x}=\ell)),\Delta{},\nu),\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3318"><span data-line="3318"></span>Thus we may construct the rule-instance:
</p>
<p class="p indent" data-line="3320"><span data-line="3320"></span>Sketchy: there needs to be a typing judgment for values,
so we can show extending <span data-line="3321"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="3321"></span> preserves the typing judgment<span data-line="3321"></span>&#8230;<span data-line="3321"></span>
</p>
<div class="infer" data-line="3322">
<div class="mathpre infer para-block input-mathpre" data-line="3323"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~[],\sigma&#39;\\
\Gamma{}[\mathid{x}:\tau{}](\mathid{x})~=~\tau{}\\
\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\vdash{}~\sigma&#39;(\ell)~:~\tau{}}{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models_{\mathid{scope}}~([],(\mathid{x}=\ell)),\sigma&#39;}{\textsc{Entails-Variable-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3329"><span data-line="3329"></span>as well as:
</p>
<div class="infer" data-line="3330">
<div class="mathpre infer para-block input-mathpre" data-line="3331"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},[],\Delta{},\nu),\sigma&#39;\\
\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models_{\mathid{scope}}~([],(\mathid{x}=\ell)),\sigma&#39;}{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},([],(\mathid{x}=\ell)),\Delta{},\nu),\sigma&#39;}{\textsc{Entails-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3336"><span data-line="3336"></span>and we have proved <span data-line="3336"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="3336"></span>.
</p><h6 id="sec-case-entails-environment" class="h5" data-line="3338" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3338"></span>Case Entails-Environment</h6>
<p class="p noindent para-continue" data-line="3339"><span data-line="3339"></span>We have hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3340"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{P},(\mathid{E},\epsilon),\Delta{},\nu),\sigma\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{P},\mathid{E},\Delta{},\nu),\sigma\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3346"><span data-line="3346"></span>and we wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3347"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},(\mathid{E},(\epsilon,(\mathid{x}=\ell))),\Delta{},\nu),\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3350"><span data-line="3350"></span>Sketchy, need to show extending <span data-line="3350"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="3350"></span> is ok here<span data-line="3350"></span>&#8230;<span data-line="3350"></span>
</p>
<p class="p indent para-continue" data-line="3352"><span data-line="3352"></span>Via applications <span data-line="3352"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_0 \, (\sigma \subseteq \sigma&#39;) \, H_2$</span></span><span data-line="3352"></span> and <span data-line="3352"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{0_1} \, (\sigma \subseteq \sigma&#39;) \, H_3$</span></span><span data-line="3352"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3353"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},\mathid{E},\Delta{},\nu),\sigma&#39;\\
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models_{\mathid{scope}}~\epsilon,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3357"><span data-line="3357"></span>Thus we may construct the rule-instance:
</p>
<div class="infer" data-line="3358">
<div class="mathpre infer para-block input-mathpre" data-line="3359"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models_{\mathid{scope}}~\epsilon,\sigma&#39;\\
\Gamma{}[\mathid{x}:\tau{}](\mathid{x})~=~\tau{},\mathid{d}\\
\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\vdash{}~\sigma&#39;(\ell)~:~\tau{},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models_{\mathid{scope}}~(\epsilon,(\mathid{x}=\ell)),\sigma&#39;}{\textsc{Entails-Variable-Scope}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3365"><span data-line="3365"></span>as well as:
</p>
<div class="infer" data-line="3366">
<div class="mathpre infer para-block input-mathpre" data-line="3367"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},\mathid{E},\Delta{},\nu),\sigma&#39;\\
\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models_{\mathid{scope}}~(\epsilon,(\mathid{x}=\ell)),\sigma&#39;}{\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models (\mathid{P},(\mathid{E},(\epsilon,(\mathid{x}=\ell))),\Delta{},\nu),\sigma&#39;}{\textsc{Entails-Environment}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3373"><span data-line="3373"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\square$</span></span><span data-line="3373"></span>.
</p><h4 id="sec-lemma--mathkwinit_val-is-sound" class="h3" data-line="3375" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3375"></span><span class="heading-before"><span class="heading-label">5.1.15</span>.&#8194;</span><span data-line="3375"></span>Lemma: <span data-line="3375"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{init\_val}$</span></span><span data-line="3375"></span> is Sound</h4>
<div class="mathpre para-block input-mathpre" data-line="3376"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{14}:~\forall \Sigma{},\Delta{},\Gamma{},\xi,\sigma,\tau{},\\
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{init\_val}~\,~\xi \,~\tau{}~:~\mathid{t}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-lemma--extending-gamma-with-previously-unbound-name-preserves-entailment" class="h3" data-line="3381" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3381"></span><span class="heading-before"><span class="heading-label">5.1.16</span>.&#8194;</span><span data-line="3381"></span>Lemma: Extending <span data-line="3381"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma$</span></span><span data-line="3381"></span> with Previously Unbound Name Preserves Entailment</h4>
<div class="mathpre para-block input-mathpre" data-line="3382"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_{15}:~\Sigma{},\Delta{},\Gamma{},\xi,\sigma,\mathid{x},\tau{}\\
\mathid{x}~\notin \Gamma{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div><h3 id="sec-type-soundness-of-expressions" class="h2" data-line="3387" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3387"></span><span class="heading-before"><span class="heading-label">5.2</span>.&#8194;</span><span data-line="3387"></span>Type Soundness of Expressions</h3><h4 id="sec-expression-type-preservation-theorem-statement" class="h3" data-line="3389" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3389"></span><span class="heading-before"><span class="heading-label">5.2.1</span>.&#8194;</span><span data-line="3389"></span>Expression Type Preservation Theorem Statement</h4>
<div id="type-preservation-expr" class="theorem" data-line="3390" style="display:block;margin:1ex 0pt">
<p class="p noindent para-continue" data-line="3391"><span data-line="3391"></span><span class="theorem-before"><strong class="strong-star2">Theorem&#160;<span class="theorem-label">1</span>.</strong> <span class="theorem-caption">(<span style="font-style:italic">Evaluation preserves expression types</span>)</span><br>
</span><span data-line="3391"></span>Let <span data-line="3391"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle\xi,\sigma,e\rangle$</span></span><span data-line="3391"></span> be an initial configuration
and take contexts <span data-line="3392"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma,\Delta,\Xi,\Gamma$</span></span><span data-line="3392"></span>. Suppose that
the configuration is safe in the context, so <span data-line="3393"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi,\Gamma{}\vdash{}\xi$</span></span><span data-line="3393"></span>,
<span data-line="3394"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi\vdash{}\sigma$</span></span><span data-line="3394"></span>, and <span data-line="3394"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma,\Delta,\Gamma\vdash{}e:\tau{}{}$</span></span><span data-line="3394"></span>.
If there is a final configuration <span data-line="3395"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle\xi&#39;,\sigma&#39;,sig,v\rangle$</span></span><span data-line="3395"></span> such that
</p>
<div class="mathpre para-block input-mathpre" data-line="3396"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\langle{}\xi,\sigma,\mathid{e}\rangle{}\Downarrow_{\mathid{e}}\langle{}\xi&#39;,\sigma&#39;,\mathid{sig},\mathid{v}\rangle{},
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3399"><span data-line="3399"></span>then there exists an extension <span data-line="3399"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39; \supseteq \Xi$</span></span><span data-line="3399"></span> of the store
typing such that
</p>
<ul class="ul list-star compact" data-line="3402">
<li class="li ul-li list-star-li compact-li" data-line="3402"><span data-line="3402"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39; \vdash{} v:\tau{}{}$</span></span><span data-line="3402"></span>,
</li>
<li class="li ul-li list-star-li compact-li" data-line="3403"><span data-line="3403"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39;,\Gamma{}\vdash{}\xi&#39;$</span></span><span data-line="3403"></span>, and
</li>
<li class="li ul-li list-star-li compact-li" data-line="3404"><span data-line="3404"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39;\vdash{}\sigma&#39;$</span></span><span data-line="3404"></span>.</li></ul></div><h4 id="sec-expression-type-preservation-proof" class="h3" data-line="3407" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3407"></span><span class="heading-before"><span class="heading-label">5.2.2</span>.&#8194;</span><span data-line="3407"></span>Expression Type Preservation Proof</h4>
<p class="p noindent" data-line="3408"><span data-line="3408"></span>By induction on <span data-line="3408"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle{}\xi,\sigma,e\rangle{}\Downarrow_{e}\langle{}\xi&#39;,\sigma&#39;,sig,v\rangle{}$</span></span><span data-line="3408"></span>.
</p><h5 id="sec-case-bool-true" class="h4" data-line="3410" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3410"></span><span class="heading-before"><span class="heading-label">5.2.2.1</span>.&#8194;</span><span data-line="3410"></span>Case Bool-True</h5>
<p class="p noindent para-continue" data-line="3411"><span data-line="3411"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3412"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\mathkw{none}\\
\langle{}\xi,~\sigma,~\mathkw{true}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3417"><span data-line="3417"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3418"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3421"><span data-line="3421"></span>Our subgoal is true by assumption.
</p><h5 id="sec-case-bool-false" class="h4" data-line="3423" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3423"></span><span class="heading-before"><span class="heading-label">5.2.2.2</span>.&#8194;</span><span data-line="3423"></span>Case Bool-False</h5>
<p class="p noindent para-continue" data-line="3424"><span data-line="3424"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3425"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},~\mathkw{none}\\
\langle{}\xi,~\sigma,~\mathkw{false}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3430"><span data-line="3430"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3431"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3434"><span data-line="3434"></span>Our subgoal is true by assumption.
</p><h5 id="sec-case-int-constant" class="h4" data-line="3436" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3436"></span><span class="heading-before"><span class="heading-label">5.2.2.3</span>.&#8194;</span><span data-line="3436"></span>Case Int-Constant</h5>
<p class="p noindent para-continue" data-line="3437"><span data-line="3437"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3438"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{a}~:~\mathkw{int},~\mathkw{none}\\
\langle{}\xi,~\sigma,~\mathid{a}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{a}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3443"><span data-line="3443"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3444"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{a}~:~\mathkw{int},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3447"><span data-line="3447"></span>Our subgoal is true by assumption.
</p><h5 id="sec-case-unsigned-int-constant" class="h4" data-line="3449" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3449"></span><span class="heading-before"><span class="heading-label">5.2.2.4</span>.&#8194;</span><span data-line="3449"></span>Case Unsigned-Int-Constant</h5>
<p class="p noindent para-continue" data-line="3450"><span data-line="3450"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3451"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{nwa}~:~\mathkw{bit}\langle{}\mathid{a}\rangle{},~\mathkw{none}\\
\langle{}\xi,~\sigma,~\mathid{nwa}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{a}_\mathid{u}^\mathid{n}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3456"><span data-line="3456"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3457"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{nwa}~:~\mathkw{bit}\langle{}\mathid{a}\rangle{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3460"><span data-line="3460"></span>Our subgoal is true by assumption.
</p><h5 id="sec-case-signed-int-constant" class="h4" data-line="3462" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3462"></span><span class="heading-before"><span class="heading-label">5.2.2.5</span>.&#8194;</span><span data-line="3462"></span>Case Signed-Int-Constant</h5>
<p class="p noindent para-continue" data-line="3463"><span data-line="3463"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3464"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{nsa}~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathkw{none}\\
\langle{}\xi,~\sigma,~\mathid{nsa}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{a}_\mathid{s}^\mathid{n}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3469"><span data-line="3469"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3470"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{nsa}~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3473"><span data-line="3473"></span>Our subgoal is true by assumption.
</p><h5 id="sec-case-string" class="h4" data-line="3475" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3475"></span><span class="heading-before"><span class="heading-label">5.2.2.6</span>.&#8194;</span><span data-line="3475"></span>Case String</h5>
<p class="p noindent para-continue" data-line="3476"><span data-line="3476"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3477"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{u}~:~\mathkw{string},~\mathkw{none}\\
\langle{}\xi,~\sigma,~\mathid{u}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{u}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3482"><span data-line="3482"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="3483"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{u}~:~\mathkw{string},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3486"><span data-line="3486"></span>Our subgoal is true by assumption.
</p><h5 id="sec-case-var" class="h4" data-line="3488" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3488"></span><span class="heading-before"><span class="heading-label">5.2.2.7</span>.&#8194;</span><span data-line="3488"></span>Case Var</h5>
<p class="p noindent" data-line="3489"><span data-line="3489"></span>We need to show that <span data-line="3489"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle{}\xi,\sigma,\mathkw{sig\_continue},(\sigma \circ\xi)(x)\rangle{}$</span></span><span data-line="3490"></span> is safe under some expansion <span data-line="3490"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39;$</span></span><span data-line="3490"></span> of <span data-line="3490"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi$</span></span><span data-line="3490"></span>. This rule
leaves <span data-line="3491"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="3491"></span> and <span data-line="3491"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma$</span></span><span data-line="3491"></span> unchanged, so things will work out with
<span data-line="3492"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39;=\Xi$</span></span><span data-line="3492"></span>. Induction on <span data-line="3492"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi \vdash{} \xi:G$</span></span><span data-line="3492"></span> shows that <span data-line="3492"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi(\xi(x))=\tau$</span></span><span data-line="3492"></span>,
and <span data-line="3493"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi \vdash{} \sigma$</span></span><span data-line="3493"></span> allows us to conclude <span data-line="3493"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\sigma(\xi(x)):t$</span></span><span data-line="3493"></span>.
</p><h5 id="sec-case-var-top" class="h4" data-line="3495" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3495"></span><span class="heading-before"><span class="heading-label">5.2.2.8</span>.&#8194;</span><span data-line="3495"></span>Case Var-Top</h5>
<p class="p noindent" data-line="3496"><span data-line="3496"></span>As in the ordinary variable case.
</p><h5 id="sec-case-array-access" class="h4" data-line="3498" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3498"></span><span class="heading-before"><span class="heading-label">5.2.2.9</span>.&#8194;</span><span data-line="3498"></span>Case Array-Access</h5>
<p class="p noindent para-continue" data-line="3499"><span data-line="3499"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3500"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1[\mathid{e}_2]~:~\tau{}_1,~\mathid{d}_1\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}[\mathid{e}_{2}]\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3505"><span data-line="3505"></span>and inductive hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3506"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1[],~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\dots,\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}},\dots,\mathid{n}_{\mathid{size}},\mathid{n}_{\mathid{next}})\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~(\dots,\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}},\dots,\mathid{n}_{\mathid{size}},\mathid{n}_{\mathid{next}})~:~\tau{}_1[],~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~~:~\tau{}_2,~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\mathid{sigma}&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~~:~\tau{}_2,~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3511"><span data-line="3511"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3512"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}}~:~\tau{}_1,~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3517"><span data-line="3517"></span>By inversion on <span data-line="3517"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3517"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3518"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1[],~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~~:~\tau{}_2,~\mathid{d}_2\\
\mathid{H}_5:~\mathkw{numeric}(\tau{}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3524"><span data-line="3524"></span>By inversion on <span data-line="3524"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="3524"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3525"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\dots,\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}},\dots,\mathid{n}_{\mathid{size}},\mathid{n}_{\mathid{next}})\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3530"><span data-line="3530"></span>Via the application <span data-line="3530"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="3530"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3531"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\dots,\mathid{v}_{(\mathkw{extract\_num}~\mathid{v})~\%~\mathid{n}_{\mathid{size}}},\dots,\mathid{n}_{\mathid{size}},\mathid{n}_{\mathid{next}})~:~\tau{}_1[],~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3536"><span data-line="3536"></span>Sketchy: By inversion on <span data-line="3536"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_9$</span></span><span data-line="3536"></span> we may conclude <span data-line="3536"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3536"></span>.
</p>
<p class="p indent para-continue" data-line="3538"><span data-line="3538"></span>Via the application <span data-line="3538"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="3538"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3539"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,~\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~~:~\tau{}_2,~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3543"><span data-line="3543"></span>thus by assumption <span data-line="3543"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="3543"></span> subgoal <span data-line="3543"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3543"></span> is proven.
</p><h5 id="sec-case-bitslice" class="h4" data-line="3545" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3545"></span><span class="heading-before"><span class="heading-label">5.2.2.10</span>.&#8194;</span><span data-line="3545"></span>Case Bitslice</h5>
<p class="p noindent para-continue" data-line="3546"><span data-line="3546"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3547"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}[\mathid{n}_1:\mathid{n}_2]~:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_{1}[\mathid{e}_2:\mathid{e}_3]~:~\mathid{bit}\langle{}\mathid{n}_1~-~\mathid{n}_2~+~1\rangle{},~\mathid{d}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}[\mathid{n}_1:\mathid{n}_2]\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\mathkw{bitslice}~(\mathkw{extract\_num}~\mathid{v}))_\mathid{u}^{(\mathid{n}_{1}-\mathid{n}_{2}+1)}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3552"><span data-line="3552"></span>and inductive hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3553"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3556"><span data-line="3556"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3557"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathkw{bitslice}~(\mathkw{extract\_num}~\mathid{v}))_\mathid{u}^{(\mathid{n}_{1}-\mathid{n}_{2}+1)}~:~\mathid{bit}\langle{}\mathid{n}_{1}~-~\mathid{n}_{2}~+~1\rangle{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3562"><span data-line="3562"></span>By inversion on <span data-line="3562"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3562"></span> and <span data-line="3562"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="3562"></span> respectively we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3563"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}\\
\mathid{H}_4:~~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3568"><span data-line="3568"></span>Via the application <span data-line="3568"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_4$</span></span><span data-line="3568"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3569"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3573"><span data-line="3573"></span>By <span data-line="3573"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="3573"></span>, subgoal <span data-line="3573"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3573"></span> holds.
</p>
<p class="p indent" data-line="3575"><span data-line="3575"></span>Sketchy: By <span data-line="3575"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="3575"></span> we know <span data-line="3575"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$v$</span></span><span data-line="3575"></span> is numeric and thus <span data-line="3575"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3575"></span> holds.
</p><h5 id="sec-case-list-expression" class="h4" data-line="3577" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3577"></span><span class="heading-before"><span class="heading-label">5.2.2.11</span>.&#8194;</span><span data-line="3577"></span>Case List-Expression</h5>
<p class="p noindent para-continue" data-line="3578"><span data-line="3578"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3579"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{e}}~\}~:~\{~\overline{\tau}~\},~\mathid{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\{\overline{\mathid{e}}\}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~(\overline{\mathid{v}})\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3584"><span data-line="3584"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3585"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:~\tau,~\mathid{none}}~\Rightarrow \langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\overline{\mathid{v}}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{v}:~\tau,~\mathid{none}}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3588"><span data-line="3588"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3589"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{v}}~\}~:~\{~\overline{\tau}~\},~\mathid{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3593"><span data-line="3593"></span>By inversion on <span data-line="3593"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3593"></span> and <span data-line="3593"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="3593"></span> we respectively get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3594"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}:~\tau,~\mathid{none}}\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\overline{\mathid{v}}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3599"><span data-line="3599"></span>Via the application <span data-line="3599"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_4$</span></span><span data-line="3599"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3600"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{v}:~\tau,~\mathid{none}}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3604"><span data-line="3604"></span>By <span data-line="3604"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="3604"></span>, subgoal <span data-line="3604"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3604"></span> holds.
</p>
<p class="p indent" data-line="3606"><span data-line="3606"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3607">
<div class="mathpre infer para-block input-mathpre" data-line="3608"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{v}:~\tau,~\mathid{none}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{v}}~\}~:~\{~\overline{\tau}~\},~\mathid{none}}{\textsc{List-Expression}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3612"><span data-line="3612"></span>we prove subgoal <span data-line="3612"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3612"></span>.
</p><h5 id="sec-case-record" class="h4" data-line="3614" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3614"></span><span class="heading-before"><span class="heading-label">5.2.2.12</span>.&#8194;</span><span data-line="3614"></span>Case Record</h5>
<p class="p noindent para-continue" data-line="3615"><span data-line="3615"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3616"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\{~\overline{\mathid{f}=\mathid{e}}~\}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\{~\overline{\mathid{f}=\mathid{v}}~\}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{f}~=~\mathid{e}}~\}~:~\{~\overline{\mathid{f}~:~\tau{}}~\}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3621"><span data-line="3621"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3622"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}~:~\tau{}}~\Rightarrow \langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\overline{\mathid{v}}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{v}~:~\tau{}}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3625"><span data-line="3625"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3626"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{f}=\mathid{v}}~\}~:~\{~\overline{\mathid{f}~:~\tau{}}~\}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3630"><span data-line="3630"></span>By inversion on <span data-line="3630"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3630"></span> and <span data-line="3630"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="3630"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3631"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{e}~:~\tau{}}\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\overline{\mathid{e}}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\overline{\mathid{v}}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3635"><span data-line="3635"></span>Under the aegis of application <span data-line="3635"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_4$</span></span><span data-line="3635"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3636"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\xi&#39;,\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{v}~:~\tau{}}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3640"><span data-line="3640"></span>and <span data-line="3640"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="3640"></span> proves <span data-line="3640"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3640"></span>.
We may construct the rule-instance:
</p>
<div class="infer" data-line="3642">
<div class="mathpre infer para-block input-mathpre" data-line="3643"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\overline{\mathid{v}~:~\tau{}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\{~\overline{\mathid{f}~=~\mathid{v}}~\}~:~\{~\overline{\mathid{v}~:~\tau{}}~\}}{\textsc{Record}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3647"><span data-line="3647"></span>which proves <span data-line="3647"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3647"></span>.
</p><h5 id="sec-case-unary-op" class="h4" data-line="3649" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3649"></span><span class="heading-before"><span class="heading-label">5.2.2.13</span>.&#8194;</span><span data-line="3649"></span>Case Unary-Op</h5>
<p class="p noindent para-continue" data-line="3650"><span data-line="3650"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3651"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\diamond \mathid{e}~:~\tau{},~\mathid{d}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\diamond \mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\diamond \mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3656"><span data-line="3656"></span>and inductive hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="3657"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3660"><span data-line="3660"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3661"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\diamond \mathid{v}~:~\tau{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3666"><span data-line="3666"></span>By inversion on <span data-line="3666"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3666"></span> and <span data-line="3666"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="3666"></span> we get the following subcases:
</p><h6 id="sec-subcase-not" class="h5" data-line="3668" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3668"></span>Subcase Not</h6>
<p class="p noindent para-continue" data-line="3669"><span data-line="3669"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3670"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~!\mathid{e}~:~\mathkw{bool},~\mathid{d}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~!\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~!\mathid{v}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bool},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bool},~\mathid{d}\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bool},~\mathid{d}\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3678"><span data-line="3678"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3679"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~!\mathid{v}~:~\mathkw{bool},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3683"><span data-line="3683"></span>Via the application <span data-line="3683"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_4$</span></span><span data-line="3683"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3684"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bool},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3688"><span data-line="3688"></span>By <span data-line="3688"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="3688"></span>, subgoal <span data-line="3688"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3688"></span> is proven.
</p>
<p class="p indent" data-line="3690"><span data-line="3690"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3691">
<div class="mathpre infer para-block input-mathpre" data-line="3692"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bool},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~!\mathid{v}~:~\mathkw{bool},~\mathid{d}}{\textsc{Not}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3696"><span data-line="3696"></span>we prove subgoal <span data-line="3696"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3696"></span>.
</p><h6 id="sec-subcase-bitwise-not" class="h5" data-line="3698" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3698"></span>Subcase Bitwise-Not</h6>
<p class="p noindent para-continue" data-line="3699"><span data-line="3699"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3700"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~{\texttt{\textasciitilde}\mathid{e}}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~!\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~!\mathid{v}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3708"><span data-line="3708"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3709"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~{\texttt{\textasciitilde}\mathid{v}}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3713"><span data-line="3713"></span>Via the application <span data-line="3713"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_4$</span></span><span data-line="3713"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3714"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3718"><span data-line="3718"></span>By <span data-line="3718"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="3718"></span>, subgoal <span data-line="3718"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3718"></span> is proven.
</p>
<p class="p indent" data-line="3720"><span data-line="3720"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3721">
<div class="mathpre infer para-block input-mathpre" data-line="3722"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~{\texttt{\textasciitilde}\mathid{v}}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}}{\textsc{Bitwise-Not}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3726"><span data-line="3726"></span>we prove subgoal <span data-line="3726"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3726"></span>.
</p><h6 id="sec-subcase-negate" class="h5" data-line="3728" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3728"></span>Subcase Negate</h6>
<p class="p noindent para-continue" data-line="3729"><span data-line="3729"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3730"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~-\mathid{e}~:~\tau{},~\mathid{d}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~!\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~!\mathid{v}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathid{d}\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},~\mathid{d}\\
\mathid{H}_7:~\mathkw{numeric}(\tau{})\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3739"><span data-line="3739"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3740"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~-\mathid{v}~:~\tau{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3744"><span data-line="3744"></span>Via the application <span data-line="3744"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_4$</span></span><span data-line="3744"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3745"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,~\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3749"><span data-line="3749"></span>By <span data-line="3749"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="3749"></span>, subgoal <span data-line="3749"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3749"></span> is proven.
</p>
<p class="p indent" data-line="3751"><span data-line="3751"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3752">
<div class="mathpre infer para-block input-mathpre" data-line="3753"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathid{d}\\
\mathkw{numeric}(\tau{})}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~-\mathid{v}~:~\tau{},~\mathid{d}}{\textsc{Negate}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3758"><span data-line="3758"></span>we prove subgoal <span data-line="3758"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3758"></span>.
</p><h5 id="sec-case-binary-op" class="h4" data-line="3760" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3760"></span><span class="heading-before"><span class="heading-label">5.2.2.14</span>.&#8194;</span><span data-line="3760"></span>Case Binary-Op</h5>
<p class="p noindent para-continue" data-line="3761"><span data-line="3761"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3762"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\tau{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3767"><span data-line="3767"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3768"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1,~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{}_1,~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{}_2,~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{}_2,~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3772"><span data-line="3772"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3773"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\tau{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3778"><span data-line="3778"></span>By inversion on <span data-line="3778"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="3778"></span> and <span data-line="3778"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="3778"></span> we get the following subcases:
</p><h6 id="sec-subcase-bool-binary-op" class="h5" data-line="3780" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3780"></span>Subcase Bool-Binary-Op</h6>
<p class="p noindent para-continue" data-line="3781"><span data-line="3781"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3782"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bool},~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bool},~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bool},~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bool},~\mathid{d}_2\\
\mathid{H}_5:~\diamond \in \{~\&amp;\&amp;,~||~\}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3794"><span data-line="3794"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3795"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3800"><span data-line="3800"></span>Via the application <span data-line="3800"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="3800"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3801"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bool},~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3806"><span data-line="3806"></span>Via the application <span data-line="3806"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="3806"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3807"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bool},~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3811"><span data-line="3811"></span>By <span data-line="3811"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="3811"></span> we prove subgoal <span data-line="3811"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3811"></span>.
</p>
<p class="p indent" data-line="3813"><span data-line="3813"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3814">
<div class="mathpre infer para-block input-mathpre" data-line="3815"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bool},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bool},~\mathid{d}_2\\
\diamond \in \{~\&amp;\&amp;,~||~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Bool-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3821"><span data-line="3821"></span>we prove subgoal <span data-line="3821"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3821"></span>.
</p><h6 id="sec-subcase-int-binary-op" class="h5" data-line="3823" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3823"></span>Subcase Int-Binary-Op</h6>
<p class="p noindent para-continue" data-line="3824"><span data-line="3824"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3825"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{int},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{int},~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{int},~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{int},~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{int},~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{int},~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{int},~\mathid{d}_2\\
\mathid{H}_5:~\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,~/,~\%~\}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3837"><span data-line="3837"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3838"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{int},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3843"><span data-line="3843"></span>Via the application <span data-line="3843"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="3843"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3844"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{int},~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3849"><span data-line="3849"></span>Via the application <span data-line="3849"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="3849"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3850"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{int},~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3854"><span data-line="3854"></span>By <span data-line="3854"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="3854"></span> we prove subgoal <span data-line="3854"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3854"></span>.
</p>
<p class="p indent" data-line="3856"><span data-line="3856"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3857">
<div class="mathpre infer para-block input-mathpre" data-line="3858"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{int},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{int},~\mathid{d}_2\\
\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,~/,~\%~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{int},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Int-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3864"><span data-line="3864"></span>we prove subgoal <span data-line="3864"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3864"></span>.
</p><h6 id="sec-subcase-int-signed-binary-op" class="h5" data-line="3866" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3866"></span>Subcase Int-Signed-Binary-Op</h6>
<p class="p noindent para-continue" data-line="3867"><span data-line="3867"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3868"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,~\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\mathid{H}_5:~\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,|+|,|-|~\}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3880"><span data-line="3880"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3881"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3886"><span data-line="3886"></span>Via the application <span data-line="3886"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="3886"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3887"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3892"><span data-line="3892"></span>Via the application <span data-line="3892"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="3892"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3893"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3897"><span data-line="3897"></span>By <span data-line="3897"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="3897"></span> we prove subgoal <span data-line="3897"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3897"></span>.
</p>
<p class="p indent" data-line="3899"><span data-line="3899"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3900">
<div class="mathpre infer para-block input-mathpre" data-line="3901"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,|+|,|-|~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{int}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Int-Signed-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3907"><span data-line="3907"></span>we prove subgoal <span data-line="3907"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3907"></span>.
</p><h6 id="sec-subcase-int-unsigned-binary-op" class="h5" data-line="3909" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3909"></span>Subcase Int-Unsigned-Binary-Op</h6>
<p class="p noindent para-continue" data-line="3910"><span data-line="3910"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3911"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\mathid{H}_5:~\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,|+|,|-|,\&amp;,\hat{},|,\oplus \}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3923"><span data-line="3923"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3924"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3929"><span data-line="3929"></span>Via the application <span data-line="3929"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="3929"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3930"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3935"><span data-line="3935"></span>Via the application <span data-line="3935"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="3935"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3936"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3940"><span data-line="3940"></span>By <span data-line="3940"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="3940"></span> we prove subgoal <span data-line="3940"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3940"></span>.
</p>
<p class="p indent" data-line="3942"><span data-line="3942"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3943">
<div class="mathpre infer para-block input-mathpre" data-line="3944"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathid{d}_2\\
\diamond \in \{~+,-,*,\langle{},\rangle{},\leq,\geq,|+|,|-|,\&amp;,\hat{},|,\oplus \}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Int-Unsigned-Binary-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3950"><span data-line="3950"></span>we prove subgoal <span data-line="3950"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3950"></span>.
</p><h6 id="sec-subcase-equality-op" class="h5" data-line="3952" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3952"></span>Subcase Equality-Op</h6>
<p class="p noindent para-continue" data-line="3953"><span data-line="3953"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3954"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{},~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{},~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{},~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{},~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{},~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{},~\mathid{d}_2\\
\mathid{H}_{12}:~\mathkw{has\_equality}(\tau{})\\
\mathid{H}_5:~\diamond \in \{~==,!=~\}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3967"><span data-line="3967"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="3968"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3973"><span data-line="3973"></span>Via the application <span data-line="3973"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="3973"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3974"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{},~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="3979"><span data-line="3979"></span>Via the application <span data-line="3979"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="3979"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3980"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{},~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="3984"><span data-line="3984"></span>By <span data-line="3984"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="3984"></span> we prove subgoal <span data-line="3984"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="3984"></span>.
</p>
<p class="p indent" data-line="3986"><span data-line="3986"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="3987">
<div class="mathpre infer para-block input-mathpre" data-line="3988"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{},~\mathid{d}_2\\
\diamond \in \{~==,!=~\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bool},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Equality-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="3994"><span data-line="3994"></span>we prove subgoal <span data-line="3994"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="3994"></span>.
</p><h6 id="sec-subcase-bit-concat-op" class="h5" data-line="3996" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="3996"></span>Subcase Bit-Concat-Op</h6>
<p class="p noindent para-continue" data-line="3997"><span data-line="3997"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="3998"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{++}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{l}+\mathid{r}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\mathbin{++}~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\mathbin{++}~\mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{l}\rangle{},~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{l}\rangle{},~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{r}\rangle{},~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{r}\rangle{},~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{l}\rangle{},~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{r}\rangle{},~\mathid{d}_2\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4009"><span data-line="4009"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4010"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{++}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{l}+\mathid{r}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4015"><span data-line="4015"></span>Via the application <span data-line="4015"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="4015"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4016"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{l}\rangle{},~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4021"><span data-line="4021"></span>Via the application <span data-line="4021"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="4021"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4022"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{r}\rangle{},~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4026"><span data-line="4026"></span>By <span data-line="4026"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="4026"></span> we prove subgoal <span data-line="4026"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4026"></span>.
</p>
<p class="p indent" data-line="4028"><span data-line="4028"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4029">
<div class="mathpre infer para-block input-mathpre" data-line="4030"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{l}\rangle{},~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{r}\rangle{},~\mathid{d}_2}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{++}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{l}+\mathid{r}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Bit-Concat-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4035"><span data-line="4035"></span>we prove subgoal <span data-line="4035"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4035"></span>.
</p><h6 id="sec-subcase-shift-op" class="h5" data-line="4037" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4037"></span>Subcase Shift-Op</h6>
<p class="p noindent para-continue" data-line="4038"><span data-line="4038"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4039"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\mathbin{\diamond}~\mathid{e}_2~:~\tau{}_1,~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_{1}~\diamond \mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}~\diamond \mathid{v}_{2}\rangle{}\\
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1,~\mathid{d}_1~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{}_1,~\mathid{d}_1\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{}_2,~\mathid{d}_2~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{}_2,~\mathid{d}_2\\
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau{}_1,~\mathid{d}_1\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{}_2,~\mathid{d}_2\\
\mathid{H}_{12}:~\mathkw{numeric}(\tau{}_1)\\
\mathid{H}_{13}:~\tau{}_2~=~\mathkw{bit}\langle{}\_\rangle{}~\lor \tau{}_2~=~\mathkw{int}\\
\mathid{H}_5:~\diamond \in \{\ll,~\gg\}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_{1}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{1}\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_{2}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_{2}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4053"><span data-line="4053"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4054"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{l}+\mathid{r}\rangle{},~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4059"><span data-line="4059"></span>Via the application <span data-line="4059"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="4059"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4060"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{}_1,~\mathid{d}_1
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4065"><span data-line="4065"></span>Via the application <span data-line="4065"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="4065"></span> we get the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4066"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{}_2,~\mathid{d}_2
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4070"><span data-line="4070"></span>By <span data-line="4070"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="4070"></span> we prove subgoal <span data-line="4070"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4070"></span>.
</p>
<p class="p indent" data-line="4072"><span data-line="4072"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4073">
<div class="mathpre infer para-block input-mathpre" data-line="4074"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau{}_1,~\mathid{d}_1\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{}_2,~\mathid{d}_2\\
\mathkw{numeric}(\tau{}_1)\\
\tau{}_2~=~\mathkw{bit}\langle{}\_\rangle{}~\lor \tau{}_2~=~\mathkw{int}\\
\diamond \in \{\ll,~\gg\}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\mathbin{\diamond}~\mathid{v}_2~:~\tau{}_1,~\mathkw{binaryDir}(\mathid{d}_1,~\mathid{d}_2)}{\textsc{Shift-Op}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4082"><span data-line="4082"></span>we prove subgoal <span data-line="4082"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4082"></span>.
</p><h5 id="sec-case-bool-cast-true" class="h4" data-line="4084" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4084"></span><span class="heading-before"><span class="heading-label">5.2.2.15</span>.&#8194;</span><span data-line="4084"></span>Case Bool-Cast-True</h5>
<p class="p noindent para-continue" data-line="4085"><span data-line="4085"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4086"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathkw{bool})~\mathid{e}~:~\mathkw{bool},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~(\mathkw{bool})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4091"><span data-line="4091"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4092"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}_0,~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~1_\mathid{u}^1\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~1_\mathid{u}^1~:~\tau{}_0,~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4095"><span data-line="4095"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4096"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4101"><span data-line="4101"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4101"></span> is true by constructing rule-instance:
</p>
<div class="infer" data-line="4102">
<div class="mathpre infer para-block input-mathpre" data-line="4103"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\mathkw{none}}{\textsc{Bool-True}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent para-continue" data-line="4108"><span data-line="4108"></span>By inversion on <span data-line="4108"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4108"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4109"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}_0,~\mathid{d}\\
\mathid{H}_4:~\tau{}_0~\prec \mathkw{bool}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4114"><span data-line="4114"></span>By inversion on <span data-line="4114"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4114"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4115"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~1_\mathid{u}^1\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4119"><span data-line="4119"></span>Via the application <span data-line="4119"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4119"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4120"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~1_\mathid{u}^1~:~\tau{}_0,~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4124"><span data-line="4124"></span>By <span data-line="4124"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4124"></span> we prove subgoal <span data-line="4124"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4124"></span>.
</p><h5 id="sec-case-bool-cast-false" class="h4" data-line="4126" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4126"></span><span class="heading-before"><span class="heading-label">5.2.2.16</span>.&#8194;</span><span data-line="4126"></span>Case Bool-Cast-False</h5>
<p class="p noindent para-continue" data-line="4127"><span data-line="4127"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4128"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathkw{bool})~\mathid{e}~:~\mathkw{bool},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~(\mathkw{bool})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4133"><span data-line="4133"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4134"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}_0,~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{n}_\mathid{u}^1\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{n}_\mathid{u}^1~:~\tau{}_0,~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4137"><span data-line="4137"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4138"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4143"><span data-line="4143"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4143"></span> is true by constructing rule-instance:
</p>
<div class="infer" data-line="4144">
<div class="mathpre infer para-block input-mathpre" data-line="4145"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},~\mathkw{none}}{\textsc{Bool-False}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent para-continue" data-line="4150"><span data-line="4150"></span>By inversion on <span data-line="4150"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4150"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4151"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}_0,~\mathid{d}\\
\mathid{H}_4:~\tau{}_0~\prec \mathkw{bool}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4156"><span data-line="4156"></span>By inversion on <span data-line="4156"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4156"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4157"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{n}_\mathid{u}^1\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4161"><span data-line="4161"></span>Via the application <span data-line="4161"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4161"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4162"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{n}_\mathid{u}^1~:~\tau{}_0,~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4166"><span data-line="4166"></span>By <span data-line="4166"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4166"></span> we prove subgoal <span data-line="4166"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4166"></span>.
</p><h5 id="sec-case-bit-cast" class="h4" data-line="4168" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4168"></span><span class="heading-before"><span class="heading-label">5.2.2.17</span>.&#8194;</span><span data-line="4168"></span>Case Bit-Cast</h5>
<p class="p noindent para-continue" data-line="4169"><span data-line="4169"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4170"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathkw{bit}\langle{}\mathid{w}\rangle{})~\mathid{e}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~(\mathkw{bit}\langle{}\mathid{w}\rangle{})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~{\mathkw{of2s}(\mathkw{extract\_num}~\mathid{v})}_\mathid{u}^{\mathid{w}}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4175"><span data-line="4175"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4176"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}_0,~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_0,~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4179"><span data-line="4179"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4180"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~{\mathkw{of2s}(\mathkw{extract\_num}~\mathid{v})}_\mathid{u}^{\mathid{w}}~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4185"><span data-line="4185"></span>TODO: maybe we need different typing rules for fixed sized ints?
</p><h5 id="sec-case-typename-cast" class="h4" data-line="4187" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4187"></span><span class="heading-before"><span class="heading-label">5.2.2.18</span>.&#8194;</span><span data-line="4187"></span>Case TypeName-Cast</h5>
<p class="p noindent para-continue" data-line="4188"><span data-line="4188"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4189"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathid{X})~\mathid{e}~:~\mathid{X},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~(\mathid{X})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4194"><span data-line="4194"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4195"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~(\xi(\mathid{X}))~\mathid{e}~:~\xi(\mathid{X}),~\mathkw{none}~\Rightarrow \langle{}\xi,~\sigma,~(\xi(\mathid{X}))~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\xi(\mathid{X}),~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4198"><span data-line="4198"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4199"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathid{X},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4203"><span data-line="4203"></span>By inversion on <span data-line="4203"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4203"></span> and <span data-line="4203"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4203"></span> we have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4204"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\xi(\mathid{X}))~\mathid{e}~:~\xi(\mathid{X}),~\mathkw{none}\\
\mathid{H}_4:~\xi(\mathid{X})~\prec \mathid{X}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~(\xi(\mathid{X}))~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4209"><span data-line="4209"></span>Via the application <span data-line="4209"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4209"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4210"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\xi(\mathid{X}),~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4214"><span data-line="4214"></span>By <span data-line="4214"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4214"></span>, we prove <span data-line="4214"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4214"></span>.
</p>
<p class="p indent" data-line="4216"><span data-line="4216"></span>Sketchy: By constructing the rule-instance:
</p>
<div class="infer" data-line="4217">
<div class="mathpre infer para-block input-mathpre" data-line="4218"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\xi(\mathid{X}),~\mathid{d}\\
\xi(\mathid{X})~\prec \mathid{X}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathid{X})~\mathid{v}~:~\mathid{X},~\mathkw{none}}{\textsc{Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4223">
<div class="mathpre infer para-block input-mathpre" data-line="4224"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathid{X},~\mathkw{none}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4228"><span data-line="4228"></span>we prove subgoal <span data-line="4228"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4228"></span>
</p><h5 id="sec-case-newtype-cast" class="h4" data-line="4230" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4230"></span><span class="heading-before"><span class="heading-label">5.2.2.19</span>.&#8194;</span><span data-line="4230"></span>Case NewType-Cast</h5>
<p class="p noindent para-continue" data-line="4231"><span data-line="4231"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4232"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathkw{newtype}~\tau{}~\mathid{X})~\mathid{e}~:~\mathkw{newtype}~\tau{}~\mathid{X},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~(\mathkw{newtype}~\tau{}~\mathid{X})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4237"><span data-line="4237"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4238"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~(\tau{})~\mathid{e}~:~\tau{},~\mathkw{none}~\Rightarrow \langle{}\xi,~\sigma,~(\tau{})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4241"><span data-line="4241"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4242"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{newtype}~\tau{}~\mathid{X},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4246"><span data-line="4246"></span>By inversion on <span data-line="4246"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4246"></span> and <span data-line="4246"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4246"></span> we have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4247"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\tau{})~\mathid{e}~:~\tau{},~\mathid{d}\\
\mathid{H}_4:~\tau{}~\prec (\mathkw{newtype}~\tau{}~\mathid{X})\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~(\tau{})~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4252"><span data-line="4252"></span>Via the application <span data-line="4252"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4252"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4253"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4257"><span data-line="4257"></span>By <span data-line="4257"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4257"></span>, we prove <span data-line="4257"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4257"></span>.
</p>
<p class="p indent" data-line="4259"><span data-line="4259"></span>Sketchy: By constructing the rule-instance:
</p>
<div class="infer" data-line="4260">
<div class="mathpre infer para-block input-mathpre" data-line="4261"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\mathkw{none}\\
\tau{}~\prec (\mathkw{newtype}~\tau{}~\mathid{X})}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\mathkw{newtype}~\tau{}~\mathid{X})~\mathid{v}~:~\mathkw{newtype}~\tau{}~\mathid{X},~\mathkw{none}}{\textsc{Cast}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4266">
<div class="mathpre infer para-block input-mathpre" data-line="4267"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{newtype}~\tau{}~\mathid{X},~\mathkw{none}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4271"><span data-line="4271"></span>we prove subgoal <span data-line="4271"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4271"></span>
</p><h5 id="sec-case-type-member-enum" class="h4" data-line="4273" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4273"></span><span class="heading-before"><span class="heading-label">5.2.2.20</span>.&#8194;</span><span data-line="4273"></span>Case Type-Member-Enum</h5>
<p class="p noindent para-continue" data-line="4274"><span data-line="4274"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4275"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{X}_1.\mathid{name}~:~\mathid{X}_1,~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{X}_1.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{X}_2.\mathid{name}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4280"><span data-line="4280"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4281"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~~\mathid{X}_2.\mathid{name}~:~\mathid{X}_1,~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4285"><span data-line="4285"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4285"></span> is proven by <span data-line="4285"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="4285"></span>.
</p>
<p class="p indent para-continue" data-line="4287"><span data-line="4287"></span>By inversion on <span data-line="4287"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4287"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4288"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\xi(\mathid{X}_1)~=~\mathkw{enum}~\mathid{X}_2~\{\dots,\mathid{name},\dots\}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4291"><span data-line="4291"></span>Thus <span data-line="4291"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X_2$</span></span><span data-line="4291"></span> can be substituted for <span data-line="4291"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X_1$</span></span><span data-line="4291"></span> under <span data-line="4291"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="4291"></span>. Thus <span data-line="4291"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4291"></span> is proven by <span data-line="4291"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4291"></span>.
</p><h5 id="sec-case-type-member-senum" class="h4" data-line="4294" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4294"></span><span class="heading-before"><span class="heading-label">5.2.2.21</span>.&#8194;</span><span data-line="4294"></span>Case Type-Member-SEnum</h5>
<p class="p noindent para-continue" data-line="4295"><span data-line="4295"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4296"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~~\mathid{X}_1.\mathid{name}~:~\mathid{X}_1,~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{X}_1.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathid{X}_2.\mathid{name}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4301"><span data-line="4301"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4302"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~~\mathid{X}_2.\mathid{name}~:~\mathid{X}_1,~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4306"><span data-line="4306"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4306"></span> is proven by <span data-line="4306"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="4306"></span>.
</p>
<p class="p indent para-continue" data-line="4308"><span data-line="4308"></span>By inversion on <span data-line="4308"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4308"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4309"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\xi(\mathid{X}_1)~=~\mathkw{enum}~\tau{}~\mathid{X}_2~\{\dots,(\mathid{name},~\mathid{e}),\dots\}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4312"><span data-line="4312"></span>Thus <span data-line="4312"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X_2$</span></span><span data-line="4312"></span> can be substituted for <span data-line="4312"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X_1$</span></span><span data-line="4312"></span> under <span data-line="4312"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="4312"></span>. Thus <span data-line="4312"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4312"></span> is proven by <span data-line="4312"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4312"></span>.
</p><h5 id="sec-case-error-member" class="h4" data-line="4314" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4314"></span><span class="heading-before"><span class="heading-label">5.2.2.22</span>.&#8194;</span><span data-line="4314"></span>Case Error-Member</h5>
<p class="p noindent para-continue" data-line="4315"><span data-line="4315"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4316"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{error}.\mathid{name}~:~\mathkw{error},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathkw{error}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi,~\sigma,~\mathkw{sig\_continue},~\mathkw{error}.\mathid{name}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4321"><span data-line="4321"></span>Our subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4322"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{error}.\mathid{name}~:~\mathkw{error},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4325"><span data-line="4325"></span>is true by our assumptions <span data-line="4325"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0 \wedge H_1$</span></span><span data-line="4325"></span>.
</p><h5 id="sec-case-struct-field" class="h4" data-line="4327" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4327"></span><span class="heading-before"><span class="heading-label">5.2.2.23</span>.&#8194;</span><span data-line="4327"></span>Case Struct-Field</h5>
<p class="p noindent para-continue" data-line="4328"><span data-line="4328"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4329"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathid{name}~:~\tau{}_{\mathid{name}},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4334"><span data-line="4334"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4335"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow  \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}~:~\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4338"><span data-line="4338"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4339"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_{\mathid{name}},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4343"><span data-line="4343"></span>By inversion on <span data-line="4343"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4343"></span> and <span data-line="4343"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4343"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4344"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~(\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{name}~\tau{}_{\mathid{name}}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4350"><span data-line="4350"></span>Via the application <span data-line="4350"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4350"></span> we procure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4351"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}~:~\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4355"><span data-line="4355"></span>By <span data-line="4355"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4355"></span>, we prove subgoal <span data-line="4355"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4355"></span>.
</p>
<p class="p indent" data-line="4357"><span data-line="4357"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4358">
<div class="mathpre infer para-block input-mathpre" data-line="4359"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}~:~\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathkw{has\_field}~(\mathkw{struct}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{name}~\tau{}_{\mathid{name}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_{\mathid{name}},~\mathkw{none}}{\textsc{Expression-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4364"><span data-line="4364"></span>we prove subgoal <span data-line="4364"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4364"></span>.
</p><h5 id="sec-case-header-field" class="h4" data-line="4366" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4366"></span><span class="heading-before"><span class="heading-label">5.2.2.24</span>.&#8194;</span><span data-line="4366"></span>Case Header-Field</h5>
<p class="p noindent para-continue" data-line="4367"><span data-line="4367"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4368"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathid{name}~:~\tau{}_{\mathid{name}},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4373"><span data-line="4373"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4374"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow  \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4377"><span data-line="4377"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4378"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_{\mathid{name}},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4382"><span data-line="4382"></span>By inversion on <span data-line="4382"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4382"></span> and <span data-line="4382"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4382"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4383"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{name}~\tau{}_{\mathid{name}}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4389"><span data-line="4389"></span>Via the application <span data-line="4389"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4389"></span> we procure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4390"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4394"><span data-line="4394"></span>By <span data-line="4394"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4394"></span>, we prove subgoal <span data-line="4394"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4394"></span>.
</p>
<p class="p indent" data-line="4396"><span data-line="4396"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4397">
<div class="mathpre infer para-block input-mathpre" data-line="4398"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{name}~\tau{}_{\mathid{name}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_{\mathid{name}},~\mathkw{none}}{\textsc{Expression-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4403"><span data-line="4403"></span>we prove subgoal <span data-line="4403"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4403"></span>.
</p><h5 id="sec-case-header-isvalid-field" class="h4" data-line="4405" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4405"></span><span class="heading-before"><span class="heading-label">5.2.2.25</span>.&#8194;</span><span data-line="4405"></span>Case Header-IsValid-Field</h5>
<p class="p noindent para-continue" data-line="4406"><span data-line="4406"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4407"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathkw{isValid}~:~\mathkw{bool}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{isValid}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4412"><span data-line="4412"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4413"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow  \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4416"><span data-line="4416"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4417"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{builtin}~\mathkw{isValid}~\mathid{lv}_\mathid{o}~:~\mathkw{bool}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4421"><span data-line="4421"></span>By inversion on <span data-line="4421"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4421"></span> and <span data-line="4421"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4421"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4422"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~(\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~...~,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathkw{isValid}~(()~\to{}~\mathkw{bool})\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header}~\mathid{b}~\{~\dots \}\rangle{}\\
\mathid{H}_6:~\mathkw{lv\_of\_expr}~\xi&#39;~\sigma&#39;~\mathid{e}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{lv}_\mathid{o})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4428"><span data-line="4428"></span>Via application <span data-line="4428"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4428"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4429"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header}~\mathid{b}~\{~\dots,(\mathid{name},~\mathid{v}),\dots \}~:~\mathkw{header}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4433"><span data-line="4433"></span>Via application <span data-line="4433"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_1 \, H_6 \, H_7$</span></span><span data-line="4433"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4434"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4437"><span data-line="4437"></span>which proves subgoal <span data-line="4437"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4437"></span>.
</p>
<p class="p indent" data-line="4439"><span data-line="4439"></span>TODO: I<span data-line="4439"></span>&#39;<span data-line="4439"></span>m confused about these cases<span data-line="4439"></span>&#8230;<span data-line="4439"></span>
</p><h5 id="sec-case-header-union-field" class="h4" data-line="4441" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4441"></span><span class="heading-before"><span class="heading-label">5.2.2.26</span>.&#8194;</span><span data-line="4441"></span>Case Header-Union-Field</h5>
<p class="p noindent para-continue" data-line="4442"><span data-line="4442"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4443"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathid{name}~:~\tau{}_{\mathid{name}},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathid{name}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4448"><span data-line="4448"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4449"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow  \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{header\ union}~\{~\dots,(\mathid{name},\mathid{v}),\dots \}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header\ union}~\{~\dots,(\mathid{name},\mathid{v}),\dots \}~:~\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4452"><span data-line="4452"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4453"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_{\mathid{name}},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4457"><span data-line="4457"></span>By inversion on <span data-line="4457"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4457"></span> and <span data-line="4457"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4457"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4458"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~(\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{name}~\tau{}_{\mathid{name}}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{struct}~\{\dots,(\mathid{name},~\mathid{v}),\dots\}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4464"><span data-line="4464"></span>Via the application <span data-line="4464"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4464"></span> we procure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4465"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header\ union}~\{~\dots,(\mathid{name},\mathid{v}),\dots \}~:~\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4469"><span data-line="4469"></span>By <span data-line="4469"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4469"></span>, we prove subgoal <span data-line="4469"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4469"></span>.
</p>
<p class="p indent" data-line="4471"><span data-line="4471"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4472">
<div class="mathpre infer para-block input-mathpre" data-line="4473"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{header\ union}~\{~\dots,(\mathid{name},\mathid{v}),\dots \}~:~\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\},~\mathid{d}\\
\mathkw{has\_field}~(\mathkw{header\ union}~\{\mathid{f}_1:\tau{}_1,~\dots,~\mathid{f}_\mathid{n}:\tau{}_\mathid{n}\})~\mathid{name}~\tau{}_{\mathid{name}}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{}_{\mathid{name}},~\mathkw{none}}{\textsc{Expression-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4478"><span data-line="4478"></span>we prove subgoal <span data-line="4478"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4478"></span>.
</p><h5 id="sec-case-array-size-field" class="h4" data-line="4480" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4480"></span><span class="heading-before"><span class="heading-label">5.2.2.27</span>.&#8194;</span><span data-line="4480"></span>Case Array-Size-Field</h5>
<p class="p noindent para-continue" data-line="4481"><span data-line="4481"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4482"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathkw{size}~:~\mathkw{bit}\langle{}32\rangle{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{size}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~{\mathid{n}_{\mathid{size}}}_\mathid{u}^{32}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4487"><span data-line="4487"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4488"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}[\mathid{a}],~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4491"><span data-line="4491"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4492"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~{\mathid{n}_{\mathid{size}}}_\mathid{u}^{32}~:~\mathkw{bit}\langle{}32\rangle{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4496"><span data-line="4496"></span>By inversion on <span data-line="4496"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4496"></span> and <span data-line="4496"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4496"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4497"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}[\mathid{a}],~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{size}~\mathkw{bit}\langle{}32\rangle{}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4502"><span data-line="4502"></span>Via the application <span data-line="4502"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4502"></span> we obtain the hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4503"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4507"><span data-line="4507"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4507"></span> is proven by <span data-line="4507"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4507"></span>.
</p>
<p class="p indent" data-line="4509"><span data-line="4509"></span>TODO: maybe need to modify fixed-int type-checking<span data-line="4509"></span>&#8230;<span data-line="4509"></span>
</p><h5 id="sec-case-array-next-field" class="h4" data-line="4511" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4511"></span><span class="heading-before"><span class="heading-label">5.2.2.28</span>.&#8194;</span><span data-line="4511"></span>Case Array-Next-Field</h5>
<p class="p noindent para-continue" data-line="4512"><span data-line="4512"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4513"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathkw{next}~:~\tau{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{next}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{\mathid{n}_{\mathid{next}}}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4518"><span data-line="4518"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4519"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}[\mathid{a}],~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4522"><span data-line="4522"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4523"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_{\mathid{n}_{\mathid{next}}}~:~\tau{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4527"><span data-line="4527"></span>By inversion on <span data-line="4527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4527"></span> and <span data-line="4527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4527"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4528"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}[\mathid{a}],~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{next}~\tau{}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4533"><span data-line="4533"></span>Via the application <span data-line="4533"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4533"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="4534"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4538"><span data-line="4538"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4538"></span> proves subgoal <span data-line="4538"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4538"></span>.
Sketchy: By constructing the rule-instance:
</p>
<div class="infer" data-line="4540">
<div class="mathpre infer para-block input-mathpre" data-line="4541"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}\\
\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{next}~\tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_{\mathid{n}_{\mathid{next}}}~:~\tau{},~\mathkw{none}}{\textsc{Expression-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4546"><span data-line="4546"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4546"></span> is proven.
</p><h5 id="sec-case-array-last-field" class="h4" data-line="4548" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4548"></span><span class="heading-before"><span class="heading-label">5.2.2.29</span>.&#8194;</span><span data-line="4548"></span>Case Array-Last-Field</h5>
<p class="p noindent para-continue" data-line="4549"><span data-line="4549"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4550"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}.\mathkw{last}~:~\tau{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}.\mathkw{last}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_{\mathid{n}_{\mathid{next}}~-~1}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4555"><span data-line="4555"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4556"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}[\mathid{a}],~\mathid{d}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4559"><span data-line="4559"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4560"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_{\mathid{n}_{\mathid{next}}~-~1}~:~\tau{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4564"><span data-line="4564"></span>By inversion on <span data-line="4564"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4564"></span> and <span data-line="4564"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4564"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4565"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}[\mathid{a}],~\mathid{d}\\
\mathid{H}_4:~\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{last}~\tau{}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4570"><span data-line="4570"></span>Via the application <span data-line="4570"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4570"></span>
</p>
<div class="mathpre para-block input-mathpre" data-line="4571"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4575"><span data-line="4575"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="4575"></span> proves subgoal <span data-line="4575"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4575"></span>.
Sketchy: By constructing the rule-instance:
</p>
<div class="infer" data-line="4577">
<div class="mathpre infer para-block input-mathpre" data-line="4578"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~(\overline{\mathid{v}},~\mathid{n}_{\mathid{size}},~\mathid{n}_{\mathid{next}})~:~\tau{}[\mathid{a}],~\mathid{d}\\
\mathkw{has\_field}~\tau{}[\mathid{a}]~\mathkw{last}~\tau{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_{\mathid{n}_{\mathid{next}}~-~1}~:~\tau{},~\mathkw{none}}{\textsc{Expression-Member}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4583"><span data-line="4583"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4583"></span> is proven.
</p><h5 id="sec-case-ternary-op-true" class="h4" data-line="4585" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4585"></span><span class="heading-before"><span class="heading-label">5.2.2.30</span>.&#8194;</span><span data-line="4585"></span>Case Ternary-Op-True</h5>
<p class="p noindent para-continue" data-line="4586"><span data-line="4586"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4587"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3~:~\tau{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_2\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4592"><span data-line="4592"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4593"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}_1,~\mathkw{true}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{},~\_~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_2\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4597"><span data-line="4597"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4598"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4601"><span data-line="4601"></span>By inversion on <span data-line="4601"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4601"></span> and <span data-line="4601"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4601"></span> we attain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4602"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau{},~\_\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}_1,~\mathkw{true}\rangle{}\\
\mathid{H}_6:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_2\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4608"><span data-line="4608"></span>Via the application <span data-line="4608"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4608"></span> we earn hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4609"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4613"><span data-line="4613"></span>Via the application <span data-line="4613"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_7 \, H_4 \, H_6$</span></span><span data-line="4613"></span> we gain hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4614"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4617"><span data-line="4617"></span>which proves our subgoal <span data-line="4617"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4617"></span>.
</p><h5 id="sec-case-ternary-op-false" class="h4" data-line="4619" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4619"></span><span class="heading-before"><span class="heading-label">5.2.2.31</span>.&#8194;</span><span data-line="4619"></span>Case Ternary-Op-False</h5>
<p class="p noindent para-continue" data-line="4620"><span data-line="4620"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4621"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3~:~\tau{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_1~?~\mathid{e}_2~:~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_3\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4626"><span data-line="4626"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4627"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}_1,~\mathkw{false}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},~\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_3~:~\tau{},~\_~\Rightarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_3\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_3~:~\tau{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4631"><span data-line="4631"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4632"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_3~:~\tau{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4635"><span data-line="4635"></span>By inversion on <span data-line="4635"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4635"></span> and <span data-line="4635"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4635"></span> we attain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4636"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bool},~\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_3~:~\tau{},~\_\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}_1,~\mathkw{false}\rangle{}\\
\mathid{H}_6:~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{e}_3\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}_2,~\mathid{v}_3\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4642"><span data-line="4642"></span>Via the application <span data-line="4642"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4642"></span> we earn hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4643"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4647"><span data-line="4647"></span>Via the application <span data-line="4647"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_7 \, H_4 \, H_6$</span></span><span data-line="4647"></span> we gain hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4648"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_3~:~\tau{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4651"><span data-line="4651"></span>which proves our subgoal <span data-line="4651"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4651"></span>.
</p><h5 id="sec-case-function-eval" class="h4" data-line="4653" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4653"></span><span class="heading-before"><span class="heading-label">5.2.2.32</span>.&#8194;</span><span data-line="4653"></span>Case Function-Eval</h5>
<p class="p noindent" data-line="4654"><span data-line="4654"></span>There are separate types for functions and actions. This proof only
deals with functions.
</p>
<p class="p indent" data-line="4657"><span data-line="4657"></span>We would like to show <span data-line="4657"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$v:\tau{}_{ret}[\rho/X]$</span></span><span data-line="4657"></span> in an extension of <span data-line="4657"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi$</span></span><span data-line="4657"></span>. We
will go one step at a time, constructing a chain of store typings
<span data-line="4659"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi \subseteq \Xi_1 \subseteq \dots\subseteq \Xi_5$</span></span><span data-line="4660"></span>.
</p><h6 id="sec-closure-typing" class="h5" data-line="4661" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4661"></span>Closure typing</h6>
<p class="p noindent para-continue" data-line="4662"><span data-line="4662"></span>From the present evaluation rule and the typing
rule <span data-line="4663"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\textsc{Function-Call}$</span></span><span data-line="4663"></span> we have this situation.
</p>
<div class="mathpre para-block input-mathpre" data-line="4664"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{f}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}):\tau{}_{\mathid{ret}}\\
\langle{}\xi,~\sigma_0,~\mathid{f}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi_1,~\sigma_1,~\mathkw{sig\_continue},~\xi_{\mathid{closure}}\otimes{}\mathkw{function}\langle{}\mathid{X}\rangle{}(\overline{\mathid{x}&#39;:\tau{}&#39;,\mathid{d}&#39;})~\mathid{blk}\rangle{}\\
\Delta{}[\overline{\mathid{X}=\rho}]~\vdash{}~\tau{}_{\mathid{ret}}\rightsquigarrow{}\tau{}_{\mathid{call}}\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{f}\langle{}\overline{\rho}\rangle{}(\overline{\mathid{e}}):\tau{}_{\mathid{call}}&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4670"><span data-line="4670"></span>We don<span data-line="4670"></span>&#39;<span data-line="4670"></span>t know that the parameter lists line up yet. What we do know,
however, is that <span data-line="4671"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma,\Xi \vdash{} \xi,\sigma_0$</span></span><span data-line="4671"></span>. Applying the induction
hypothesis yields a store typing <span data-line="4672"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi_1 \supseteq \Xi$</span></span><span data-line="4672"></span> which types the
closure.
</p>
<div class="mathpre para-block input-mathpre" data-line="4674"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Xi_1~\vdash{}~\xi_{\mathid{closure}}\otimes{}\mathkw{function}\langle{}\mathid{X}&#39;\rangle{}(\overline{\mathid{x}&#39;:\tau{}&#39;,\mathid{d}&#39;})~\mathid{blk}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}}):\tau{}_{\mathid{ret}}&#39;.
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4677"><span data-line="4677"></span>Inverting this judgment tells us all the primed variables are
actually the same as the nonprimed ones and, furthermore, the block
returns an appropriate value.
</p>
<div class="mathpre para-block input-mathpre" data-line="4680"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\xi_{\mathid{closure}}=(\mathid{P}_{\mathid{cl}},\mathid{E}_{\mathid{cl}},\Delta_{\mathid{cl}},\upsilon_{\mathid{cl}})\\
\Xi_1~\vdash{}~\xi:\Gamma{}_{\mathid{cl}}\\
\mdmathindent{1}[]~;~\Delta{}_{\mathid{cl}}[\mathid{X}=\mathid{X}];\Gamma{}_{\mathid{cl}},\overline{\mathid{x}:\tau{}}~\vdash{}~\mathid{blk}:\mathkw{returns}~\tau_{\mathid{ret}}~\dashv{}~\Gamma{}&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h6 id="sec-expression-typing" class="h5" data-line="4686" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4686"></span>Expression typing</h6><h6 id="sec-copy-in-typing" class="h5" data-line="4687" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4687"></span>Copy-in typing</h6><h6 id="sec-block-typing" class="h5" data-line="4688" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4688"></span>Block typing</h6><h6 id="sec-copy-out-typing" class="h5" data-line="4689" data-heading-depth="5" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4689"></span>Copy-out typing</h6><h5 id="sec-case-masks" class="h4" data-line="4691" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4691"></span><span class="heading-before"><span class="heading-label">5.2.2.33</span>.&#8194;</span><span data-line="4691"></span>Case Masks</h5>
<p class="p noindent para-continue" data-line="4692"><span data-line="4692"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4693"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{e}_2~:~\mathkw{set}\langle{}\mathkw{bit}\langle{}\mathid{w}\rangle{}\rangle{},\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4698"><span data-line="4698"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4699"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_~\Rightarrow \langle{}\xi&#39;,~\sigma,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4703"><span data-line="4703"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4704"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2~:~\mathkw{set}\langle{}\mathkw{bit}\langle{}\mathid{w}\rangle{}\rangle{},\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4708"><span data-line="4708"></span>By inversion on <span data-line="4708"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4708"></span> and <span data-line="4708"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4708"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4709"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}\\
\mathid{H}_6:~\langle{}\xi&#39;,~\sigma,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4715"><span data-line="4715"></span>Via the application <span data-line="4715"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_5$</span></span><span data-line="4715"></span> we procure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4716"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4720"><span data-line="4720"></span>Under the aegis of application <span data-line="4720"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_7 \, H_4 \, H_6$</span></span><span data-line="4720"></span> we secure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4721"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4725"><span data-line="4725"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_9$</span></span><span data-line="4725"></span> proves <span data-line="4725"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4725"></span>.
</p>
<p class="p indent" data-line="4727"><span data-line="4727"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4728">
<div class="mathpre infer para-block input-mathpre" data-line="4729"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\mathkw{bit}\langle{}\mathid{w}\rangle{},~\_}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~\texttt{\&amp;\&amp;\&amp;}~\mathid{v}_2~:~\mathkw{set}\langle{}\mathkw{bit}\langle{}\mathid{w}\rangle{}\rangle{},\mathkw{none}}{\textsc{Masks}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4734"><span data-line="4734"></span>we prove <span data-line="4734"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4734"></span>.
</p><h5 id="sec-case-ranges" class="h4" data-line="4736" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4736"></span><span class="heading-before"><span class="heading-label">5.2.2.34</span>.&#8194;</span><span data-line="4736"></span>Case Ranges</h5>
<p class="p noindent para-continue" data-line="4737"><span data-line="4737"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4738"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma\\
\mathid{H}_1:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1\mathbin{..}\mathid{e}_2~:~\mathkw{set}\langle{}\tau\rangle{},~\mathkw{none}\\
\mathid{H}_2:~\langle{}\xi,~\sigma,~\mathid{e}_1~\mathbin{..}~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_1~\mathbin{..}~\mathid{v}_2\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4743"><span data-line="4743"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4744"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_1~:~\tau,~\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau,~\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_2~:~\tau,~\_~\Rightarrow \langle{}\xi&#39;,~\sigma,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau,~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4748"><span data-line="4748"></span>We wish to prove subgoals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4749"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;\\
\mathid{SG}_2:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1\mathbin{..}\mathid{v}_2~:~\mathkw{set}\langle{}\tau\rangle{},~\mathkw{none}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4753"><span data-line="4753"></span>By inversion on hypotheses <span data-line="4753"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4753"></span> and <span data-line="4753"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="4753"></span> we land hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4754"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau,~\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau,~\_\\
\mathid{H}_5:~\tau =~\mathkw{bit}\langle{}\mathid{w}\rangle{}~\lor \tau =~\mathkw{int}\langle{}\mathid{w}\rangle{}\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_1\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}_1\rangle{}\\
\mathid{H}_7:~\langle{}\xi&#39;,~\sigma,~\mathid{e}_2\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{v}_2\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4761"><span data-line="4761"></span>By dint of application <span data-line="4761"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_0 \, H_3 \, H_6$</span></span><span data-line="4761"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4762"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau,~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4766"><span data-line="4766"></span>By virtue of application <span data-line="4766"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_2 \, H_8 \, H_4 \, H_7$</span></span><span data-line="4766"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4767"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau,~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4771"><span data-line="4771"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="4771"></span> proves <span data-line="4771"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_1$</span></span><span data-line="4771"></span>.
</p>
<p class="p indent" data-line="4773"><span data-line="4773"></span>By constructing the rule-instance:
</p>
<div class="infer" data-line="4774">
<div class="mathpre infer para-block input-mathpre" data-line="4775"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1~:~\tau,~\_\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_2~:~\tau,~\_\\
\tau =~\mathkw{bit}\langle{}\mathid{w}\rangle{}~\lor \tau =~\mathkw{int}\langle{}\mathid{w}\rangle{}}{\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}_1\mathbin{..}\mathid{v}_2~:~\mathkw{set}\langle{}\tau\rangle{},~\mathkw{none}}{\textsc{Ranges}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<p class="p noindent" data-line="4781"><span data-line="4781"></span>we prove <span data-line="4781"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG_2$</span></span><span data-line="4781"></span>.
</p><h3 id="sec-type-soundness-of-statements" class="h2" data-line="4783" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4783"></span><span class="heading-before"><span class="heading-label">5.3</span>.&#8194;</span><span data-line="4783"></span>Type Soundness of Statements</h3><h4 id="sec-context-signal-typing" class="h3" data-line="4785" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4785"></span><span class="heading-before"><span class="heading-label">5.3.1</span>.&#8194;</span><span data-line="4785"></span>Context-signal typing</h4>
<p class="p noindent para-continue" data-line="4786"><span data-line="4786"></span>Statement type preservation requires a predicate on contexts and signals:
</p>
<div class="mathpre para-block input-mathpre" data-line="4787"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Xi,\mathid{ctx}~\vdash{}~\mathid{sig}
\end{mdmathpre}%mdk
\]</span></span></div>
<div class="infer" data-line="4791">
<div class="mathpre infer para-block input-mathpre" data-line="4792"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Xi,\mathkw{void}~\vdash{}~\mathkw{stop}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4797">
<div class="mathpre infer para-block input-mathpre" data-line="4798"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Xi,\mathkw{unit}~\vdash{}~\mathkw{go}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4802">
<div class="mathpre infer para-block input-mathpre" data-line="4803"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{{}}{\Xi,\mathkw{returns}~\tau{}~\vdash{}~\mathkw{stop}~\mathkw{exit}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4807">
<div class="mathpre infer para-block input-mathpre" data-line="4808"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\mathid{v}:\tau{}}{\Xi,\mathkw{returns}~\tau{}~\vdash{}~\mathkw{stop}~\mathkw{return}~\mathid{v}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4812">
<div class="mathpre infer para-block input-mathpre" data-line="4813"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\mathid{v}:\mathkw{error}}{\Xi,\mathkw{parses}~\vdash{}~\mathkw{stop}~\mathkw{reject}~\mathid{v}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div>
<div class="infer" data-line="4817">
<div class="mathpre infer para-block input-mathpre" data-line="4818"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\\
\infer{\Xi \vdash{}~\mathid{v}:\mathkw{error}}{\Xi,\mathkw{parses}~\vdash{}~\mathkw{go}}{\textsc{}}
\end{mdmathpre}%mdk
\]</span></span></div></div><h4 id="sec-statement-type-preservation-theorem-statement" class="h3" data-line="4823" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4823"></span><span class="heading-before"><span class="heading-label">5.3.2</span>.&#8194;</span><span data-line="4823"></span>Statement Type Preservation Theorem Statement</h4>
<div class="theorem" data-line="4824" style="display:block;margin:1ex 0pt">
<p class="p noindent" data-line="4825"><span data-line="4825"></span><span class="theorem-before"><strong class="strong-star2">Theorem&#160;<span class="theorem-label">2</span>.</strong> <span class="theorem-caption">(<span style="font-style:italic">Evaluation preserves statement types</span>)</span><br>
</span><span data-line="4825"></span>Let <span data-line="4825"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle\xi,\sigma,s\rangle$</span></span><span data-line="4825"></span> be an initial configuration
and take contexts <span data-line="4826"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma,\Delta,\Xi,\Gamma{},\Gamma{}&#39;$</span></span><span data-line="4826"></span>. Suppose that
the configuration is safe in the context, so
</p>
<ul class="ul list-star compact" data-line="4829">
<li class="li ul-li list-star-li compact-li" data-line="4829"><span data-line="4829"></span>There exists a <span data-line="4829"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Gamma{}&#39;$</span></span><span data-line="4829"></span> for which <span data-line="4829"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma{},\Delta{},\Gamma{},ctx \vdash{} s:R \dashv{} \Gamma{}&#39;$</span></span><span data-line="4829"></span>,
</li>
<li class="li ul-li list-star-li compact-li" data-line="4830"><span data-line="4830"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi,\Gamma{}\vdash{}\xi$</span></span><span data-line="4830"></span>, and
</li>
<li class="li ul-li list-star-li compact-li" data-line="4831"><span data-line="4831"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi\vdash{}\sigma$</span></span><span data-line="4831"></span>.
</li>
<li class="li ul-li list-star-li compact-li" data-line="4832"><span data-line="4832"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Sigma,\Delta,\Gamma\vdash{}e:\tau{}{}$</span></span><span data-line="4832"></span>.
</li></ul>

<p class="p noindent para-continue" data-line="4834"><span data-line="4834"></span>If there is a final configuration <span data-line="4834"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\langle{}\xi&#39;,\sigma&#39;,sig\rangle{}$</span></span><span data-line="4834"></span> such that
</p>
<div class="mathpre para-block input-mathpre" data-line="4835"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\langle{}\xi,\sigma,\mathid{s}\rangle{}\Downarrow_{\mathid{s}}\langle{}\xi&#39;,\sigma&#39;,\mathid{sig}\rangle{},
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4839"><span data-line="4839"></span>then there exists an extension <span data-line="4839"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39; \supseteq \Xi$</span></span><span data-line="4839"></span> of the store
typing such that
</p>
<ul class="ul list-star compact" data-line="4842">
<li class="li ul-li list-star-li compact-li" data-line="4842"><span data-line="4842"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi,R \vdash{} sig$</span></span><span data-line="4842"></span>,
</li>
<li class="li ul-li list-star-li compact-li" data-line="4843"><span data-line="4843"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39;\vdash{}\xi&#39;:\Gamma{}&#39;$</span></span><span data-line="4843"></span>, and
</li>
<li class="li ul-li list-star-li compact-li" data-line="4844"><span data-line="4844"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\Xi&#39;\vdash{}\sigma&#39;$</span></span><span data-line="4844"></span>.</li></ul></div>
<div class="mathpre para-block input-mathpre" data-line="4847"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\forall \Sigma{},\Delta{},\Gamma{},\mathid{ctx},\mathid{s},\mathid{R},\Gamma{}&#39;,\xi,\sigma,\xi&#39;,\sigma&#39;,\mathid{sig}\\
\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}:~\mathid{R}~\dashv{}~\Gamma{}&#39;~\Rightarrow \langle{}\xi,~\sigma,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}&#39;~\models \xi&#39;,\sigma&#39;~\wedge \Omega \mathid{ctx}
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-statement-type-preservation-proof" class="h3" data-line="4852" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4852"></span><span class="heading-before"><span class="heading-label">5.3.3</span>.&#8194;</span><span data-line="4852"></span>Statement Type Preservation Proof</h4>
<p class="p noindent para-continue" data-line="4854"><span data-line="4854"></span>Introducing variables:
</p>
<div class="mathpre para-block input-mathpre" data-line="4855"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{},\mathid{ctx},\mathid{s},\mathid{R},\Gamma{}&#39;,\xi,\sigma,\xi&#39;,\sigma&#39;,\mathid{sig}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4858"><span data-line="4858"></span>and assuming hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4859"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}:\mathid{R}~\dashv{}~\Gamma{}&#39;\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4864"><span data-line="4864"></span>we wish to prove the goal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4865"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4868"><span data-line="4868"></span>We induct on the derivation of:
</p>
<div class="mathpre para-block input-mathpre" data-line="4869"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4872"><span data-line="4872"></span>We assume freely <span data-line="4872"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$s$</span></span><span data-line="4872"></span> is free-variable free.
</p><h5 id="sec-case-assignment" class="h4" data-line="4874" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4874"></span><span class="heading-before"><span class="heading-label">5.3.3.1</span>.&#8194;</span><span data-line="4874"></span>Case Assignment</h5>
<p class="p noindent para-continue" data-line="4875"><span data-line="4875"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4876"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{e}_\mathid{l}\coloneqq{}\mathid{e}_\mathid{r}:\bot \dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathid{e}_\mathid{l}~:=~\mathid{e}_\mathid{r}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4881"><span data-line="4881"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4882"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_\mathid{r}~:~\tau{},\mathid{d}~\Rightarrow \langle \xi,~\sigma,~\mathid{e}~\rangle \Downarrow_\mathid{e}~\langle \xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}~\rangle \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau,\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4885"><span data-line="4885"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4886"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4890"><span data-line="4890"></span>By inversion on <span data-line="4890"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="4890"></span> and <span data-line="4890"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4890"></span> we amass hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4891"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\mathkw{lvalue}(\mathid{e}_\mathid{l})\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_\mathid{l}:~\tau{},\_\\
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_\mathid{r}:~\tau{},\_\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}_\mathid{r}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}\\
\mathid{H}_7:~\mathkw{lv\_of\_expr}~\xi \sigma&#39;~\mathid{e}_\mathid{l}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathid{lv})\\
\mathid{H}_8:~\mathkw{assign\_lv}~\xi&#39;~\sigma&#39;&#39;~\mathid{lv}~\mathid{v}~=~(\sigma&#39;&#39;&#39;,~\mathid{sig})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4900"><span data-line="4900"></span>Via the application <span data-line="4900"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_5 \, H_6$</span></span><span data-line="4900"></span> we obtain hypotheses
</p>
<div class="mathpre para-block input-mathpre" data-line="4901"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},\mathid{d}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4905"><span data-line="4905"></span>We may instantiate Lemma 1 as:
</p>
<div class="mathpre para-block input-mathpre" data-line="4906"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}_\mathid{l}~:~\tau{},\_~\Rightarrow \mathkw{lv\_of\_expr}~\xi \sigma&#39;~\mathid{e}_\mathid{l}~=~(\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathkw{sig\_continue},~\mathkw{lvalue}~\tau{}~\mathid{lv})~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{lv}~:~\tau{},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4910"><span data-line="4910"></span>Via the application <span data-line="4910"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_1 \, (L_0 \, (L_7 \, H_6) \, H_2) \, H_4 \, H_7$</span></span><span data-line="4910"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4911"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{11}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;&#39;,\sigma&#39;&#39;\\
\mathid{H}_{12}:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{lv}~:~\tau{},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4916"><span data-line="4916"></span>We may instantiate Lemma 6 as:
</p>
<div class="mathpre para-block input-mathpre" data-line="4917"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{L}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},\mathid{d}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{lv}~:~\tau{},\mathid{d}~\Rightarrow \mathkw{assign\_lvalue}~\,~\xi&#39;~\,~\sigma&#39;&#39;~\,~\mathid{lv}~\,~\mathid{v}~=~\sigma&#39;&#39;&#39;,\mathid{sig}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4921"><span data-line="4921"></span>Via the application <span data-line="4921"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_6 \, H_{10} \, H_{12} \, H_8 \, (L_0 \, (C_1 \, H_7) \, H_9)$</span></span><span data-line="4921"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4922"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{13}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4925"><span data-line="4925"></span>Subgoal <span data-line="4925"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="4925"></span> is thus proven by <span data-line="4925"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{13}$</span></span><span data-line="4925"></span>.
</p><h5 id="sec-case-conditional-reject" class="h4" data-line="4927" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4927"></span><span class="heading-before"><span class="heading-label">5.3.3.2</span>.&#8194;</span><span data-line="4927"></span>Case Conditional-Reject</h5>
<p class="p noindent para-continue" data-line="4928"><span data-line="4928"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4929"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2:\mathid{R}_1\wedge{}\mathid{R}_2~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}_{1}~\mathkw{else}~\mathid{s}_{2}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject\ v}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4934"><span data-line="4934"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4935"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject\ v},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}:\mathkw{bool},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4938"><span data-line="4938"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4939"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4942"><span data-line="4942"></span>By inversion on <span data-line="4942"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="4942"></span> and <span data-line="4942"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4942"></span> we collect hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4943"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_1:\mathid{R}_1~\dashv{}~\Gamma{}_1\\
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_2:\mathid{R}_2~\dashv{}~\Gamma{}_2\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_reject\ v},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4949"><span data-line="4949"></span>Through the agency of application <span data-line="4949"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_6$</span></span><span data-line="4949"></span> we come by hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4950"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}:\mathkw{bool},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4954"><span data-line="4954"></span>and <span data-line="4954"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_7$</span></span><span data-line="4954"></span> proves <span data-line="4954"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="4954"></span>.
</p><h5 id="sec-case-if-true" class="h4" data-line="4956" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4956"></span><span class="heading-before"><span class="heading-label">5.3.3.3</span>.&#8194;</span><span data-line="4956"></span>Case If-True</h5>
<p class="p noindent para-continue" data-line="4957"><span data-line="4957"></span>We inherit hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4958"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{if}~(\mathid{e})~\mathid{s}~:\bot \dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4963"><span data-line="4963"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4964"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bool},\_~\Rightarrow \langle \xi,~\sigma,~\mathid{e}~\rangle \Downarrow_\mathid{e}~\langle \xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathkw{true}~\rangle \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}:\bot \dashv{}~\Gamma{}&#39;~\Rightarrow \langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \mathkw{push}~\xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}&#39;~\models \xi&#39;&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4968"><span data-line="4968"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="4969"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4972"><span data-line="4972"></span>By inversion on <span data-line="4972"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="4972"></span> and <span data-line="4972"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="4972"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4973"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}:\mathid{R}~\dashv{}~\Gamma{}&#39;\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{true}\rangle{}\\
\mathid{H}_6:~\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4979"><span data-line="4979"></span>Under the aegis of application <span data-line="4979"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_5$</span></span><span data-line="4979"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4980"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4984"><span data-line="4984"></span>By the application <span data-line="4984"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_0 \, (L_8 \, H_6)$</span></span><span data-line="4984"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4985"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="4988"><span data-line="4988"></span>and by <span data-line="4988"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_9$</span></span><span data-line="4988"></span> subgoal <span data-line="4988"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="4988"></span> is proven.
</p><h5 id="sec-case-if-false" class="h4" data-line="4990" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="4990"></span><span class="heading-before"><span class="heading-label">5.3.3.4</span>.&#8194;</span><span data-line="4990"></span>Case If-False</h5>
<p class="p noindent para-continue" data-line="4991"><span data-line="4991"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="4992"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{if}~(\mathid{e})~\mathid{s}~:\bot \dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="4997"><span data-line="4997"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="4998"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{bool},\_~\Rightarrow \langle \xi,~\sigma,~\mathid{e}~\rangle \Downarrow_\mathid{e}~\langle \xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathkw{false}~\rangle \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5001"><span data-line="5001"></span>We wish to prove:
</p>
<div class="mathpre para-block input-mathpre" data-line="5002"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5005"><span data-line="5005"></span>By inversion on hypotheses <span data-line="5005"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5005"></span> and <span data-line="5005"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5005"></span> we inherit hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5006"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}:\mathid{R}~\dashv{}~\Gamma{}&#39;\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5011"><span data-line="5011"></span>Via application <span data-line="5011"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_5$</span></span><span data-line="5011"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5012"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5016"><span data-line="5016"></span>and by <span data-line="5016"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="5016"></span> we prove <span data-line="5016"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5016"></span>.
</p><h5 id="sec-case-if-else-true" class="h4" data-line="5018" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5018"></span><span class="heading-before"><span class="heading-label">5.3.3.5</span>.&#8194;</span><span data-line="5018"></span>Case If-Else-True</h5>
<p class="p noindent para-continue" data-line="5019"><span data-line="5019"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5020"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2:\mathid{R}_1\wedge{}\mathid{R}_2~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5025"><span data-line="5025"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5026"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_1:\mathid{R}_1~\dashv{}~\Gamma{}_1~\Rightarrow \langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}_{1}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}_1~\models \xi&#39;&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5030"><span data-line="5030"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5031"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5034"><span data-line="5034"></span>By inversion on <span data-line="5034"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5034"></span> and <span data-line="5034"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5034"></span> we amass hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5035"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_1:\mathid{R}_1~\dashv{}~\Gamma{}_1\\
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_2:\mathid{R}_2~\dashv{}~\Gamma{}_2\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{true}\rangle{}\\
\mathid{H}_7:~\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}_1\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5042"><span data-line="5042"></span>Via the application <span data-line="5042"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_6$</span></span><span data-line="5042"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5043"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5047"><span data-line="5047"></span>By the application <span data-line="5047"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_0 \, (L_8 \, H_7) \, H_8$</span></span><span data-line="5047"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5048"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5051"><span data-line="5051"></span>and <span data-line="5051"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="5051"></span> proves <span data-line="5051"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5051"></span>.
</p><h5 id="sec-case-if-else-false" class="h4" data-line="5053" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5053"></span><span class="heading-before"><span class="heading-label">5.3.3.6</span>.&#8194;</span><span data-line="5053"></span>Case If-Else-False</h5>
<p class="p noindent para-continue" data-line="5054"><span data-line="5054"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5055"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2:\mathid{R}_1\wedge{}\mathid{R}_2~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{if}~(\mathid{e})~\mathid{s}_1~\mathkw{else}~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5060"><span data-line="5060"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5061"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{false}~:~\mathkw{bool},\_\\
\mathid{I}_2:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_2:\mathid{R}_2~\dashv{}~\Gamma{}_2~\Rightarrow \langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\Rightarrow \Sigma{},\Delta{},\Gamma{}_2~\models \xi&#39;&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5065"><span data-line="5065"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5066"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5069"><span data-line="5069"></span>By inversion on <span data-line="5069"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5069"></span> and <span data-line="5069"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5069"></span> we amass hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5070"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}:\mathkw{bool},\_\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_1:\mathid{R}_1~\dashv{}~\Gamma{}_1\\
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathid{s}_2:\mathid{R}_2~\dashv{}~\Gamma{}_2\\
\mathid{H}_6:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathkw{false}\rangle{}\\
\mathid{H}_7:~\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{s}_2\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5077"><span data-line="5077"></span>Via the application <span data-line="5077"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_6$</span></span><span data-line="5077"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5078"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{true}~:~\mathkw{bool},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5082"><span data-line="5082"></span>By the application <span data-line="5082"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_0 \, (L_8 \, H_7) \, H_8$</span></span><span data-line="5082"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5083"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5086"><span data-line="5086"></span>and <span data-line="5086"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="5086"></span> proves <span data-line="5086"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5086"></span>.
</p><h5 id="sec-case-block" class="h4" data-line="5088" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5088"></span><span class="heading-before"><span class="heading-label">5.3.3.7</span>.&#8194;</span><span data-line="5088"></span>Case Block</h5>
<p class="p noindent para-continue" data-line="5089"><span data-line="5089"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5090"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\{\overline{\mathid{s}}\}:\mathid{sig}~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\{\mathid{s}_1;~...~\mathid{s}_\mathid{n};\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5095"><span data-line="5095"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5096"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\langle{}\xi,~\sigma,~\overline{\mathid{s}}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5099"><span data-line="5099"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5100"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5103"><span data-line="5103"></span>By inversion on <span data-line="5103"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5103"></span> and <span data-line="5103"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5103"></span> we assemble hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5104"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\overline{\mathid{s}}:\mathid{sig}~\dashv{}~\Gamma{}&#39;\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\overline{\mathid{s}}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5108"><span data-line="5108"></span>By the application <span data-line="5108"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_0 \, (L_8 \, H_4) \, H_2$</span></span><span data-line="5108"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5109"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h5 id="sec-case-exit-continue" class="h4" data-line="5113" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5113"></span><span class="heading-before"><span class="heading-label">5.3.3.8</span>.&#8194;</span><span data-line="5113"></span>Case Exit-Continue</h5>
<p class="p noindent para-continue" data-line="5114"><span data-line="5114"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5115"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathkw{InParserState}~\vdash{}~\mathkw{exit}:\mathkw{returns}~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~;\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5120"><span data-line="5120"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5121"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5124"><span data-line="5124"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="5124"></span> proves <span data-line="5124"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5124"></span>.
</p><h5 id="sec-case-empty" class="h4" data-line="5126" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5126"></span><span class="heading-before"><span class="heading-label">5.3.3.9</span>.&#8194;</span><span data-line="5126"></span>Case Empty</h5>
<p class="p noindent para-continue" data-line="5127"><span data-line="5127"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5128"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{;}:\bot \dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~;\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5133"><span data-line="5133"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5134"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5137"><span data-line="5137"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="5137"></span> proves <span data-line="5137"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5137"></span>.
</p><h5 id="sec-case-return-void" class="h4" data-line="5139" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5139"></span><span class="heading-before"><span class="heading-label">5.3.3.10</span>.&#8194;</span><span data-line="5139"></span>Case Return-Void</h5>
<p class="p noindent para-continue" data-line="5140"><span data-line="5140"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5141"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathid{ctx}~\vdash{}~\mathkw{return}:\mathkw{returns}~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{return}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi,~\sigma,~\mathkw{sig\_return\ None}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5146"><span data-line="5146"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5147"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5150"><span data-line="5150"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="5150"></span> proves <span data-line="5150"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5150"></span>.
</p><h5 id="sec-case-return-value" class="h4" data-line="5152" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5152"></span><span class="heading-before"><span class="heading-label">5.3.3.11</span>.&#8194;</span><span data-line="5152"></span>Case Return-Value</h5>
<p class="p noindent para-continue" data-line="5153"><span data-line="5153"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5154"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathkw{InFunction}~\tau{}~\vdash{}~\mathkw{return}~\mathid{e}:\mathkw{returns}~\dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{return}~\mathid{e}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_return\ v}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5159"><span data-line="5159"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5160"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},\_~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5163"><span data-line="5163"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5164"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5167"><span data-line="5167"></span>By inversion on <span data-line="5167"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5167"></span> and <span data-line="5167"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5167"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5168"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{},\_\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5172"><span data-line="5172"></span>By virtue of the application <span data-line="5172"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_4$</span></span><span data-line="5172"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5173"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau{},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5177"><span data-line="5177"></span>and <span data-line="5177"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_5$</span></span><span data-line="5177"></span> proves <span data-line="5177"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5177"></span>.
</p><h5 id="sec-case-switch-no-match" class="h4" data-line="5179" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5179"></span><span class="heading-before"><span class="heading-label">5.3.3.12</span>.&#8194;</span><span data-line="5179"></span>Case Switch-No-Match</h5>
<p class="p noindent para-continue" data-line="5180"><span data-line="5180"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5181"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathkw{InControl}~\vdash{}~\mathkw{switch}~(\mathid{e})~\{~\mathid{case}_{1},~\dots,~\mathid{case}_\mathid{n}~\}:\bot \dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{switch}~(\mathid{e})~\{\overline{\mathid{case}}\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5186"><span data-line="5186"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5187"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{enum}~\mathid{X},\_~\{~\overline{\mathid{m}}~\}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{name}_1.\mathid{name}_2\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{m}}~\},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5190"><span data-line="5190"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5191"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5194"><span data-line="5194"></span>By inversion on hypotheses <span data-line="5194"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5194"></span> and <span data-line="5194"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5194"></span> we profit hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5195"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{m}}~\},~\_\\
\mathid{H}_4:~\forall \mathid{i}.~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{case\_ok}_\mathid{X}~\mathid{case}_\mathid{i}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{name}_1.\mathid{name}_2\rangle{}\\
\mathid{H}_6:~\mathkw{match\_switch\_case}~\overline{\mathid{case}}~\mathid{name}_2~=~\mathid{None}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5201"><span data-line="5201"></span>By means of application <span data-line="5201"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \,H_3 \, H_5$</span></span><span data-line="5201"></span> we procure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5202"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{m}}~\},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5206"><span data-line="5206"></span>and <span data-line="5206"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_7$</span></span><span data-line="5206"></span> proves <span data-line="5206"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5206"></span>.
</p><h5 id="sec-case-switch-match" class="h4" data-line="5208" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5208"></span><span class="heading-before"><span class="heading-label">5.3.3.13</span>.&#8194;</span><span data-line="5208"></span>Case Switch-Match</h5>
<p class="p noindent para-continue" data-line="5209"><span data-line="5209"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5210"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{},\mathkw{InControl}~\vdash{}~\mathkw{switch}~(\mathid{e})~\{~\mathid{case}_{1},~\dots,~\mathid{case}_\mathid{n}~\}:\bot \dashv{}~\Gamma{}\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{switch}~(\mathid{e})~\{\overline{\mathid{case}}\}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5215"><span data-line="5215"></span>and induction hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5216"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{enum}~\mathid{X},\_~\{~\overline{\mathid{m}}~\}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{name}_1.\mathid{name}_2\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{m}}~\},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5219"><span data-line="5219"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5220"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5223"><span data-line="5223"></span>By inversion on <span data-line="5223"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5223"></span> and <span data-line="5223"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5223"></span> we garner hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5224"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{m}}~\}\\
\mathid{H}_4:~\forall \mathid{i}.~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{case\_ok}_\mathid{X}~\mathid{case}_\mathid{i}\\
\mathid{H}_5:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{name}_1.\mathid{name}_2\rangle{}\\
\mathid{H}_6:~\mathkw{match\_switch\_case}~\overline{\mathid{case}}~\mathid{name}_2~=~\mathid{Some}\ \mathid{blk}\\
\mathid{H}_7:~\langle{}\mathkw{push}~\xi&#39;,~\sigma&#39;,~\mathid{blk}\rangle{}~\Downarrow_\mathid{s}~\langle{}\xi&#39;&#39;,~\sigma&#39;&#39;,~\mathid{sig}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5231"><span data-line="5231"></span>TODO: where is <span data-line="5231"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\mathkw{case\_ok}$</span></span><span data-line="5231"></span> defined?
</p>
<p class="p indent para-continue" data-line="5233"><span data-line="5233"></span>Via application <span data-line="5233"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_5$</span></span><span data-line="5233"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5234"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_9:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\mathkw{enum}~\mathid{X}~\{~\overline{\mathid{m}}~\},~\_
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5239"><span data-line="5239"></span>As a result of application <span data-line="5239"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_0 \, (L_8 \, H_7) \, H_8$</span></span><span data-line="5239"></span> we secure hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5240"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_{10}:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5243"><span data-line="5243"></span>and <span data-line="5243"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_{10}$</span></span><span data-line="5243"></span> proves <span data-line="5243"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5243"></span>.
</p><h3 id="sec-type-soundness-of-declarations" class="h2" data-line="5245" data-heading-depth="2" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5245"></span><span class="heading-before"><span class="heading-label">5.4</span>.&#8194;</span><span data-line="5245"></span>Type Soundness of Declarations</h3><h4 id="sec-declaration-type-preservation-theorem-statement" class="h3" data-line="5247" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5247"></span><span class="heading-before"><span class="heading-label">5.4.1</span>.&#8194;</span><span data-line="5247"></span>Declaration Type Preservation Theorem Statement</h4>
<div class="mathpre para-block input-mathpre" data-line="5249"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\forall \Sigma{},\Delta{},\Gamma{},\mathid{decl},\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;,\xi,\sigma,\xi&#39;,\sigma&#39;,\\
\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{decl}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;~\Rightarrow \langle{}\xi,~\sigma,~\mathid{decl}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;,~\sigma&#39;\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div><h4 id="sec-declaration-type-preservation-proof" class="h3" data-line="5254" data-heading-depth="3" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5254"></span><span class="heading-before"><span class="heading-label">5.4.2</span>.&#8194;</span><span data-line="5254"></span>Declaration Type Preservation Proof</h4>
<p class="p noindent para-continue" data-line="5256"><span data-line="5256"></span>Introducing variables:
</p>
<div class="mathpre para-block input-mathpre" data-line="5257"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{},\Delta{},\Gamma{},\mathid{decl},\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;,\xi,\sigma,\xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5260"><span data-line="5260"></span>and hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5261"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{decl}~\dashv{}~\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathid{decl}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;,~\sigma&#39;\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5266"><span data-line="5266"></span>we wish to prove the goal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5267"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\Sigma{}&#39;,\Delta{}&#39;,\Gamma{}&#39;~\models \xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5270"><span data-line="5270"></span>We induct on the derivation of:
</p>
<div class="mathpre para-block input-mathpre" data-line="5271"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathid{decl}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;,~\sigma&#39;\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5274"><span data-line="5274"></span>We assumely freely <span data-line="5274"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$decl$</span></span><span data-line="5274"></span> is free-variable free.
</p><h5 id="sec-case-constant-decl" class="h4" data-line="5276" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5276"></span><span class="heading-before"><span class="heading-label">5.4.2.1</span>.&#8194;</span><span data-line="5276"></span>Case Constant-Decl</h5>
<p class="p noindent para-continue" data-line="5277"><span data-line="5277"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5278"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{const}~\tau{}~\mathid{x}~:=~\mathid{v}~\dashv{}~\Sigma{}[\mathid{x}~=~\mathid{v}],\Delta{},\Gamma{}[\mathid{x}:\tau{}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{const}~\tau{}~\mathid{x}\coloneqq{}\mathid{v}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5283"><span data-line="5283"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5284"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{}[\mathid{x}=\mathid{v}],\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5287"><span data-line="5287"></span>By inversion on <span data-line="5287"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5287"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5288"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}:\mathid{t}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5291"><span data-line="5291"></span>Via the application <span data-line="5291"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{10} \, (L_{13} \, H_3 \, H_2)$</span></span><span data-line="5291"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5292"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_4:~\Sigma{}[\mathid{x}=\mathid{v}],\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5295"><span data-line="5295"></span>and <span data-line="5295"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_4$</span></span><span data-line="5295"></span> proves <span data-line="5295"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5295"></span>.
</p><h5 id="sec-case-parser-decl" class="h4" data-line="5297" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5297"></span><span class="heading-before"><span class="heading-label">5.4.2.2</span>.&#8194;</span><span data-line="5297"></span>Case Parser-Decl</h5>
<div class="mathpre para-block input-mathpre" data-line="5298"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{X}:\tau{}_\mathid{ctor}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi[\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}/\mathid{X}],~\sigma\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5303"><span data-line="5303"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5304"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{X}:\tau{}_\mathid{ctor}]~\models \xi[\mathkw{parser}~\mathid{X}(\overline{\mathid{x}:\tau{},\mathid{d}})(\overline{\mathid{x}:\tau{}})~\{~\overline{\mathid{decl}}~\overline{\mathid{state}}~\}/\mathid{X}],~\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5307"><span data-line="5307"></span>Sketchy: I am just doing the non-empty case for now.
</p>
<p class="p indent para-continue" data-line="5309"><span data-line="5309"></span>By inversion on <span data-line="5309"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="5309"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5310"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\models (\mathid{P},\mathid{E},\Delta{},\nu),\sigma\\
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}~\models_{\mathid{scope}}~\epsilon,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5314"><span data-line="5314"></span>Sketchy: <span data-line="5314"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\models$</span></span><span data-line="5314"></span> may need to take into account other constituents of <span data-line="5314"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$\xi$</span></span><span data-line="5314"></span>.
Right now it only takes into account the variable to location mapping <span data-line="5315"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$E$</span></span><span data-line="5315"></span>.
</p>
<p class="p indent" data-line="5317"><span data-line="5317"></span>TODO: The dynamic semantics do not map the name <span data-line="5317"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X$</span></span><span data-line="5317"></span> to a value in <span data-line="5317"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$(\sigma \circ \xi)$</span></span><span data-line="5317"></span>.
I am not sure how to show that preservation holds still, since theoretically <span data-line="5318"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$X$</span></span><span data-line="5318"></span> may have been mapped to a value of a different type<span data-line="5318"></span>&#8230;<span data-line="5318"></span>
This is a problem with several of the declaration rules<span data-line="5319"></span>&#8230;<span data-line="5319"></span>
</p><h5 id="sec-case-function-decl" class="h4" data-line="5321" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5321"></span><span class="heading-before"><span class="heading-label">5.4.2.3</span>.&#8194;</span><span data-line="5321"></span>Case Function-Decl</h5>
<p class="p noindent para-continue" data-line="5322"><span data-line="5322"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5323"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:~\tau{},\mathid{d}})~\mathid{blk}~\dashv{}~\Sigma{},\Delta{},\Gamma{}&#39;\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;[~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}/\mathid{x}],~\sigma&#39;\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5328"><span data-line="5328"></span>and we wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5329"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}&#39;~\models \xi&#39;[~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}/\mathid{x}],~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5332"><span data-line="5332"></span>By inversion on <span data-line="5332"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5332"></span> and <span data-line="5332"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5332"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5333"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\exists \rho,~\Sigma{},\Delta{}[\overline{\mathid{X}~\to \rho}],\Gamma{}[\overline{\mathid{x}:\tau{}}],\mathkw{InFunction}~\tau{}~\vdash{}~\mathid{blk}:~\mathkw{returns}~\tau{}~\dashv{}~\Gamma{}_{\mathid{blk}}\\
\mathid{H}_4:~\Gamma{}&#39;~=~\Gamma{}[\mathid{x}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:~\tau{}})~:~\tau{}]\\
\mathid{H}_5:~\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\xi \otimes (\overline{\mathid{x}:\tau{},\mathid{d}})~\to \mathid{blk})~=~\xi&#39;,~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5338"><span data-line="5338"></span>Sketchy: need to define type-checking for values!
</p>
<p class="p indent para-continue" data-line="5340"><span data-line="5340"></span>By construction we have:
</p>
<div class="mathpre para-block input-mathpre" data-line="5341"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}&#39;~\vdash{}~\xi \otimes (\overline{\mathid{x}:\tau{},\mathid{d}})~\to \mathid{blk}~:~\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:~\tau{}})~:~\mathid{t}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5344"><span data-line="5344"></span>Via the application <span data-line="5344"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{12} \, (L_{13} \, H_6 \, H_2)$</span></span><span data-line="5344"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5345"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}&#39;~\models \xi&#39;[~\mathkw{function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})~\mathid{blk}/\mathid{x}],~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5348"><span data-line="5348"></span>and <span data-line="5348"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_7$</span></span><span data-line="5348"></span> proves <span data-line="5348"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5348"></span>.
</p><h5 id="sec-case-extern-function-decl" class="h4" data-line="5350" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5350"></span><span class="heading-before"><span class="heading-label">5.4.2.4</span>.&#8194;</span><span data-line="5350"></span>Case Extern-Function-Decl</h5>
<p class="p noindent para-continue" data-line="5351"><span data-line="5351"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5352"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:~\tau{},\mathid{d}})~\mathid{blk}~\dashv{}~\Sigma{},\Delta{},\Gamma{}&#39;\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})\rangle{}~\Downarrow_\mathid{d}~\langle{}(\xi&#39;[\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})/\mathid{x}]),~\sigma&#39;\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5357"><span data-line="5357"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5358"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}&#39;~\models (\xi&#39;[\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})/\mathid{x}]),~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5361"><span data-line="5361"></span>By inversion on <span data-line="5361"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5361"></span> and <span data-line="5361"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5361"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5362"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Gamma{}&#39;~=~\Gamma{}[\mathid{x}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:~\tau{},\mathid{d}})~:~\tau{}]\\
\mathid{H}_4:~\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\mathkw{extern}~\mathid{x}~\mathkw{None})~=~\xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5366"><span data-line="5366"></span>Sketchy: need to define type-checking for values!
</p>
<p class="p indent para-continue" data-line="5368"><span data-line="5368"></span>By construction we have:
</p>
<div class="mathpre para-block input-mathpre" data-line="5369"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}&#39;~\vdash{}~(\mathkw{extern}~\mathid{x}~\mathkw{None})~:~\mathid{x}:\mathkw{function}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:~\tau{},\mathid{d}})~:~\mathid{t}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5372"><span data-line="5372"></span>Via the application <span data-line="5372"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{12} \, (L_{13} \, H_5 \, H_2)$</span></span><span data-line="5372"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5373"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}&#39;~\models (\xi&#39;[\mathkw{extern\ function}~\tau{}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}})/\mathid{x}]),~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5376"><span data-line="5376"></span>and <span data-line="5376"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_6$</span></span><span data-line="5376"></span> proves <span data-line="5376"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5376"></span>.
</p><h5 id="sec-case-variable-decl" class="h4" data-line="5378" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5378"></span><span class="heading-before"><span class="heading-label">5.4.2.5</span>.&#8194;</span><span data-line="5378"></span>Case Variable-Decl</h5>
<p class="p noindent para-continue" data-line="5379"><span data-line="5379"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5380"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\tau{}~\mathid{x}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\tau{}~\mathid{x}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5385"><span data-line="5385"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5386"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5389"><span data-line="5389"></span>By dint of application <span data-line="5389"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{13} \, (L_{14} \, H_2) \, H_2$</span></span><span data-line="5389"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5390"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\mathkw{init\_val}~\,~\xi \,~\tau{})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5393"><span data-line="5393"></span>and <span data-line="5393"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_3$</span></span><span data-line="5393"></span> proves <span data-line="5393"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5393"></span>.
</p><h5 id="sec-case-variable-initialized-decl-success" class="h4" data-line="5395" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5395"></span><span class="heading-before"><span class="heading-label">5.4.2.6</span>.&#8194;</span><span data-line="5395"></span>Case Variable-Initialized-Decl-Success</h5>
<p class="p noindent para-continue" data-line="5396"><span data-line="5396"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5397"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\tau{}~\mathid{x}~:=~\mathid{e}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\tau{}~\mathid{x}~:=~\mathid{e}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5402"><span data-line="5402"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5403"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5406"><span data-line="5406"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5407"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5410"><span data-line="5410"></span>By inversion on <span data-line="5410"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5410"></span> and <span data-line="5410"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5410"></span> we secure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5411"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathkw{sig\_continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5415"><span data-line="5415"></span>Via application <span data-line="5415"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_4$</span></span><span data-line="5415"></span> we acquire hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5416"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5420"><span data-line="5420"></span>By application <span data-line="5420"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{13} \, H_6 \, H_5$</span></span><span data-line="5420"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5421"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5424"><span data-line="5424"></span>and <span data-line="5424"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_7$</span></span><span data-line="5424"></span> proves <span data-line="5424"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5424"></span>.
</p><h5 id="sec-case-variable-initialized-decl-fail" class="h4" data-line="5426" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5426"></span><span class="heading-before"><span class="heading-label">5.4.2.7</span>.&#8194;</span><span data-line="5426"></span>Case Variable-Initialized-Decl-Fail</h5>
<p class="p noindent para-continue" data-line="5427"><span data-line="5427"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5428"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\tau{}~\mathid{x}~:=~\mathid{e}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\tau{}~\mathid{x}~:=~\mathid{e}\rangle{}~\Downarrow_\mathid{d}~\langle{}\mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5433"><span data-line="5433"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5434"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}~\Rightarrow \langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge \Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5437"><span data-line="5437"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5438"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5441"><span data-line="5441"></span>By inversion on hypotheses <span data-line="5441"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5441"></span> we procure hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5442"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{e}~:~\tau{}\\
\mathid{H}_4:~\langle{}\xi,~\sigma,~\mathid{e}\rangle{}~\Downarrow_\mathid{e}~\langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig},~\mathid{v}\rangle{}\\
\mathid{H}_5:~\mathid{sig}~\neq \mathkw{sig\_continue}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5447"><span data-line="5447"></span>By application <span data-line="5447"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_4$</span></span><span data-line="5447"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5448"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathid{v}~:~\tau
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5452"><span data-line="5452"></span>By dint of application <span data-line="5452"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{13} \, (L_{14} \, H_6) \, H_6$</span></span><span data-line="5452"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5453"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_8:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\tau{}]~\models \mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~(\mathkw{init\_val}~\xi \tau{})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5456"><span data-line="5456"></span>and <span data-line="5456"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_8$</span></span><span data-line="5456"></span> proves <span data-line="5456"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5456"></span>.
</p><h5 id="sec-case-value-set-decl-success" class="h4" data-line="5458" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5458"></span><span class="heading-before"><span class="heading-label">5.4.2.8</span>.&#8194;</span><span data-line="5458"></span>Case Value-Set-Decl-Success</h5>
<p class="p noindent" data-line="5459"><span data-line="5459"></span>TODO: currently I am not sure how we are checking the size <span data-line="5459"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$e$</span></span><span data-line="5459"></span> is numeric<span data-line="5459"></span>&#8230;<span data-line="5459"></span>
</p>
<p class="p indent para-continue" data-line="5461"><span data-line="5461"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5462"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\mathkw{set}~\tau{}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}\rangle{}~\Downarrow \langle{}\mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5467"><span data-line="5467"></span>and induction hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5468"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{I}_1:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma \Rightarrow ???~\Rightarrow \langle{}\xi[\tau{}/\mathid{x}],~\sigma,~\mathid{e}\rangle{}~\Downarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\_\mathid{continue},~\mathid{v}\rangle{}~\Rightarrow \Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;~\wedge ???
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5471"><span data-line="5471"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5472"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\mathkw{set}~\tau{}]~\models \mathkw{new}~\,~\xi&#39;~\,~\sigma&#39;~\,~\mathid{x}~\,~\mathid{v}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5475"><span data-line="5475"></span>By inversion on <span data-line="5475"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5475"></span> and <span data-line="5475"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5475"></span> we score hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5476"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\textit{I need some hypothesis about e but one currently does not exist...}\\
\mathid{H}_4:~\langle{}\xi[\tau{}/\mathid{x}],~\sigma,~\mathid{e}\rangle{}~\Downarrow \langle{}\xi&#39;,~\sigma&#39;,~\mathid{sig}\_\mathid{continue},~\mathid{v}\rangle{}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5480"><span data-line="5480"></span>By application <span data-line="5480"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$I_1 \, H_2 \, H_3 \, H_4$</span></span><span data-line="5480"></span> we get hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5481"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_5:~\Sigma{},\Delta{},\Gamma{}~\models \xi&#39;,\sigma&#39;\\
\mathid{H}_6:~???
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5485"><span data-line="5485"></span>TODO: Type-Decl-Value-Set needs a hypothesis for <span data-line="5485"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$e$</span></span><span data-line="5485"></span>.
</p><h5 id="sec-case-value-set-decl-fail" class="h4" data-line="5487" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5487"></span><span class="heading-before"><span class="heading-label">5.4.2.9</span>.&#8194;</span><span data-line="5487"></span>Case Value-Set-Decl-Fail</h5>
<p class="p noindent para-continue" data-line="5488"><span data-line="5488"></span>We have hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5489"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\mathid{x}:\mathkw{set}~\tau{}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{value\_set}\langle{}\tau{}\rangle{}(\mathid{e})~\mathid{x}\rangle{}~\Downarrow \langle{}\xi,~\sigma\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5494"><span data-line="5494"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5495"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5498"><span data-line="5498"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_2$</span></span><span data-line="5498"></span> proves <span data-line="5498"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5498"></span>.
</p><h5 id="sec-case-action-decl" class="h4" data-line="5500" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5500"></span><span class="heading-before"><span class="heading-label">5.4.2.10</span>.&#8194;</span><span data-line="5500"></span>Case Action-Decl</h5>
<p class="p noindent para-continue" data-line="5501"><span data-line="5501"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5502"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{action}~\mathid{x}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}~\dashv{}~\Sigma{},\Delta{},\Gamma{}&#39;\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi&#39;[\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}/\mathid{x}],~\sigma&#39;\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5507"><span data-line="5507"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5508"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}&#39;~\models \xi&#39;[\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}/\mathid{x}],~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5511"><span data-line="5511"></span>By inversion on <span data-line="5511"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5511"></span> and <span data-line="5511"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_1$</span></span><span data-line="5511"></span> we obtain hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5512"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\Sigma{},\Delta{}[\overline{\mathid{X}=\mathid{X}}],\Gamma{}[\overline{\mathid{x}:\tau{}}],\mathkw{InAction}~\vdash{}~\mathid{blk}~:~\mathkw{returns}~\dashv{}~\Gamma{}_{\mathid{blk}}\\
\mathid{H}_4:~\Gamma{}&#39;~=~\Gamma{}[\mathid{x}:\mathkw{action}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}_{0}},\overline{\mathid{x}:\tau{}})]\\
\mathid{H}_5:~\mathkw{new}~\,~\xi \,~\sigma \,~\mathid{x}~\,~(\xi \otimes (\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\to \mathid{blk})~=~\xi&#39;,\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5517"><span data-line="5517"></span>Sketchy: we need to define type-checking for values!
</p>
<p class="p indent para-continue" data-line="5519"><span data-line="5519"></span>By construction we have that:
</p>
<div class="mathpre para-block input-mathpre" data-line="5520"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_6:~\Sigma{},\Delta{},\Gamma{}&#39;~\vdash{}~\xi \otimes (\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\to \mathid{blk}~:~\mathkw{action}\langle{}\overline{\mathid{X}}\rangle{}(\overline{\mathid{x}:\tau{},\mathid{d}_{0}},\overline{\mathid{x}:\tau{}})
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5523"><span data-line="5523"></span>Via application <span data-line="5523"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{12} \, (L_{13} \, H_6 \, H_2)$</span></span><span data-line="5523"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5524"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_7:~\Sigma{},\Delta{},\Gamma{}&#39;~\models \xi&#39;[\mathkw{action}~\mathid{x}~(\overline{\mathid{x}:\tau{},\mathid{d}_0},\overline{\mathid{x}:\tau{}})~\mathid{blk}/\mathid{x}],~\sigma&#39;
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5527"><span data-line="5527"></span>and <span data-line="5527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_7$</span></span><span data-line="5527"></span> proves <span data-line="5527"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5527"></span>.
</p><h5 id="sec-case-error-decl" class="h4" data-line="5529" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5529"></span><span class="heading-before"><span class="heading-label">5.4.2.11</span>.&#8194;</span><span data-line="5529"></span>Case Error-Decl</h5>
<p class="p noindent para-continue" data-line="5530"><span data-line="5530"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5531"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{error}~\{~\overline{\mathid{x}}~\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\overline{\mathkw{error}.\mathid{x}:\mathkw{error}}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{error}~\{~\overline{\mathid{x}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi,~\sigma\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5536"><span data-line="5536"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5537"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\overline{\mathkw{error}.\mathid{x}:\mathkw{error}}]~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5540"><span data-line="5540"></span>By inversion on <span data-line="5540"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5540"></span> we get hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5541"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\overline{\mathkw{error}.\mathid{x}~\notin \Gamma{}}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5544"><span data-line="5544"></span>Via application <span data-line="5544"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{15} \, H_3 \, H_2$</span></span><span data-line="5544"></span> we procure hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5545"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}[\overline{\mathkw{error}.\mathid{x}:\mathkw{error}}]~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5548"><span data-line="5548"></span>and <span data-line="5548"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_4$</span></span><span data-line="5548"></span> proves <span data-line="5548"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5548"></span>.
</p><h5 id="sec-case-matchkind-decl" class="h4" data-line="5550" data-heading-depth="4" style="display:block;font-family:helvetica, sans-serif;font-weight:bold"><span data-line="5550"></span><span class="heading-before"><span class="heading-label">5.4.2.12</span>.&#8194;</span><span data-line="5550"></span>Case Matchkind-Decl</h5>
<p class="p noindent para-continue" data-line="5551"><span data-line="5551"></span>We have hypotheses:
</p>
<div class="mathpre para-block input-mathpre" data-line="5552"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_0:~\Sigma{},\Delta{},\Gamma{}~\vdash{}~\mathkw{match\_kind}~\{~\overline{\mathid{x}}~\}~\dashv{}~\Sigma{},\Delta{},\Gamma{}[\overline{.\mathid{x}:\mathkw{match\_kind}}]\\
\mathid{H}_1:~\langle{}\xi,~\sigma,~\mathkw{match\_kind}~\{~\overline{\mathid{x}}~\}\rangle{}~\Downarrow_\mathid{d}~\langle{}\xi,~\sigma\rangle{}\\
\mathid{H}_2:~\Sigma{},\Delta{},\Gamma{}~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5557"><span data-line="5557"></span>We wish to prove subgoal:
</p>
<div class="mathpre para-block input-mathpre" data-line="5558"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{SG}:~\Sigma{},\Delta{},\Gamma{}[\overline{.\mathid{x}:\mathkw{match\_kind}}]~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5561"><span data-line="5561"></span>By inversion on <span data-line="5561"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_0$</span></span><span data-line="5561"></span> we obtain hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5562"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_3:~\overline{.\mathid{x}~\notin \Gamma{}}
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued para-continue" data-line="5565"><span data-line="5565"></span>Via application <span data-line="5565"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$L_{15} \, H_3 \, H_2$</span></span><span data-line="5565"></span> we acquire hypothesis:
</p>
<div class="mathpre para-block input-mathpre" data-line="5566"><span class="math-rendering" title="Rendering math..."><span class="mathpre math-display">\[\begin{mdmathpre}%mdk
\mathid{H}_4:~\Sigma{},\Delta{},\Gamma{}[\overline{.\mathid{x}:\mathkw{match\_kind}}]~\models \xi,\sigma
\end{mdmathpre}%mdk
\]</span></span></div>
<p class="p noindent para-continued" data-line="5569"><span data-line="5569"></span>and <span data-line="5569"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$H_4$</span></span><span data-line="5569"></span> proves <span data-line="5569"></span><span class="math-rendering" title="Rendering math..."><span class="math-inline">$SG$</span></span><span data-line="5569"></span>.
</p><span data-line=""></span></div>
</body>

</html>
